<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Adaptors _csv_put and _put</title>
<link rel="stylesheet" href="../../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
<link rel="home" href="../../index.html" title="Chapter&#160;1.&#160;Boost.Assign 2.0">
<link rel="up" href="../ug.html" title="User's guide">
<link rel="prev" href="ref_anon.html" title="Anonymous container of references">
<link rel="next" href="anon.html" title="Anonymous container of values">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../boost.png"></td>
<td align="center"><a href="../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="ref_anon.html"><img src="../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../ug.html"><img src="../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="anon.html"><img src="../../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="section" title="Adaptors _csv_put and _put">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_assign_v2.ug.put"></a><a class="link" href="put.html" title="Adaptors _csv_put and _put"> Adaptors <code class="computeroutput"><span class="identifier">_csv_put</span></code>
      and <code class="computeroutput"><span class="identifier">_put</span></code> </a>
</h3></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.synopsis">Synopsis</a></span></dt>
<dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.usage"> Basic usage </a></span></dt>
<dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.std_modifier"> Standard modifier</a></span></dt>
<dd><dl>
<dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.std_modifier.auto"> Automatic
          deduction</a></span></dt>
<dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.std_modifier.user"> User specified</a></span></dt>
<dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.std_modifier.custom_">Custom
          </a></span></dt>
</dl></dd>
<dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.arg_forwarding"> Argument forwarding</a></span></dt>
<dd><dl>
<dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.arg_forwarding.auto"> Automatic
          deduction</a></span></dt>
<dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.arg_forwarding.user"> User
          specified</a></span></dt>
</dl></dd>
<dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.ptr_container"> Pointer container</a></span></dt>
<dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.ext_func"> Extended functionality</a></span></dt>
<dd><dl><dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.ext_func.repeat"> Repeating
          an argument</a></span></dt></dl></dd>
<dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.test_knowledge"> Test your knowledge</a></span></dt>
</dl></div>
<div class="section" title="Synopsis">
<div class="titlepage"><div><div><h4 class="title">
<a name="boost_assign_v2.ug.put.synopsis"></a><a class="link" href="put.html#boost_assign_v2.ug.put.synopsis" title="Synopsis">Synopsis</a>
</h4></div></div></div>
<div class="table">
<a name="boost_assign_v2.ug.put.synopsis.the_put_adaptor"></a><p class="title"><b>Table&#160;1.3.&#160;The put adaptor</b></p>
<div class="table-contents"><table class="table" summary="The put adaptor">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                  <p>
                    Call
                  </p>
                </th>
<th>
                  <p>
                    Result
                  </p>
                </th>
</tr></thead>
<tbody>
<tr>
<td>
                  <p>
                    <code class="computeroutput">cont <span class="special">|</span> <span class="special">(</span><span class="identifier">adaptor</span><span class="special">::</span><span class="identifier">_csv_put</span> <span class="special">%</span>
                    p<span class="special">[</span><span class="number">0</span><span class="special">]</span> <span class="special">%</span>
                    <span class="special">...</span> <span class="special">%</span>
                    p<span class="special">[</span>m<span class="special">]</span>
                    <span class="special">)(</span> t<span class="special">[</span><span class="number">0</span><span class="special">],</span> <span class="special">....,</span>t<span class="special">[</span>n<span class="special">-</span><span class="number">1</span><span class="special">]</span> <span class="special">)</span></code>
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput">Cont<span class="special">&amp;</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    <code class="computeroutput">cont <span class="special">|</span> <span class="special">(</span><span class="identifier">adaptor</span><span class="special">::</span><span class="identifier">_put</span> <span class="special">%</span>
                    p<span class="special">[</span><span class="number">0</span><span class="special">]</span> <span class="special">%</span>
                    <span class="special">...</span> <span class="special">%</span>
                    p<span class="special">[</span>m<span class="special">]</span>
                    <span class="special">)(</span>arg<span class="special">[</span><span class="number">0</span><span class="special">][</span><span class="number">0</span><span class="special">],</span> <span class="special">...,</span> arg<span class="special">[</span><span class="number">0</span><span class="special">][</span>k<span class="special">[</span><span class="number">0</span><span class="special">]])...(</span> arg<span class="special">[</span>n<span class="special">-</span><span class="number">1</span><span class="special">][</span><span class="number">0</span><span class="special">],</span> <span class="special">...,</span>
                    arg<span class="special">[</span>n<span class="special">-</span><span class="number">1</span><span class="special">][</span>k<span class="special">[</span>n<span class="special">-</span><span class="number">1</span><span class="special">]])</span></code>
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput">Cont<span class="special">&amp;</span></code>
                  </p>
                </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break">
</div>
<div class="section" title="Basic usage">
<div class="titlepage"><div><div><h4 class="title">
<a name="boost_assign_v2.ug.put.usage"></a><a class="link" href="put.html#boost_assign_v2.ug.put.usage" title="Basic usage"> Basic usage </a>
</h4></div></div></div>
<p>
          To put elements, <code class="computeroutput">x</code>, <code class="computeroutput">y</code> and <code class="computeroutput">z</code> into
          a container,
        </p>
<p>
          </p>
<p>
            
</p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span> <span class="identifier">cont_</span><span class="special">;</span>
<span class="identifier">cont_</span> <span class="identifier">cont</span><span class="special">;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="identifier">adaptor</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">for_each</span><span class="special">(</span> <span class="identifier">cont</span> <span class="special">|</span> <span class="identifier">_csv_put</span><span class="special">(</span> <span class="identifier">x</span><span class="special">,</span> <span class="identifier">y</span><span class="special">,</span> <span class="identifier">z</span> <span class="special">),</span> <span class="identifier">printer</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span><span class="special">)</span> <span class="special">);</span>
<span class="comment">//outputs (1,0)(NULL,0)(1,5)
</span></pre>
<p>
          </p>
<p>
        </p>
<p>
          The workings and benefits of adaptors are developed in <a href="http://www.boost.org/doc/libs/1_44_0/libs/range/doc/html/range/reference/adaptors.html" target="_top">range
          adaptors</a>, so they will not be repeated here. For our purpose, however,
          keep in mind that our adaptor modifies the state of a container before
          returning it. Specifically, the statement inside the first argument of
          <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">for_each</span></code> is equivalent, for this particular
          container type, to 
</p>
<pre class="programlisting">cont<span class="special">.</span><span class="identifier">push_back</span><span class="special">(</span> x <span class="special">);</span>
cont<span class="special">.</span><span class="identifier">push_back</span><span class="special">(</span> y <span class="special">);</span>
cont<span class="special">.</span><span class="identifier">push_back</span><span class="special">(</span> z <span class="special">);</span>
</pre>
<p>
          and returns a reference to <code class="computeroutput"><span class="identifier">cont</span></code>.
          The result from <code class="computeroutput"><span class="identifier">_csv_put</span><span class="special">(</span> x<span class="special">,</span> y <span class="special">,</span>z <span class="special">)</span></code> internally
          keeps references to <code class="computeroutput">x</code>, <code class="computeroutput">y</code> , <code class="computeroutput">z</code>, so
          as to avoid any storage overhead.
        </p>
</div>
<div class="section" title="Standard modifier">
<div class="titlepage"><div><div><h4 class="title">
<a name="boost_assign_v2.ug.put.std_modifier"></a><a class="link" href="put.html#boost_assign_v2.ug.put.std_modifier" title="Standard modifier"> Standard modifier</a>
</h4></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.std_modifier.auto"> Automatic
          deduction</a></span></dt>
<dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.std_modifier.user"> User specified</a></span></dt>
<dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.std_modifier.custom_">Custom
          </a></span></dt>
</dl></div>
<p>
          A container has one or more member functions to alter its state, and in
          the case that interests us, adding elements. For example, <code class="computeroutput"><span class="identifier">push_back</span><span class="special">()</span></code>
          is what we call, in this library, a standard modifier.
        </p>
<div class="section" title="Automatic deduction">
<div class="titlepage"><div><div><h5 class="title">
<a name="boost_assign_v2.ug.put.std_modifier.auto"></a><a class="link" href="put.html#boost_assign_v2.ug.put.std_modifier.auto" title="Automatic deduction"> Automatic
          deduction</a>
</h5></div></div></div>
<p>
            We have just encountered one instance of a <a href="http://www.sgi.com/tech/stl/Sequence.html" target="_top">sequence
            container</a>, <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;&gt;</span></code>. In fact, the same adaptor works
            seamlessly with the other categories of <a href="http://en.wikipedia.org/wiki/Standard_Template_Library" target="_top">STL</a>
            containers, <a href="http://www.sgi.com/tech/stl/AssociativeContainer.html" target="_top">associative</a>,
            and <a href="http://en.wikipedia.org/wiki/Standard_Template_Library" target="_top">adapter</a>
            (<code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">stack</span><span class="special">&lt;&gt;</span></code>
            and <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">queue</span><span class="special">&lt;&gt;</span></code>),
            and the static array <a href="http://www.boost.org/doc/libs/release/doc/html/array.html" target="_top"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">array</span><span class="special">&lt;&gt;</span></code></a>.
            For example,
            </p>
<p>
              
</p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span><span class="identifier">S</span><span class="special">,</span><span class="identifier">T</span><span class="special">&gt;</span> <span class="identifier">cont_</span><span class="special">;</span>
<span class="keyword">typedef</span> <span class="identifier">cont_</span><span class="special">::</span><span class="identifier">value_type</span> <span class="identifier">key_data_</span><span class="special">;</span>
<span class="identifier">cont_</span> <span class="identifier">cont</span><span class="special">;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="identifier">adaptor</span><span class="special">;</span>
<span class="identifier">BOOST_ASSERT</span><span class="special">(</span> 
    <span class="special">(</span>
        <span class="identifier">cont</span> <span class="special">|</span> <span class="identifier">_csv_put</span><span class="special">(</span> 
            <span class="identifier">key_data_</span><span class="special">(</span><span class="identifier">key_z</span><span class="special">,</span> <span class="identifier">z</span><span class="special">),</span> 
            <span class="identifier">key_data_</span><span class="special">(</span><span class="identifier">key_y</span><span class="special">,</span> <span class="identifier">y</span><span class="special">),</span> 
            <span class="identifier">key_data_</span><span class="special">(</span><span class="identifier">key_x</span><span class="special">,</span> <span class="identifier">x</span><span class="special">)</span>
        <span class="special">)</span>
    <span class="special">)[</span><span class="identifier">key_x</span><span class="special">]</span> <span class="special">==</span> <span class="identifier">x</span>
<span class="special">);</span>
</pre>
<p>
            </p>
<p>
            In this instance, <code class="computeroutput"><span class="identifier">insert</span><span class="special">()</span></code> is the modifier that is internally
            called. This choice is made at compile time by the library, based on
            certain properties of the destination container (traits).
          </p>
<p>
            The repetition of <code class="computeroutput"><span class="identifier">key_data_</span><span class="special">()</span></code> is not very elegant. There is a better
            solution, but it would be outside of the topic of this section and therefore
            it will be shown in a <a class="link" href="put.html#boost_assign_v2.ug.put.arg_forwarding.auto" title="Automatic deduction">subsequent
            one</a>.
          </p>
</div>
<div class="section" title="User specified">
<div class="titlepage"><div><div><h5 class="title">
<a name="boost_assign_v2.ug.put.std_modifier.user"></a><a class="link" href="put.html#boost_assign_v2.ug.put.std_modifier.user" title="User specified"> User specified</a>
</h5></div></div></div>
<p>
            Rather than leaving the library to automatically choose a modifier at
            compile time, the user can specify it explicitly. This makes sense, for
            example, for <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">list</span><span class="special">&lt;&gt;</span></code>
            because the default modifier is <code class="computeroutput"><span class="identifier">push_back</span><span class="special">()</span></code>, whereas the user may in fact wish
            to call <code class="computeroutput"><span class="identifier">push_front</span><span class="special">()</span></code>,
            </p>
<p>
              
</p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">list</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span> <span class="identifier">cont_</span><span class="special">;</span>
<span class="identifier">cont_</span> <span class="identifier">cont</span><span class="special">;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="identifier">adaptor</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">for_each</span><span class="special">(</span> 
    <span class="identifier">cont</span> <span class="special">|</span> <span class="special">(</span><span class="identifier">_csv_put</span> <span class="special">%</span> <span class="identifier">_push_front</span><span class="special">)(</span> <span class="identifier">x</span><span class="special">,</span> <span class="identifier">y</span><span class="special">,</span> <span class="identifier">z</span> <span class="special">),</span> 
    <span class="identifier">printer</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span><span class="special">)</span> 
<span class="special">);</span>
<span class="comment">//outputs (1,5)(NULL,0)(1,0)
</span></pre>
<p>
            </p>
<p>
            Make sure to keep the statement involving <code class="computeroutput"><span class="keyword">operator</span><span class="special">%</span></code> in between brackets, as shown above.
          </p>
<p>
            Here's a catalog of the different standard modifiers.
          </p>
<div class="table">
<a name="boost_assign_v2.ug.put.std_modifier.user.standard_modifier"></a><p class="title"><b>Table&#160;1.4.&#160;Standard modifier</b></p>
<div class="table-contents"><table class="table" summary="Standard modifier">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                    <p>
                      Parameter
                    </p>
                  </th>
<th>
                    <p>
                      Implementation
                    </p>
                  </th>
<th>
                    <p>
                      Default
                    </p>
                  </th>
</tr></thead>
<tbody>
<tr>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">_push_back</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput">cont<span class="special">.</span><span class="identifier">push_back</span><span class="special">(</span> t <span class="special">)</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      <a href="http://www.sgi.com/tech/stl/Sequence.html" target="_top">Sequence</a>
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">_push_front</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput">cont<span class="special">.</span><span class="identifier">push_front</span><span class="special">(</span> t <span class="special">)</span></code>
                    </p>
                  </td>
<td>
                    <p>
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">_push</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput">cont<span class="special">.</span><span class="identifier">push</span><span class="special">(</span> t <span class="special">)</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      <a href="http://en.wikipedia.org/wiki/Standard_Template_Library" target="_top">Adapters</a>
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">_at_next</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput">cont<span class="special">[</span> i<span class="special">++</span>
                      <span class="special">]</span> <span class="special">=</span>
                      t </code>
                    </p>
                  </td>
<td>
                    <p>
                      <a href="http://www.boost.org/doc/libs/release/doc/html/array.html" target="_top">Static
                      arrays</a>
                    </p>
                  </td>
</tr>
<tr>
<td>
                    <p>
                      <code class="computeroutput"><span class="identifier">_insert</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      <code class="computeroutput">cont<span class="special">.</span><span class="identifier">insert</span><span class="special">(</span> t <span class="special">)</span></code>
                    </p>
                  </td>
<td>
                    <p>
                      <a href="http://www.sgi.com/tech/stl/AssociativeContainer.html" target="_top">Associative</a>
                    </p>
                  </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><p>
            where index <code class="computeroutput">i</code> is initialized to zero.
          </p>
<p>
            More generally, <code class="computeroutput"><span class="keyword">operator</span><span class="special">%</span></code>, in conjunction with the adaptor generator
            <code class="computeroutput"><span class="identifier">_csv_put</span></code> is used to pass
            a parameter to the latter (not just a standard modifier) that determines
            the implementation of <code class="computeroutput"><span class="keyword">operator</span><span class="special">|</span></code>. Just as the latter, <code class="computeroutput"><span class="keyword">operator</span><span class="special">%</span></code> is composable.
          </p>
</div>
<div class="section" title="Custom">
<div class="titlepage"><div><div><h5 class="title">
<a name="boost_assign_v2.ug.put.std_modifier.custom_"></a><a class="link" href="put.html#boost_assign_v2.ug.put.std_modifier.custom_" title="Custom">Custom
          </a>
</h5></div></div></div>
<p>
            Imagine that the user has defined his/her own container, and that <code class="computeroutput"><span class="identifier">baz</span><span class="special">()</span></code>
            is the member function by which elements are inserted: 
</p>
<pre class="programlisting"><span class="keyword">struct</span> <span class="identifier">bar</span><span class="special">{</span> <span class="keyword">void</span> <span class="identifier">baz</span><span class="special">(</span><span class="keyword">int</span><span class="special">);</span> <span class="special">};</span>
</pre>
<p>
            By first expanding 
</p>
<pre class="programlisting"><span class="identifier">BOOST_ASSIGN_V2_PUT_MODIFIER_XXX</span><span class="special">(</span><span class="identifier">baz</span><span class="special">)</span>
</pre>
<p>
            it's then possible to call, say 
</p>
<pre class="programlisting"><span class="identifier">bar</span> cont<span class="special">;</span>
cont <span class="special">|</span> <span class="special">(</span><span class="identifier">_csv_put</span> <span class="special">%</span> <span class="identifier">_baz</span><span class="special">)(</span> x<span class="special">,</span> y<span class="special">,</span> z <span class="special">);</span>	
</pre>
<p>
          </p>
</div>
</div>
<div class="section" title="Argument forwarding">
<div class="titlepage"><div><div><h4 class="title">
<a name="boost_assign_v2.ug.put.arg_forwarding"></a><a class="link" href="put.html#boost_assign_v2.ug.put.arg_forwarding" title="Argument forwarding"> Argument forwarding</a>
</h4></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.arg_forwarding.auto"> Automatic
          deduction</a></span></dt>
<dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.arg_forwarding.user"> User
          specified</a></span></dt>
</dl></div>
<div class="section" title="Automatic deduction">
<div class="titlepage"><div><div><h5 class="title">
<a name="boost_assign_v2.ug.put.arg_forwarding.auto"></a><a class="link" href="put.html#boost_assign_v2.ug.put.arg_forwarding.auto" title="Automatic deduction"> Automatic
          deduction</a>
</h5></div></div></div>
<p>
            The adaptor generator <code class="computeroutput"><span class="identifier">_csv_put</span></code>,
            which we have exclusively used so far, is fine when the objects to be
            put into a container are already constructed. Otherwise, we have to construct
            them in place, e.g.
            </p>
<p>
              
</p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span> <span class="identifier">cont_</span><span class="special">;</span>
<span class="identifier">cont_</span> <span class="identifier">cont</span><span class="special">;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="identifier">adaptor</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">for_each</span><span class="special">(</span> 
    <span class="identifier">cont</span> <span class="special">|</span> <span class="identifier">_csv_put</span><span class="special">(</span> <span class="identifier">foo</span><span class="special">(</span> <span class="identifier">a</span> <span class="special">),</span> <span class="identifier">foo</span><span class="special">(),</span> <span class="identifier">foo</span><span class="special">(</span> <span class="identifier">a</span><span class="special">,</span> <span class="identifier">b</span> <span class="special">)</span> <span class="special">),</span> 
    <span class="identifier">printer</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span><span class="special">)</span> 
<span class="special">);</span>
</pre>
<p>
            </p>
<p>
            We can achieve the same result, but with code that is more compact, using
            a functor analog to <code class="computeroutput"><span class="identifier">_csv_put</span></code>,
            <code class="computeroutput"><span class="identifier">_put</span></code>, that takes care
            of forwarding to the constructor:
            </p>
<p>
              
</p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span> <span class="identifier">cont_</span><span class="special">;</span>
<span class="identifier">cont_</span> <span class="identifier">cont</span><span class="special">;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="identifier">adaptor</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">for_each</span><span class="special">(</span> 
    <span class="identifier">cont</span> <span class="special">|</span> <span class="identifier">_put</span><span class="special">(</span> <span class="identifier">a</span> <span class="special">)()(</span> <span class="identifier">a</span><span class="special">,</span> <span class="identifier">b</span> <span class="special">),</span> 
    <span class="identifier">printer</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span><span class="special">)</span> 
<span class="special">);</span>
</pre>
<p>
            </p>
<p>
            The appropriate constructor is deduced at compile time, from the value
            type of the destination container, <code class="computeroutput">cont</code>.
          </p>
<p>
            With this tool, we are now able to show how to overcome the drawback
            that was pointed out when filling a <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;&gt;</span></code> with <code class="computeroutput"><span class="identifier">_csv_put</span></code>.
            Continuing that <a class="link" href="put.html#boost_assign_v2.ug.put.std_modifier.auto" title="Automatic deduction">example</a>,
            </p>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">cont</span><span class="special">.</span><span class="identifier">clear</span><span class="special">();</span>
<span class="identifier">BOOST_ASSERT</span><span class="special">(</span> 
    <span class="special">(</span> <span class="identifier">cont</span> <span class="special">|</span> <span class="identifier">_put</span> <span class="special">(</span><span class="identifier">key_z</span><span class="special">,</span> <span class="identifier">z</span><span class="special">)(</span><span class="identifier">key_y</span><span class="special">,</span> <span class="identifier">y</span><span class="special">)(</span><span class="identifier">key_x</span><span class="special">,</span> <span class="identifier">x</span><span class="special">)</span> <span class="special">)[</span><span class="identifier">key_x</span><span class="special">]</span> <span class="special">==</span> <span class="identifier">x</span>
<span class="special">);</span>
</pre>
<p>
            </p>
<p>
          </p>
<div class="warning" title="Warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="../../../../doc/html/images/warning.png"></td>
<th align="left">Warning</th>
</tr>
<tr><td align="left" valign="top"><p>
              For large <code class="literal">n</code> and <code class="literal">k</code>, it may be
              necessary to construct objects in place, and pass them to <code class="computeroutput"><span class="identifier">_csv_put</span></code>, because of <code class="computeroutput"><span class="identifier">_put</span></code>'s greater compilation needs.
              As an indication, this seems to be the case under the <a class="link" href="platform.html" title="Testing platform">default
              testing platform</a>, for <code class="literal">n &gt; 32</code> and <code class="literal">k
              = 1</code>.
            </p></td></tr>
</table></div>
</div>
<div class="section" title="User specified">
<div class="titlepage"><div><div><h5 class="title">
<a name="boost_assign_v2.ug.put.arg_forwarding.user"></a><a class="link" href="put.html#boost_assign_v2.ug.put.arg_forwarding.user" title="User specified"> User
          specified</a>
</h5></div></div></div>
<p>
            As we have just seen, forwarding to the constructor is the default choice.
            We can override it with <code class="computeroutput"><span class="keyword">operator</span><span class="special">%</span></code> in conjuction with <code class="computeroutput"><span class="identifier">_fun</span></code>.
            Continuing from the previous <a class="link" href="put.html#boost_assign_v2.ug.put.arg_forwarding.auto" title="Automatic deduction">example</a>
            involving <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;&gt;</span></code>,
            </p>
<p>
              
</p>
<pre class="programlisting"><span class="keyword">int</span> <span class="identifier">a0</span> <span class="special">=</span> <span class="special">-</span><span class="number">1</span><span class="special">,</span> <span class="identifier">a1</span> <span class="special">=</span> <span class="number">0</span><span class="special">,</span> <span class="identifier">a2</span> <span class="special">=</span> <span class="number">1</span><span class="special">;</span>
<span class="identifier">cont</span><span class="special">.</span><span class="identifier">clear</span><span class="special">();</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">for_each</span><span class="special">(</span> 
    <span class="identifier">cont</span> <span class="special">|</span> <span class="special">(</span>
        <span class="identifier">_put</span> <span class="special">%</span> <span class="special">(</span> <span class="identifier">_fun</span> <span class="special">=</span> <span class="identifier">make_foo</span><span class="special">()</span> <span class="special">)</span>
    <span class="special">)(</span> <span class="identifier">a0</span><span class="special">,</span> <span class="identifier">b</span> <span class="special">)(</span> <span class="identifier">a1</span><span class="special">,</span> <span class="identifier">b</span> <span class="special">)(</span> <span class="identifier">a2</span><span class="special">,</span> <span class="identifier">b</span> <span class="special">),</span>
    <span class="identifier">printer</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span><span class="special">)</span>
<span class="special">);</span>
<span class="comment">//outputs (-1,5)(0,5)(1,5)
</span></pre>
<p>
            </p>
<p>
          </p>
<p>
            Users that are familiar with the <a href="http://www.boost.org/doc/libs/release/doc/html/lambda.html" target="_top">lambda</a>
            library will have recognized that the repetition of <code class="computeroutput"><span class="identifier">b</span></code>
            would be better avoided thanks to a binding functor:
            </p>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">cont</span><span class="special">.</span><span class="identifier">clear</span><span class="special">();</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">lambda</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">for_each</span><span class="special">(</span> 
    <span class="identifier">cont</span> <span class="special">|</span> <span class="special">(</span>
        <span class="identifier">_csv_put</span> <span class="special">%</span> <span class="special">(</span><span class="identifier">_fun</span> <span class="special">=</span> <span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;(</span> <span class="identifier">make_foo</span><span class="special">(),</span> <span class="identifier">_1</span><span class="special">,</span> <span class="identifier">b</span><span class="special">)</span>  <span class="special">)</span>
    <span class="special">)(</span><span class="identifier">a0</span><span class="special">,</span> <span class="identifier">a1</span><span class="special">,</span> <span class="identifier">a2</span><span class="special">),</span> 
    <span class="identifier">printer</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span><span class="special">)</span> 
<span class="special">);</span>
</pre>
<p>
            </p>
<p>
            Notice that since each argument in the sequence is now unary, we were
            able to revert to using <code class="computeroutput"><span class="identifier">_csv_put</span></code>,
            and did so only because it's more elegant that way.
          </p>
</div>
</div>
<div class="section" title="Pointer container">
<div class="titlepage"><div><div><h4 class="title">
<a name="boost_assign_v2.ug.put.ptr_container"></a><a class="link" href="put.html#boost_assign_v2.ug.put.ptr_container" title="Pointer container"> Pointer container</a>
</h4></div></div></div>
<p>
          The same functionality as that for STL containers works for <a href="http://www.boost.org/doc/libs/release/libs/ptr_container/doc/ptr_container.html" target="_top">pointer
          containers</a>, but the side effect is a bit different. For example,
          consider,
          </p>
<p>
            
</p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">ptr_vector</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span> <span class="identifier">cont_</span><span class="special">;</span> <span class="identifier">cont_</span> <span class="identifier">cont</span><span class="special">;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="identifier">adaptor</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">for_each</span><span class="special">(</span> 
	<span class="identifier">cont</span> <span class="special">|</span> <span class="identifier">_csv_put</span><span class="special">(</span> <span class="identifier">x</span><span class="special">,</span> <span class="identifier">y</span><span class="special">,</span> <span class="identifier">z</span> <span class="special">),</span> 
    <span class="identifier">printer</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span><span class="special">)</span> 
<span class="special">);</span>
</pre>
<p>
          </p>
<p>
          Copies of <code class="computeroutput">x</code>, <code class="computeroutput">y</code> and <code class="computeroutput">z</code> are allocated
          on the heap, and their pointers put into <code class="computeroutput"><span class="identifier">cont</span></code>,
          using <code class="computeroutput"><span class="identifier">push_back</span></code>, in this
          case. Just as with other categories of containers, we can override both
          the modifier and the argument forwarding mechanism, by passign the appropriate
          parameters with <code class="computeroutput"><span class="keyword">operator</span><span class="special">%</span></code>.
        </p>
</div>
<div class="section" title="Extended functionality">
<div class="titlepage"><div><div><h4 class="title">
<a name="boost_assign_v2.ug.put.ext_func"></a><a class="link" href="put.html#boost_assign_v2.ug.put.ext_func" title="Extended functionality"> Extended functionality</a>
</h4></div></div></div>
<div class="toc"><dl><dt><span class="section"><a href="put.html#boost_assign_v2.ug.put.ext_func.repeat"> Repeating
          an argument</a></span></dt></dl></div>
<p>
          We have seen that there are two orthogonal parametrization: the standard
          modifier, e.g. <code class="computeroutput"><span class="identifier">_push_back</span></code>
          and the forwarding functor, e.g. <code class="computeroutput"><span class="identifier">_fun</span>
          <span class="special">=</span> <span class="identifier">make_foo</span><span class="special">()</span></code>. Here, we discuss parametrization that
          is more complex.
        </p>
<div class="section" title="Repeating an argument">
<div class="titlepage"><div><div><h5 class="title">
<a name="boost_assign_v2.ug.put.ext_func.repeat"></a><a class="link" href="put.html#boost_assign_v2.ug.put.ext_func.repeat" title="Repeating an argument"> Repeating
          an argument</a>
</h5></div></div></div>
<p>
            </p>
<p>
              
</p>
<pre class="programlisting"><span class="identifier">cont</span><span class="special">.</span><span class="identifier">clear</span><span class="special">();</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">for_each</span><span class="special">(</span> 
    <span class="identifier">cont</span> <span class="special">|</span> <span class="special">(</span> <span class="identifier">_csv_put</span> <span class="special">%</span> <span class="special">(</span> <span class="identifier">_repeat</span> <span class="special">=</span> <span class="number">2</span>  <span class="special">)</span> <span class="special">)(</span> <span class="identifier">x</span> <span class="special">),</span>
    <span class="identifier">printer</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span><span class="special">)</span> 
<span class="special">);</span>
<span class="comment">// outputs (1,0)(1,0)
</span></pre>
<p>
            </p>
<p>
          </p>
</div>
</div>
<div class="section" title="Test your knowledge">
<div class="titlepage"><div><div><h4 class="title">
<a name="boost_assign_v2.ug.put.test_knowledge"></a><a class="link" href="put.html#boost_assign_v2.ug.put.test_knowledge" title="Test your knowledge"> Test your knowledge</a>
</h4></div></div></div>
<p>
          Look at the piece of code below, and try to figure out what the output
          will be. Notice that shown in the comments are the outputs of the individual
          values, in the order in which they are passed to the adaptor generator.
          For example, the output of <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> x</code> is <code class="literal">(1,0)</code>.
          </p>
<p>
            
</p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">list</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;</span> <span class="identifier">cont_</span><span class="special">;</span>	
<span class="identifier">cont_</span> <span class="identifier">cont</span><span class="special">;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="identifier">boost</span><span class="special">::</span><span class="identifier">lambda</span><span class="special">;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">for_each</span><span class="special">(</span> 
    <span class="identifier">cont</span> <span class="special">|</span> <span class="special">(</span> <span class="identifier">_csv_put</span> <span class="special">)(</span> <span class="identifier">x</span> <span class="special">)</span> <span class="comment">/*(1,0)*/</span> <span class="special">|</span> <span class="special">(</span> 
        <span class="identifier">_put</span> <span class="special">%</span> <span class="identifier">_push_front</span> <span class="special">%</span> <span class="special">(</span> <span class="identifier">_repeat</span> <span class="special">=</span> <span class="number">2</span> <span class="special">)</span> 
    <span class="special">)()(</span> <span class="identifier">b</span><span class="special">,</span> <span class="identifier">a</span> <span class="special">)</span> <span class="comment">/*(NULL,0)(5,1)*/</span> <span class="special">|</span> <span class="special">(</span> 
        <span class="identifier">_csv_put</span> <span class="special">%</span> <span class="special">(</span> <span class="identifier">_fun</span> <span class="special">=</span> <span class="identifier">bind</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;(</span> <span class="identifier">make_foo</span><span class="special">(),</span> <span class="identifier">_1</span><span class="special">,</span> <span class="identifier">b</span><span class="special">)</span> <span class="special">)</span>
    <span class="special">)(</span> <span class="identifier">a0</span><span class="special">,</span> <span class="identifier">a1</span><span class="special">,</span> <span class="identifier">a2</span> <span class="special">),</span> <span class="comment">/*(-1,5)(0,5)(1,5)*/</span>
    <span class="identifier">printer</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span><span class="special">)</span> 
<span class="special">);</span>
</pre>
<p>
          </p>
<p>
        </p>
<p>
          The right answer is:
          </p>
<p>
            
</p>
<pre class="programlisting"><span class="comment">// outputs (5,1)(5,1)(NULL,0)(NULL,0)(1,0)(-1,5)(0,5)(1,5)
</span></pre>
<p>
          </p>
<p>
        </p>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2003 -2004 Thorsten Ottosen, 2010 Erwann Rogard<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="ref_anon.html"><img src="../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../ug.html"><img src="../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="anon.html"><img src="../../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
