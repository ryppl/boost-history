boost_library_project(
  A
)

boost_library(a 
  lib.cpp
  COMPILE_FLAGS -DA_COMPILE_FLAGS
  STICKY_COMPILE_FLAGS "-I${CMAKE_CURRENT_SOURCE_DIR} -DA_STICKY_COMPILE_FLAGS"
  STATIC_COMPILE_FLAGS "-DA_STATIC_COMPILE_FLAGS -DLINKTYPE=static"
  STICKY_STATIC_COMPILE_FLAGS -DA_STICKY_STATIC_COMPILE_FLAGS
  SHARED_COMPILE_FLAGS "-DA_SHARED_COMPILE_FLAGS -DLINKTYPE=shared"
  STICKY_SHARED_COMPILE_FLAGS -DA_STICKY_SHARED_COMPILE_FLAGS
)

boost_test_run(test_shared DEPENDS a-shared)
boost_test_run(test_static DEPENDS a-static)
