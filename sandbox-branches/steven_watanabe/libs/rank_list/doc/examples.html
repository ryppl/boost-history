<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" type="text/css" href="../../../boost.css">
<title>Rank List - Examples</title>
</head>
<body link="#0000ff" vlink="#800080">
<table border="0" cellpadding="7" cellspacing="0" width="100%" summary="header">
  <tr> 
    <td valign="top" width="300"> 
      <h3><a href="../../../index.htm"><img height="86" width="277" alt="C++ Boost" src="../../../boost.png" border="0"></a></h3>
    </td>
    <td valign="top"> 
      <h1 align="center">Rank List</h1>
      <h2 align="center">Examples</h2>
    </td>
  </tr>
</table>
<hr>
<dl class="index">
  <dt><a href="#simpletest">Simple test</a></dt>
  <dt><a href="#npsvexample">NPSV example</a></dt>
</dl>
<h2><a name="simpletest">Simple test</a></h2>
<p>
The code listed in<code> simpletest.cpp </code>is rough, simple test. It shows that
Rank Lists outperform vector and list under very particular conditions. Rank Lists
are the best choice in cases where both kinds of operations (random access and
insert/erase at any point) are performed frequently in highly populated containers.
</p><p>
The test consists in populating a container by inserting random numbers in random
positions, and then removing elements from random positions until only one remains.
The final element is shown as a proof that all containers execute the same operations.
The next table shows some results:
</p><p>
<center><h4>Results (times in seconds) of<code> simpletest.cpp</code></h4></center>
<table align="center" border=1 cellspacing=0 cellpadding=3>
  <tr align="center">
    <td><b>Size</b></td>
    <td><code><b>list</b></code></td>
    <td><code><b>vector</b></code></td>
    <td><code><b>deque</b></code></td>
    <td><code><b>rank_list</b></code></td>
    <td><b>Final element</b></td>
  </tr>
  <tr align="center">
    <td><code>10000</code></td>
    <td><code>1</code></td>
    <td><code>0</code></td>
    <td><code>0</code></td>
    <td><code>0</code></td>
    <td><code>17825</code></td>
  </tr>
  <tr align="center">
    <td><code>15000</code></td>
    <td><code>3</code></td>
    <td><code>0</code></td>
    <td><code>0</code></td>
    <td><code>0</code></td>
    <td><code>23360</code></td>
  </tr>
  <tr align="center">
    <td><code>22500</code></td>
    <td><code>8</code></td>
    <td><code>0</code></td>
    <td><code>1</code></td>
    <td><code>0</code></td>
    <td><code>6148</code></td>
  </tr>
  <tr align="center">
    <td><code>33750</code></td>
    <td><code>26</code></td>
    <td><code>2</code></td>
    <td><code>1</code></td>
    <td><code>0</code></td>
    <td><code>7020</code></td>
  </tr>
  <tr align="center">
    <td><code>50625</code></td>
    <td><code>118</code></td>
    <td><code>3</code></td>
    <td><code>4</code></td>
    <td><code>0</code></td>
    <td><code>14041</code></td>
  </tr>
  <tr align="center">
    <td><code>75937</code></td>
    <td><code><font color=#800000>&gt;120</font> <sup>1</sup></code></td>
    <td><code>6</code></td>
    <td><code>9</code></td>
    <td><code>1</code></td>
    <td><code>31946</code></td>
  </tr>
  <tr align="center">
    <td><code>113905</code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code>15</code></td>
    <td><code>20</code></td>
    <td><code>1</code></td>
    <td><code>13288</code></td>
  </tr>
  <tr align="center">
    <td><code>170857</code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code>39</code></td>
    <td><code>48</code></td>
    <td><code>1</code></td>
    <td><code>32266</code></td>
  </tr>
  <tr align="center">
    <td><code>256285</code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code><font color=#800000>&gt;120</font> <sup>2</sup></code></td>
    <td><code><font color=#800000>&gt;120</font> <sup>3</sup></code></td>
    <td><code>3</code></td>
    <td><code>29099</code></td>
  </tr>
  <tr align="center">
    <td><code>384427</code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code>4</code></td>
    <td><code>2097</code></td>
  </tr>
  <tr align="center">
    <td><code>576640</code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code>7</code></td>
    <td><code>17736</code></td>
  </tr>
  <tr align="center">
    <td><code>864960</code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code>12</code></td>
    <td><code>16371</code></td>
  </tr>
  <tr align="center">
    <td><code>1297440</code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code>19</code></td>
    <td><code>23998</code></td>
  </tr>
  <tr align="center">
    <td><code>1946160</code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code>30</code></td>
    <td><code>10100</code></td>
  </tr>
  <tr align="center">
    <td><code>2919240</code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code>50</code></td>
    <td><code>19130</code></td>
  </tr>
  <tr align="center">
    <td><code>4378860</code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code>84</code></td>
    <td><code>20558</code></td>
  </tr>
  <tr align="center">
    <td><code>6568290</code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code><font color=#808080>NA</font></code></td>
    <td><code><font color=#800000>&gt;120</font> <sup>4</sup></code></td>
    <td><code><font color=#808080>NA</font></code></td>
  </tr>
</table>
<table align="center" border=0 cellspacing=0 cellpadding=0>
<tr><td><code>1</code>: Aborted after<code> 83% </code>inserted</td></td>
<tr><td><code>2</code>: Aborted after<code> 100% </code>inserted,<code> 54% </code>removed</td></td>
<tr><td><code>3</code>: Aborted after<code> 100% </code>inserted,<code> 55% </code>removed</td></td>
<tr><td><code>4</code>: Aborted after<code> 100% </code>inserted,<code> 35% </code>removed</td></td>
</table>
<br>
<table align="center" border=0 cellspacing=0 cellpadding=0>
<tr><td>
<b>Results obtained with:</b>
<blockquote>
<dl>
  <dt>Compiler: Dev-C++ 4.9.9.0 (Project configured for best optimizations and no debug)</dt>
  <dt>Processor: Pentium 4 Mobile running at 1.59 GHz</dt>
  <dt>RAM: 512 MB</dt>
  <dt><code>MAX_TIME</code>: 120 seconds</dt>
  <dt><code>INITIAL_SIZE</code>: 10000 elements</dt>
  <dt>Random seed: 1161729471</dt>
</dl>
</blockquote>
</td></tr>
</table>
</p>
<h2><a name="npsvexample">NPSV example</a></h2>
<p>
The code listed in<code> npsvexample.cpp </code>is an example
of the experimental feature
"<a href="rank_list.html#rank_list-spec-npsv">Non-Proportional Sequence View</a>"
(NPSV). This feature exploits, in a more general form, the same
principle that Rank List uses for indexing the sequence with
natural numbers.
</p><p>
The difference is that in the normal sequence view every
element counts as 1, while in the NPSV each element can count
as a 'width' that can be changed. The position of every element
is the sum of the widths of the previous elements in the
sequence order. Negative widths are forbidden, but zero width
is allowed.
</p><p>
When an element has zero width, the next one seems to be in
the same position from the NPSV point of view. In these cases
the lookup at this shared position always returns the first
element of the 'same position' group.
</p><p>
The type of the width is a parameter of the rank_list template,
providing a lot of possibilities: unsigned, double, or any
class providing some overloaded operators<code> =</code>,<code>
+</code>,<code> -</code>,<code> +=</code>,<code> -=</code>,<code>
==</code>,<code> !=</code>,<code> ></code>,<code> <</code>,<code>
<=</code>,<code> >= </code>and a conversion from<code> int</code>,
which will be used for 0 and 1.
</p><p>
The output of the program is shown in comments along the code.
</p>
<hr>
<p>Revised
  <!--webbot bot="Timestamp" S-Type="EDITED" S-Format="%d %B, %Y" startspan -->
  22 November, 2006
  <!--webbot bot="Timestamp" endspan i-checksum="39359" -->
</p>
<p>
  <i>Copyright &copy; <a href="http://www.uah.es">Universidad de Alcal&aacute;</a>
  2006. All Rights Reserved.</i>
</p>
</body>
</html>
