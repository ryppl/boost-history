#WORK_AROUNDS:
#  2005-06-14: mpl vector_c.hpp files:

#    PROBLEM_DESCRIPTION:

#      Some main targets in this Jamfile.v2 require modifications of
#      the vector_c.hpp files below boost/mpl/aux_/preprocessed.
#      These modifications enable use of enumerators as elements of a
#      vector_c.

#    SOLUTION:

#      The required modification can be done by executing the following
#      command:
  
#        python preprocess.py all $BOOST_ROOT vector_c.cpp
#  
#      in libs/mpl/preprocessed *after* replacing:
#  
#        boost/mpl/aux_/sequence_wrapper.hpp
#  
#      with the corresponding file in the boost-sandbox.

#    OPERATING_SYSTEMS:
  
#      The above works for windows.  However for linux/unix like
#      systems, the files:

#        libs/mpl/preprocessed/preprocess.py

#      should also be copied from the sandbox to the corresponding
#      files below your $BOOST_ROOT *before* implementing the steps
#      described under SOLUTION:

#    TESTED:

#      The only vector_c.hpp's modified by the above which have been
#      tested are in subdirectories:

#        gcc

#      The only operating system tested is linux/debian.

#      The only test was running this Jamfile.v2 with target:
#        std_ptr_binary_node_test.

#-----------------------------------------------------------------

import testing
  ;

rule run-utf ( name : other-sources * )
#Purpose:
#  Short-hand for linking with boost_unit_test_framework
{
    return 
    [
      run 
        $(name).cpp 
        $(other-sources)
        $(BOOST_ROOT)/libs/test/build//boost_unit_test_framework 
      : : :
        <define>CONTAINER_SINGLE_OBJ_ID  
        <define>SP_COUNTED_BASE_ISA_OBJ_ID
        <define>USE_CONTAINER_INTERN
    ]
      ;
}

project
  : requirements 
  : default-build debug
  ;

run-utf smart_ptr_test
  :
  ;

run std_ptr_shared_ptr_test.cpp
  ;

run-output collector_sp_counted_tagged_test
  : collector_sp_counted_tagged_test.cpp
    ../src/detail/collector_sp_counted_tagged.cpp
  ;

run-utf sp_graph_dfs_print_test
  :     ../../utility/build//debug
    ../../io/filters/build//mout
  ;

run-utf std_ptr_binary_node_test
  : ../src/detail/sp_counted_accepting.cpp
    ../src/detail/collector_sp_counted_tagged.cpp
    ../../utility/build//debug
    ../../io/filters/build//mout
  #2005-08-16
  #  All tests pass after making change described in
  #  2005-08-15 ChangeLog of std_ptr_binary_node_test.cpp.
  ;

run-utf wartens_sparse_matrix_test
  : ../src/detail/sp_counted_accepting.cpp
    ../../utility/build//debug
    ../../io/filters/build//mout
  ;

compile iterator_range_test.cpp
  ;

compile iter_range_test.cpp
  ;
