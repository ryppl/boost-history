<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Chapter 2. Char Type Switch</title>
<link rel="stylesheet" href="boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="index.html" title="The Mirror library documentation">
<link rel="up" href="libraries.html" title="Part I. Libraries">
<link rel="prev" href="boost/mirror/reflects_virtual_inheritance.html" title="Class template reflects_virtual_inheritance">
<link rel="next" href="char_type_switch/reference.html" title="Char Type Switch Reference">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../boost.png"></td>
<td align="center"><a href="../../index.html">Home</a></td>
<td align="center"><a href="../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/people/people.htm">People</a></td>
<td align="center"><a href="http://www.boost.org/more/faq.htm">FAQ</a></td>
<td align="center"><a href="../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="boost/mirror/reflects_virtual_inheritance.html"><img src="../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="libraries.html"><img src="../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="index.html"><img src="../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="char_type_switch/reference.html"><img src="../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="chapter" lang="en">
<div class="titlepage"><div>
<div><h2 class="title">
<a name="char_type_switch"></a>Chapter 2. Char Type Switch</h2></div>
<div><div class="author">
<h3 class="author">
<span class="firstname">Matú&#353;</span> <span class="surname">Chochlík</span>
</h3>
<code class="email">&lt;<a class="email" href="mailto:chochlik%20-at-%20gmail.com">chochlik -at- gmail.com</a>&gt;</code><code class="email">&lt;<a class="email" href="mailto:Matus.Chochlik%20-at-%20fri.uniza.sk">Matus.Chochlik -at- fri.uniza.sk</a>&gt;</code>
</div></div>
<div><p class="copyright">Copyright © 2008 Matú&#353; Chochlík</p></div>
<div><div class="legalnotice">
<a name="id2639731"></a><p>Use, modification and distribution is subject to the Boost
			Software License, Version 1.0. (See accompanying file
			<code class="filename">LICENSE_1_0.txt</code> or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
			</p>
</div></div>
</div></div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="section"><a href="char_type_switch.html#char_type_switch.intro">Introduction</a></span></dt>
<dd><dl>
<dt><span class="section"><a href="char_type_switch.html#char_type_switch.abstract">Abstract</a></span></dt>
<dt><span class="section"><a href="char_type_switch.html#char_type_switch.motivation">Motivation</a></span></dt>
</dl></dd>
<dt><span class="section"><a href="char_type_switch/reference.html">Char Type Switch Reference</a></span></dt>
<dd><dl><dt><span class="section"><a href="char_type_switch/reference.html#id2640098">Header files</a></span></dt></dl></dd>
</dl>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="char_type_switch.intro"></a>Introduction</h2></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="char_type_switch.html#char_type_switch.abstract">Abstract</a></span></dt>
<dt><span class="section"><a href="char_type_switch.html#char_type_switch.motivation">Motivation</a></span></dt>
</dl></div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="char_type_switch.abstract"></a>Abstract</h3></div></div></div>
<p>
	The <a class="link" href="char_type_switch.html" title="Chapter 2. Char Type Switch">Char Type Switch</a> is a utility, which allows
	to change the type of string characters (and most of the related things) 
	used in the source code at compile time without breaking it, if several 
	general guidelines are followed.
</p>
<p>
	The library introduces a new character type called 
	<code class="computeroutput">::boost::cts::<a class="link" href="boost/cts/bchar.html" title="Type definition bchar">bchar</a></code> that can be 
	defined as <code class="computeroutput">wchar_t</code> or as <code class="computeroutput">char</code> based on whether
	the <code class="computeroutput">BOOST_CTS_USE_WIDE_CHARS</code> preprocessor symobol is or is not defined.
	Based on the real type of <code class="computeroutput">bchar</code> other types like 
	<code class="computeroutput">::boost::cts::<a class="link" href="boost/cts/bstring.html" title="Type definition bstring">bstring</a></code>, 
	<code class="computeroutput">::boost::cts::<a class="link" href="boost/cts/bistream.html" title="Type definition bistream">bistream</a></code>, 
	<code class="computeroutput">::boost::cts::<a class="link" href="boost/cts/bostream.html" title="Type definition bostream">bostream</a></code>, etc., 
	functions like 
	<code class="computeroutput">::boost::cts::<a class="link" href="char_type_switch/reference.html#boost.cts.bstrlen_id2419148">bstrlen</a></code>, 
	<code class="computeroutput">::boost::cts::<a class="link" href="char_type_switch/reference.html#boost.cts.bstrcpy_id2479944">bstrcpy</a></code>, etc.
	and macros like 
	<code class="computeroutput"><a class="link" href="BOOST_CTS_LIT.html" title="Macro BOOST_CTS_LIT">BOOST_CTS_LIT</a>(STRING_LITERAL)</code> OR
	<code class="computeroutput"><a class="link" href="BOOST_CTS_LIT_LENGTH.html" title="Macro BOOST_CTS_LIT_LENGTH">BOOST_CTS_LIT_LENGTH</a>(STRING_LITERAL)</code> 
	are defined.
</p>
<p>
	Most of the string operations in many applications and libraries do not logically
	depend on the definition of the underlying character type.
	If the types like <code class="computeroutput">bchar</code>, <code class="computeroutput">bstring</code>, etc. are used consistently 
	in the source code, instead of <code class="computeroutput">char</code>/<code class="computeroutput">wchar_t</code> or 
	<code class="computeroutput">::std::string</code>/<code class="computeroutput">::std::wstring</code>, the <a class="link" href="char_type_switch.html" title="Chapter 2. Char Type Switch">Char Type Switch</a>
	greatly simplifies the process of changing the character type used by a library
	or an application, when it becomes obvious that this change is necessary.
</p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../doc/html/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
	This library is not handling conversions between various character encodings. 
</p></td></tr>
</table></div>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="char_type_switch.motivation"></a>Motivation</h3></div></div></div>
<p>
	It is not always simple, possible or wise to decide 
	which character type to use in an application 
	or a library when the development process starts.
	This decision is influenced by factors many of which are clear 
	only much later in the development process or even just before
	the deployment in a concrete enviroment, like the character
	encodings to be used, the memory requirements, other libraries,
	etc.
</p>
<p>
	When developing a library, toolkit, or a framework it is even more
	important to leave this decision to the application programmers
	that will be using it. A library thus should support both
	single-byte characters and wide chars. There are several ways
	how to implement this support.
</p>
<p>
	One of the ways for a library to support different character types
	is to provide a dual interface using different identifiers for
	string-related types, classes and functions. For example a naming 
	convention to prepend or append a defined prefix or suffing to the
	base identifiers. For example:
</p>
<pre class="programlisting">
// return some text as a string of chars
const char* get_some_text_narrow(SomeType an_arg);
// return some text as a string of wchars
const wchar_t* get_some_text_wide(SomeType an_arg);

// or 
::std::string ansi_get_some_text(SomeType an_arg);
::std::wstring wide_get_some_text(SomeType an_arg);
</pre>
<p>
	The problem with this approach is that it's not very generic what
	makes it unacceptable for many applications. A better 
	way is to pass the required character type as a (template) argument and
	to use function overloads:
</p>
<pre class="programlisting">
::std::basic_string&lt;char&gt;&amp; get_some_text(::std::char_traits&lt;char&gt;);
::std::basic_string&lt;wchar_t&gt;&amp; get_some_text(::std::char_traits&lt;wchar_t&gt;);

// or
::std::basic_string&lt;char&gt;&amp; get_some_text(::std::basic_string&lt;char&gt;&amp; str);
::std::basic_string&lt;wchar_t&gt;&amp; get_some_text(::std::basic_string&lt;wchar_t&gt;&amp;);

</pre>
<p>
	This however, usually leads to long and ugly expressions and adds the requirement
	to somehow pass the character type to the function or template. 
	There are many applications that consistently use just one character type
	and here the need to explicitly pass the type over and over is especially 
	annoying.
</p>
<p>
	This can be solved using conditional <code class="computeroutput">typedef</code>s, defining a new character type
	and types derived from it. If the application
	or library is being compiled in an environment where wide chars are not necessary
	then the character type is defined as <code class="computeroutput">char</code> otherwise it's defined as
	<code class="computeroutput">wchar_t</code>. 
</p>
</div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"><p><small>Last revised: July 16, 2008 at 10:36:00 +0200</small></p></td>
<td align="right"><div class="copyright-footer"></div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="boost/mirror/reflects_virtual_inheritance.html"><img src="../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="libraries.html"><img src="../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="index.html"><img src="../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="char_type_switch/reference.html"><img src="../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
