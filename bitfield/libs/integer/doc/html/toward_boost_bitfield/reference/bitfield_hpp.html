<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title> Header
      &lt;boost/integer/bitfield.hpp&gt;</title>
<link rel="stylesheet" href="../../../../../../doc/html/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
<link rel="start" href="../../index.html" title="Toward Boost.Bitfield">
<link rel="up" href="../reference.html" title="Reference">
<link rel="prev" href="../reference.html" title="Reference">
<link rel="next" href="bitfield_dcl_hpp.html" title=" Header
      &lt;boost/integer/bitfield_dcl.hpp&gt;">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../boost.png"></td>
<td align="center"><a href="../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../reference.html"><img src="../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../reference.html"><img src="../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="bitfield_dcl_hpp.html"><img src="../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="toward_boost_bitfield.reference.bitfield_hpp"></a><a href="bitfield_hpp.html" title=" Header
      &lt;boost/integer/bitfield.hpp&gt;"> Header
      <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">integer</span><span class="special">/</span><span class="identifier">bitfield</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span></code></a>
</h3></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="bitfield_hpp.html#toward_boost_bitfield.reference.bitfield_hpp.bitfield_default_value_type">
        Metafunction <code class="computeroutput"><span class="identifier">bitfield_default_value_type</span><span class="special">&lt;&gt;</span></code></a></span></dt>
<dt><span class="section"><a href="bitfield_hpp.html#toward_boost_bitfield.reference.bitfield_hpp.bitfield">
        Template class <code class="computeroutput"><span class="identifier">bitfield</span><span class="special">&lt;&gt;</span></code></a></span></dt>
<dt><span class="section"><a href="bitfield_hpp.html#toward_boost_bitfield.reference.bitfield_hpp.bitfield_bit_proxy">
        Template class <code class="computeroutput"><span class="identifier">bitfield_bit_proxy</span><span class="special">&lt;&gt;</span></code></a></span></dt>
<dt><span class="section"><a href="bitfield_hpp.html#toward_boost_bitfield.reference.bitfield_hpp.bitfield_traits">
        Template class <code class="computeroutput"><span class="identifier">bitfield_traits</span><span class="special">&lt;&gt;</span></code></a></span></dt>
</dl></div>
<p>
        This is the main file of Boost.Bitfield, which includes the definition of
        the bitfield&lt;&gt; class.
      </p>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">bitfield_default_value_type</span><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size</span><span class="special">,</span> <span class="keyword">class</span><span class="special">,</span> <span class="keyword">bool</span><span class="special">,</span> <span class="keyword">class</span><span class="special">&gt;</span> 
<span class="keyword">class</span> <span class="identifier">bitfield</span><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">R</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">V</span><span class="special">&gt;</span> 
<span class="keyword">class</span> <span class="identifier">bitfield_bit_proxy</span><span class="special">;</span>

<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">STORAGE_TYPE</span><span class="special">,</span> <span class="keyword">int</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">int</span> <span class="identifier">L</span>
    <span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">VALUE_TYPE</span><span class="special">=</span><span class="identifier">bitfield_default_value_type</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">STORAGE_TYPE</span><span class="special">::</span><span class="identifier">type</span><span class="special">&gt;</span>
<span class="special">&gt;</span>
<span class="identifier">strcut</span> <span class="identifier">bitfield_traits</span><span class="special">;</span>
</pre>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="toward_boost_bitfield.reference.bitfield_hpp.bitfield_default_value_type"></a><a href="bitfield_hpp.html#toward_boost_bitfield.reference.bitfield_hpp.bitfield_default_value_type" title="
        Metafunction bitfield_default_value_type&lt;&gt;">
        Metafunction <code class="computeroutput"><span class="identifier">bitfield_default_value_type</span><span class="special">&lt;&gt;</span></code></a>
</h4></div></div></div>
<p>
          The default value type associated to an storage type is the storage type.
        </p>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">bitfield_value_type</span> <span class="special">{</span>
    <span class="keyword">typedef</span> <span class="identifier">T</span> <span class="identifier">type</span><span class="special">;</span>
<span class="special">};</span>
</pre>
<p>
          The user could need to specialize this metafunction for some specific types,
          as for example for types comming from the Boost.Endian library.
        </p>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="toward_boost_bitfield.reference.bitfield_hpp.bitfield"></a><a href="bitfield_hpp.html#toward_boost_bitfield.reference.bitfield_hpp.bitfield" title="
        Template class bitfield&lt;&gt;">
        Template class <code class="computeroutput"><span class="identifier">bitfield</span><span class="special">&lt;&gt;</span></code></a>
</h4></div></div></div>
<p>
          The bitfield class is a wrapper to an storage type that allows to get/set
          a bitfield of a given value type defined by the first and last bit that
          the bitfield occupes in the strogae type. It defines the conversion to
          the bitfield value type as weel as all the arithmetic assignement operators.
        </p>
<p>
          This template class behaves as a reference to a bitfield. Note that C/C++
          do not allows to take directly the address of a bit field.
        </p>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">STORAGE_TYPE</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size</span> <span class="identifier">F</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size</span> <span class="identifier">L</span>
    <span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">VALUE_TYPE</span><span class="special">=</span><span class="keyword">typename</span> <span class="identifier">bitfield_value_type</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">STORAGE_TYPE</span><span class="special">::</span><span class="identifier">type</span><span class="special">&gt;</span>
    <span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">REFERENCE_TYPE</span><span class="special">=</span><span class="identifier">STORAGE_TYPE</span><span class="special">&amp;&gt;</span>
<span class="keyword">class</span> <span class="identifier">bitfield</span> <span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
    <span class="comment">//! Reference type of the word occupied by the bitfield
</span>    <span class="keyword">typedef</span> <span class="identifier">REFERENCE_TYPE</span> <span class="identifier">reference_type</span><span class="special">;</span>
    <span class="comment">//! Value type of the bitfield itself 
</span>    <span class="keyword">typedef</span> <span class="identifier">VALUE_TYPE</span> <span class="identifier">value_type</span><span class="special">;</span>
    <span class="comment">//! storage type of the bitfield support
</span>    <span class="keyword">typedef</span> <span class="keyword">typename</span> <span class="identifier">reference_traits</span><span class="special">&lt;</span><span class="identifier">REFERENCE_TYPE</span><span class="special">&gt;::</span><span class="identifier">value_type</span> <span class="identifier">storage_type</span><span class="special">;</span>

    <span class="comment">//! Useful constants
</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="identifier">FIRST</span><span class="special">;</span>        <span class="comment">//!&lt; Position of the first bit
</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="identifier">LAST</span><span class="special">;</span>         <span class="comment">//!&lt; Position of the last bit
</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="identifier">STS</span><span class="special">;</span>
    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="identifier">LASTD</span><span class="special">;</span>
    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="identifier">WIDTH</span><span class="special">;</span>        <span class="comment">//!&lt; Width in bits of the bitfield
</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="identifier">VAL_MASK</span><span class="special">;</span>     <span class="comment">//!&lt; Mask applied against assigned values
</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="identifier">SIGN_MASK</span><span class="special">;</span>    <span class="comment">//!&lt; Sign Mask applied against assigned values
</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="identifier">value_type</span> <span class="identifier">MIN_VAL</span><span class="special">;</span>        <span class="comment">//!&lt; min value that can be represented with the bitfield
</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="identifier">value_type</span> <span class="identifier">MAX_VAL</span><span class="special">;</span>        <span class="comment">//!&lt; max value that can be represented with the bitfield
</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="identifier">FIELD_MASK</span><span class="special">;</span>   <span class="comment">//!&lt; Mask of the field's bit positions
</span>
    <span class="keyword">static</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">first</span><span class="special">();</span>
    <span class="keyword">static</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">last</span><span class="special">();</span>
    <span class="keyword">static</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">width</span><span class="special">();</span>
    <span class="keyword">static</span> <span class="identifier">storage_type</span> <span class="identifier">val_mask</span><span class="special">();</span>
    <span class="keyword">static</span> <span class="identifier">storage_type</span> <span class="identifier">field_mask</span><span class="special">();</span>

    <span class="comment">//! deleted because a reference is nedeed
</span>    <span class="identifier">bitfield</span><span class="special">()</span> <span class="special">=</span> <span class="keyword">delete</span><span class="special">;</span>
    <span class="comment">//! explicit constructor from a reference
</span>    <span class="keyword">explicit</span> <span class="identifier">bitfield</span><span class="special">(</span><span class="identifier">reference_type</span> <span class="identifier">field</span><span class="special">);</span>

    <span class="comment">//! Assignment from a value type
</span>    <span class="identifier">bitfield</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="identifier">value_type</span> <span class="identifier">val</span><span class="special">);</span>

    <span class="comment">//! value_type implicit conversion
</span>    <span class="keyword">operator</span> <span class="identifier">value_type</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>

    <span class="comment">//! value_type explicit getter
</span>    <span class="identifier">value_type</span> <span class="identifier">get</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>

    <span class="comment">//! Returns the negative of the bitfield value.
</span>    <span class="comment">// this must be modified on the case of signed value_type
</span>    <span class="identifier">value_type</span> <span class="keyword">operator</span><span class="special">~()</span> <span class="keyword">const</span><span class="special">;</span>

    <span class="identifier">bit_reference_type</span> <span class="keyword">operator</span><span class="special">[](</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">index</span><span class="special">);</span>

    <span class="identifier">bit_const_reference_type</span> <span class="keyword">operator</span><span class="special">[](</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span> <span class="identifier">index</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span>

    <span class="comment">//! Returns the current bitfield value as bit flags.
</span>    <span class="comment">/*! The returned bit flags can be ORed with other bit flags. */</span>
    <span class="identifier">storage_type</span> <span class="identifier">flags</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>

    <span class="comment">//! Returns the current bitfield value as bit flags.
</span>    <span class="comment">/*! The returned bit flags can be ORed with other bit flags. */</span>
    <span class="keyword">static</span> <span class="identifier">storage_type</span> <span class="identifier">flags</span><span class="special">(</span><span class="identifier">value_type</span> <span class="identifier">val</span><span class="special">)</span> <span class="keyword">const</span><span class="special">;</span>

    <span class="comment">//! Arithmetic-assign operators
</span>    <span class="identifier">bitfield</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">++();</span>
    <span class="identifier">value_type</span> <span class="keyword">operator</span><span class="special">++(</span><span class="keyword">int</span><span class="special">);</span>

    <span class="identifier">bitfield</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">--();</span>
    <span class="identifier">value_type</span> <span class="keyword">operator</span><span class="special">--(</span><span class="keyword">int</span><span class="special">);</span>

    <span class="identifier">bitfield</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">+=(</span><span class="identifier">value_type</span> <span class="identifier">rhs</span><span class="special">);</span>
    <span class="identifier">bitfield</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">-=(</span><span class="identifier">value_type</span> <span class="identifier">rhs</span><span class="special">);</span>

    <span class="identifier">bitfield</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">*=(</span><span class="identifier">value_type</span> <span class="identifier">rhs</span><span class="special">);</span>
    <span class="identifier">bitfield</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">/=(</span><span class="identifier">value_type</span> <span class="identifier">rhs</span><span class="special">);</span>
    <span class="identifier">bitfield</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">%=(</span><span class="identifier">value_type</span> <span class="identifier">rhs</span><span class="special">);</span>

    <span class="identifier">bitfield</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">&lt;&lt;=(</span><span class="keyword">int</span> <span class="identifier">rhs</span><span class="special">);</span>
    <span class="identifier">bitfield</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">&gt;&gt;=(</span><span class="keyword">int</span> <span class="identifier">rhs</span><span class="special">);</span>

    <span class="identifier">bitfield</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">&amp;=(</span><span class="identifier">value_type</span> <span class="identifier">rhs</span><span class="special">);</span>
    <span class="identifier">bitfield</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">|=(</span><span class="identifier">value_type</span> <span class="identifier">rhs</span><span class="special">);</span>
    <span class="identifier">bitfield</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">^=(</span><span class="identifier">value_type</span> <span class="identifier">rhs</span><span class="special">);</span>
<span class="special">};</span>
</pre>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="toward_boost_bitfield.reference.bitfield_hpp.bitfield_bit_proxy"></a><a href="bitfield_hpp.html#toward_boost_bitfield.reference.bitfield_hpp.bitfield_bit_proxy" title="
        Template class bitfield_bit_proxy&lt;&gt;">
        Template class <code class="computeroutput"><span class="identifier">bitfield_bit_proxy</span><span class="special">&lt;&gt;</span></code></a>
</h4></div></div></div>
<p>
          This template class behaves as a reference to a bitfield bit. Note that
          C/C++ do not allows to take directly the address of a bit field. The class
          takes a reference to the storage and the index of the bit.
        </p>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">class</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">R</span><span class="special">,</span> <span class="keyword">class</span> <span class="identifier">V</span><span class="special">&gt;</span>
<span class="keyword">class</span> <span class="identifier">bitfield_bit_proxy</span> <span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>
    <span class="identifier">bitfield_bit_proxy</span><span class="special">&amp;</span> <span class="keyword">operator</span><span class="special">=(</span><span class="keyword">bool</span> <span class="identifier">state</span><span class="special">);</span>

    <span class="keyword">operator</span> <span class="keyword">bool</span><span class="special">()</span> <span class="keyword">const</span><span class="special">;</span>
<span class="special">};</span>
</pre>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="toward_boost_bitfield.reference.bitfield_hpp.bitfield_traits"></a><a href="bitfield_hpp.html#toward_boost_bitfield.reference.bitfield_hpp.bitfield_traits" title="
        Template class bitfield_traits&lt;&gt;">
        Template class <code class="computeroutput"><span class="identifier">bitfield_traits</span><span class="special">&lt;&gt;</span></code></a>
</h4></div></div></div>
<p>
          This traits class defies two traits:
        </p>
<div class="itemizedlist"><ul type="disc">
<li>
            reference: used to modify a bitfield
          </li>
<li>
            value: used to get the value of a bitset
          </li>
</ul></div>
<pre class="programlisting"><span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">STORAGE_TYPE</span><span class="special">,</span> <span class="keyword">int</span> <span class="identifier">F</span><span class="special">,</span> <span class="keyword">int</span> <span class="identifier">L</span>
    <span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">VALUE_TYPE</span><span class="special">=</span><span class="keyword">typename</span> <span class="identifier">bitfield_value_type</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">STORAGE_TYPE</span><span class="special">::</span><span class="identifier">type</span><span class="special">&gt;</span>
<span class="special">&gt;</span>
<span class="keyword">struct</span> <span class="identifier">bitfield_traits</span> <span class="special">{</span>
    <span class="keyword">typedef</span> <span class="identifier">bitfield</span><span class="special">&lt;</span><span class="identifier">STORAGE_TYPE</span><span class="special">,</span> <span class="identifier">F</span><span class="special">,</span> <span class="identifier">L</span><span class="special">,</span> <span class="identifier">VALUE_TYPE</span><span class="special">&gt;</span> <span class="identifier">reference</span><span class="special">;</span>
    <span class="keyword">typedef</span> <span class="identifier">bitfield</span><span class="special">&lt;</span><span class="keyword">const</span> <span class="identifier">STORAGE_TYPE</span><span class="special">,</span> <span class="identifier">F</span><span class="special">,</span> <span class="identifier">L</span><span class="special">,</span> <span class="identifier">VALUE_TYPE</span><span class="special">&gt;</span> <span class="identifier">value</span><span class="special">;</span>
<span class="special">};</span>
</pre>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2009 Vicente J. Botet Escriba<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../reference.html"><img src="../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../reference.html"><img src="../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="bitfield_dcl_hpp.html"><img src="../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
