<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title> Results
        object</title>
<link rel="stylesheet" href="../../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.67.2">
<link rel="start" href="../../../index.html" title="Chapter 1. FileTemplate 0.94">
<link rel="up" href="../reference.html" title=" Reference">
<link rel="prev" href="template.html" title=" Template
        object">
<link rel="next" href="../changes.html" title=" Version History and
      Proposed changes">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../boost.png"></td>
<td align="center"><a href="../../../../../index.htm">Home</a></td>
<td align="center"><a href="../../../libraries.html">Libraries</a></td>
<td align="center"><a href="../../../../../people/people.htm">People</a></td>
<td align="center"><a href="../../../../../more/faq.htm">FAQ</a></td>
<td align="center"><a href="../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="template.html"><img src="../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../reference.html"><img src="../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="../changes.html"><img src="../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="filetemplate.templates.reference.results"></a><a href="results.html" title=" Results
        object"> Results
        object</a></h4></div></div></div>
<p>
          The results object holds information about the files and directories which
          will be generated by the template processor. It includes files and directories
          from <span class="bold"><strong>all</strong></span> templates being processed, and
          can therefore be used to allow seamless integration of templates.
        </p>
<p>
          For example, if a template includes a file whose contents depend on the
          directory tree below a certain directory, you can <code class="literal">walk</code>
          the results object and extract the directory tree. The following example
          does so to include all non-detail include directories for the <a href="../../sandbox.html" title=" Boost sandbox template">sandbox
          template</a>:
        </p>
<pre class="programlisting">
<span class="identifier">doxy_source_files</span> <span class="special">=</span> <span class="identifier">list</span><span class="special">()</span>
<span class="keyword">for</span> <span class="identifier">root</span><span class="special">,</span> <span class="identifier">dirs</span><span class="special">,</span> <span class="identifier">files</span> <span class="keyword">in</span> <span class="identifier">results</span><span class="special">.</span><span class="identifier">walk</span><span class="special">(</span>
    <span class="comment"># we want the returned root to be relative to $template_library$
</span>    <span class="identifier">template</span><span class="special">.</span><span class="identifier">replace_name</span><span class="special">(</span><span class="string">'$template_library$'</span><span class="special">),</span>
    <span class="comment"># and want to walk the boost/$template_library$ directory underneath that
</span>    <span class="identifier">template</span><span class="special">.</span><span class="identifier">replace_name</span><span class="special">(</span><span class="string">'boost/$template_library$'</span><span class="special">)):</span>
    <span class="keyword">if</span> <span class="identifier">os</span><span class="special">.</span><span class="identifier">path</span><span class="special">.</span><span class="identifier">basename</span><span class="special">(</span><span class="identifier">root</span><span class="special">)</span> <span class="special">!=</span> <span class="string">'detail'</span><span class="special">:</span>
        <span class="identifier">doxy_source_files</span><span class="special">.</span><span class="identifier">append</span><span class="special">(</span>
            <span class="identifier">template</span><span class="special">.</span><span class="identifier">replace_name</span><span class="special">(</span><span class="identifier">os</span><span class="special">.</span><span class="identifier">path</span><span class="special">.</span><span class="identifier">join</span><span class="special">(</span><span class="identifier">os</span><span class="special">.</span><span class="identifier">path</span><span class="special">.</span><span class="identifier">join</span><span class="special">(</span><span class="string">'../../..'</span><span class="special">,</span>
            <span class="identifier">root</span><span class="special">),</span> <span class="string">'*.hpp'</span><span class="special">).</span><span class="identifier">replace</span><span class="special">(</span><span class="string">'\\'</span><span class="special">,</span><span class="string">'/'</span><span class="special">)))</span>
</pre>
<p>
          A similar example uses the <code class="literal">files_in</code> and <code class="literal">directories_in</code>
          functions of the result object to construct the list of files and filters
          for a MSVC IDE:
        </p>
<pre class="programlisting">
    <span class="keyword">def</span> <span class="identifier">vc_list_files</span><span class="special">(</span><span class="identifier">level</span><span class="special">,</span> <span class="identifier">output_base</span><span class="special">,</span> <span class="identifier">destination_base</span><span class="special">,</span> <span class="identifier">directory</span><span class="special">):</span>
        <span class="identifier">tabs</span> <span class="special">=</span> <span class="string">''</span><span class="special">.</span><span class="identifier">join</span><span class="special">([</span><span class="string">'\t'</span> <span class="keyword">for</span> <span class="identifier">x</span> <span class="keyword">in</span> <span class="identifier">range</span><span class="special">(</span><span class="identifier">level</span><span class="special">)])</span>
        <span class="identifier">output_base_directory</span> <span class="special">=</span> <span class="identifier">os</span><span class="special">.</span><span class="identifier">path</span><span class="special">.</span><span class="identifier">join</span><span class="special">(</span><span class="identifier">output_base</span><span class="special">,</span> <span class="identifier">directory</span><span class="special">)</span>
        <span class="identifier">destination_base_directory</span> <span class="special">=</span> <span class="identifier">os</span><span class="special">.</span><span class="identifier">path</span><span class="special">.</span><span class="identifier">join</span><span class="special">(</span><span class="identifier">destination_base</span><span class="special">,</span> <span class="identifier">directory</span><span class="special">)</span>
        <span class="keyword">for</span> <span class="identifier">name</span> <span class="keyword">in</span> <span class="identifier">results</span><span class="special">.</span><span class="identifier">files_in</span><span class="special">(</span><span class="identifier">destination_base_directory</span><span class="special">):</span>
            <span class="identifier">template</span><span class="special">.</span><span class="identifier">append_content</span><span class="special">(</span><span class="string">"""
"""</span> <span class="special">+</span> <span class="identifier">tabs</span> <span class="special">+</span> <span class="string">"""&lt;File
"""</span> <span class="special">+</span> <span class="identifier">tabs</span> <span class="special">+</span> <span class="string">'\tRelativePath="'</span><span class="special">+</span><span class="identifier">os</span><span class="special">.</span><span class="identifier">path</span><span class="special">.</span><span class="identifier">join</span><span class="special">(</span><span class="identifier">output_base_directory</span><span class="special">,</span><span class="identifier">name</span><span class="special">)+</span><span class="string">""""
"""</span> <span class="special">+</span> <span class="identifier">tabs</span> <span class="special">+</span> <span class="string">"""\t&gt;
"""</span> <span class="special">+</span> <span class="identifier">tabs</span> <span class="special">+</span> <span class="string">"""&lt;/File&gt;"""</span><span class="special">)</span>

        <span class="keyword">for</span> <span class="identifier">name</span> <span class="keyword">in</span> <span class="identifier">results</span><span class="special">.</span><span class="identifier">directories_in</span><span class="special">(</span><span class="identifier">destination_base_directory</span><span class="special">):</span>
            <span class="identifier">template</span><span class="special">.</span><span class="identifier">append_content</span><span class="special">(</span><span class="string">"""
"""</span> <span class="special">+</span> <span class="identifier">tabs</span> <span class="special">+</span> <span class="string">"""&lt;Filter
"""</span> <span class="special">+</span> <span class="identifier">tabs</span> <span class="special">+</span> <span class="string">'\tName="'</span><span class="special">+</span><span class="identifier">name</span><span class="special">+</span><span class="string">""""
"""</span> <span class="special">+</span> <span class="identifier">tabs</span> <span class="special">+</span> <span class="string">"""\t&gt;"""</span><span class="special">)</span>
            <span class="identifier">vc_list_files</span><span class="special">(</span><span class="identifier">level</span><span class="special">+</span><span class="number">1</span><span class="special">,</span> <span class="identifier">output_base_directory</span><span class="special">,</span> <span class="identifier">destination_base_directory</span><span class="special">,</span> <span class="identifier">name</span><span class="special">)</span>
            <span class="identifier">template</span><span class="special">.</span><span class="identifier">append_content</span><span class="special">(</span><span class="string">"""
"""</span> <span class="special">+</span> <span class="identifier">tabs</span> <span class="special">+</span> <span class="string">"""&lt;/Filter&gt;"""</span><span class="special">)</span>
</pre>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><small>Copyright © 2007 Stjepan Rajko</small></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="template.html"><img src="../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../reference.html"><img src="../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="../changes.html"><img src="../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
