<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Class savepoints_session</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="../../index.html" title="Chapter 1. Boost.Persistent">
<link rel="up" href="../../persistent/reference.html#header.boost.persistent.savepoints_session_hpp" title="Header &lt;boost/persistent/savepoints_session.hpp&gt;">
<link rel="prev" href="object_pinning_tag.html" title="Struct object_pinning_tag">
<link rel="next" href="save_on_shutdown.html" title="Class save_on_shutdown">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../boost.png"></td>
<td align="center"><a href="../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="object_pinning_tag.html"><img src="../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../persistent/reference.html#header.boost.persistent.savepoints_session_hpp"><img src="../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="save_on_shutdown.html"><img src="../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="refentry" lang="en">
<a name="boost.persistent.savepoints_session"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2><span class="refentrytitle">Class savepoints_session</span></h2>
<p>boost::persistent::savepoints_session &#8212; A session using the default transaction manager and simple savepoints instead of transactions. </p>
</div>
<h2 xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv-title">Synopsis</h2>
<div xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv"><pre class="synopsis"><span class="emphasis"><em>// In header: &lt;<a class="link" href="../../persistent/reference.html#header.boost.persistent.savepoints_session_hpp" title="Header &lt;boost/persistent/savepoints_session.hpp&gt;">boost/persistent/savepoints_session.hpp</a>&gt;

</em></span>
<span class="bold"><strong>class</strong></span> <a class="link" href="savepoints_session.html" title="Class savepoints_session">savepoints_session</a> {
<span class="bold"><strong>public</strong></span>:
  <span class="emphasis"><em>// <a class="link" href="savepoints_session.html#boost.persistent.savepoints_sessionconstruct-copy-destruct">construct/copy/destruct</a></em></span>
  <a class="link" href="savepoints_session.html#id2565667-bb">savepoints_session</a>(std::string <span class="bold"><strong>const</strong></span> &amp;, std::size_t = 1000000, 
                     std::size_t = 20 *1024 *1024);

  <span class="emphasis"><em>// <a class="link" href="savepoints_session.html#id2565547-bb">public member functions</a></em></span>
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="savepoints_session.html#id2565551-bb">save</a>() ;
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="savepoints_session.html#id2565612-bb">undo</a>() ;
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="savepoints_session.html#id2565638-bb">bind</a>() ;
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="savepoints_session.html#id2565652-bb">unbind</a>() ;
};</pre></div>
<div class="refsect1" lang="en">
<a name="id2888459"></a><h2>Description</h2>
<div class="refsect2" lang="en">
<a name="id2888462"></a><h3>
<a name="boost.persistent.savepoints_sessionconstruct-copy-destruct"></a><code class="computeroutput">savepoints_session</code> 
        public
       construct/copy/destruct</h3>
<div class="orderedlist"><ol type="1"><li>
<pre class="literallayout"><a name="id2565667-bb"></a>savepoints_session(std::string <span class="bold"><strong>const</strong></span> &amp; name, 
                   std::size_t max_cache_size = 1000000, 
                   std::size_t max_log_size = 20 *1024 *1024);</pre>Constructs a <code class="computeroutput">savepoint_session</code>. <p>Throws: <code class="computeroutput">thread_resource_error</code>, <code class="computeroutput">io_failure</code>, <code class="computeroutput">recovery_failure</code> 
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><code class="computeroutput">max_cache_size</code></span></p></td>
<td><p>The maximum number of objects that are internally cached. Note that this is independent of the size of each individual object, if large objects are used max_cache_size should be set accordingly. </p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">max_log_size</code></span></p></td>
<td><p>Maximum size of the log, in bytes. When max_log_size is reached a new log is started and the old one is removed as soon as possible. Note that this is dependent on transactions that are still running, so the actual disk space used for log files may exceed max_log_size. </p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">name</code></span></p></td>
<td><p>A name that, extended by various file extensions, is used as filename to store the database. </p></td>
</tr>
</tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li></ol></div>
</div>
<div class="refsect2" lang="en">
<a name="id2888586"></a><h3>
<a name="id2565547-bb"></a><code class="computeroutput">savepoints_session</code> public member functions</h3>
<div class="orderedlist"><ol type="1">
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2565551-bb"></a>save() ;</pre>Saves all changes made since the last savepoint. <p>Throws: <code class="computeroutput">thread_resource_error</code>, <code class="computeroutput">io_failure</code>, <code class="computeroutput">archive_exception</code>, <code class="computeroutput">finalize_error</code> <code class="computeroutput">isolation_exception</code>, any exception thrown by the following user-supplied functions: <code class="computeroutput">T::T()</code>, <code class="computeroutput">serialize()</code>, <code class="computeroutput">load()</code>, <code class="computeroutput">save()</code>, <code class="computeroutput">construct()</code>, <code class="computeroutput">equal()</code>, <code class="computeroutput">finalize()</code> </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2565612-bb"></a>undo() ;</pre>Unwinds all changes made since the last savepoint. <p>Throws: <code class="computeroutput">thread_resource_error</code>, <code class="computeroutput">io_failure</code>, <code class="computeroutput">finalize_error</code> </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2565638-bb"></a>bind() ;</pre>Binds this session. <p>Throws: Nothing </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2565652-bb"></a>unbind() ;</pre>If this session is the active session, unbinds it. <p>Throws: Nothing </p>
</li>
</ol></div>
</div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2009 Stefan Strasser<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="object_pinning_tag.html"><img src="../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../persistent/reference.html#header.boost.persistent.savepoints_session_hpp"><img src="../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="save_on_shutdown.html"><img src="../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
