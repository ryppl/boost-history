<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Struct StorageEngine</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="../../index.html" title="Chapter 1. Boost.Persistent">
<link rel="up" href="../../persistent/reference.html#header.boost.persistent.concept.StorageEngine_hpp" title="Header &lt;boost/persistent/concept/StorageEngine.hpp&gt;">
<link rel="prev" href="SharedObjectStorageService.html" title="Struct SharedObjectStorageService">
<link rel="next" href="StorageEngine/save_instance_commit_data.html" title="Struct save_instance_commit_data">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../boost.png"></td>
<td align="center"><a href="../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="SharedObjectStorageService.html"><img src="../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../persistent/reference.html#header.boost.persistent.concept.StorageEngine_hpp"><img src="../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="StorageEngine/save_instance_commit_data.html"><img src="../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="refentry" lang="en">
<a name="boost.persistent.StorageEngine"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2><span class="refentrytitle">Struct StorageEngine</span></h2>
<p>boost::persistent::StorageEngine</p>
</div>
<h2 xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv-title">Synopsis</h2>
<div xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv"><pre class="synopsis"><span class="emphasis"><em>// In header: &lt;<a class="link" href="../../persistent/reference.html#header.boost.persistent.concept.StorageEngine_hpp" title="Header &lt;boost/persistent/concept/StorageEngine.hpp&gt;">boost/persistent/concept/StorageEngine.hpp</a>&gt;

</em></span>
<span class="bold"><strong>struct</strong></span> <a class="link" href="StorageEngine.html" title="Struct StorageEngine">StorageEngine</a> {
  <span class="emphasis"><em>// types</em></span>
  <span class="bold"><strong>typedef</strong></span> <span class="emphasis"><em>unspecified</em></span> <a name="boost.persistent.StorageEngine.object_id"></a>object_id;       <span class="emphasis"><em>// Must be POD. </em></span>
  <span class="bold"><strong>typedef</strong></span> <span class="emphasis"><em>unspecified</em></span> <a name="boost.persistent.StorageEngine.instance_id"></a>instance_id;     <span class="emphasis"><em>// Must be POD. </em></span>
  <span class="bold"><strong>typedef</strong></span> <span class="emphasis"><em>unspecified</em></span> <a name="boost.persistent.StorageEngine.transaction_id"></a>transaction_id;  <span class="emphasis"><em>// Must be POD. </em></span>
  <span class="bold"><strong>typedef</strong></span> <span class="emphasis"><em>unspecified</em></span> <a name="boost.persistent.StorageEngine.object_count"></a>object_count;    <span class="emphasis"><em>// Must be an integral type. </em></span>

  <span class="emphasis"><em>// member classes/structs/unions</em></span>

  <span class="bold"><strong>struct</strong></span> <a class="link" href="StorageEngine/save_instance_commit_data.html" title="Struct save_instance_commit_data">save_instance_commit_data</a> {

    <span class="emphasis"><em>// <a class="link" href="StorageEngine/save_instance_commit_data.html#id2535706-bb">public member functions</a></em></span>
    <span class="type">std::size_t</span> <a class="link" href="StorageEngine/save_instance_commit_data.html#id2535710-bb">size</a>() <span class="bold"><strong>const</strong></span>;
  };

  <span class="emphasis"><em>// <a class="link" href="StorageEngine.html#id2535759-bb">public member functions</a></em></span>
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> T, <span class="bold"><strong>typename</strong></span> ResourceTag&gt; 
    <span class="type">T *</span> <a class="link" href="StorageEngine.html#id2535763-bb">load_instance</a>(object_id, instance_id) ;
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> T, <span class="bold"><strong>typename</strong></span> ResourceTag&gt; 
    <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="StorageEngine.html#id2535837-bb">save_instance_prepare</a>(object_id, T <span class="bold"><strong>const</strong></span> &amp;, 
                               save_instance_commit_data &amp;) ;
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Archive&gt; 
    <span class="type">instance_id</span> <a class="link" href="StorageEngine.html#id2535924-bb">allocate_instance</a>(Archive &amp;, std::size_t) ;
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="StorageEngine.html#id2535994-bb">save_instance_commit</a>(instance_id, save_instance_commit_data <span class="bold"><strong>const</strong></span> &amp;) ;
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Archive&gt; <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="StorageEngine.html#id2536045-bb">free_instance</a>(Archive &amp;, instance_id) ;
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="StorageEngine.html#id2536109-bb">load_object</a>(object_id, transaction_id &amp;, instance_id &amp;, object_count &amp;, 
                   object_count &amp;) ;
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="StorageEngine.html#id2536188-bb">save_object_state</a>(object_id, transaction_id, instance_id) ;
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="StorageEngine.html#id2536240-bb">save_object_count</a>(object_id, object_count, object_count) ;
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Archive&gt; <span class="type">object_id</span> <a class="link" href="StorageEngine.html#id2536298-bb">allocate_object</a>(Archive &amp;) ;
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Archive&gt; <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="StorageEngine.html#id2536356-bb">free_object</a>(Archive &amp;, object_id) ;
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Archive&gt; 
    <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="StorageEngine.html#id2536420-bb">save_commit_data</a>(Archive &amp;, save_instance_commit_data <span class="bold"><strong>const</strong></span> &amp;) <span class="bold"><strong>const</strong></span>;
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Archive&gt; 
    <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="StorageEngine.html#id2536482-bb">recover_commit_data</a>(Archive &amp;, save_instance_commit_data &amp;) <span class="bold"><strong>const</strong></span>;
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Archive&gt; <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="StorageEngine.html#id2536547-bb">save_state</a>(Archive &amp;) ;
  <span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Archive&gt; <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="StorageEngine.html#id2536592-bb">recover_state</a>(Archive &amp;) ;
  <span class="type">object_id</span> <a class="link" href="StorageEngine.html#id2536638-bb">root_object_id</a>() ;
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="StorageEngine.html#id2536662-bb">flush</a>() ;
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="StorageEngine.html#id2536684-bb">sync</a>() ;
};</pre></div>
<div class="refsect1" lang="en">
<a name="id2819901"></a><h2>Description</h2>
<div class="refsect2" lang="en">
<a name="id2819905"></a><h3>
<a name="id2535759-bb"></a><code class="computeroutput">StorageEngine</code> public member functions</h3>
<div class="orderedlist"><ol type="1">
<li>
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> T, <span class="bold"><strong>typename</strong></span> ResourceTag&gt; 
  <span class="type">T *</span> <a name="id2535763-bb"></a>load_instance(object_id oid, instance_id iid) ;</pre>Loads an instance from the storage device. <p>Template parameters: </p>
<div class="itemizedlist"><ul type="disc">
<li><p><code class="computeroutput">T</code> The type or a base class of the instance </p></li>
<li><p><code class="computeroutput">ResourceTag</code> The tag of the resource this instance is saved in</p></li>
</ul></div>
<p>
Throws: <code class="computeroutput">io_failure</code>, <code class="computeroutput">thread_resource_error</code>, any exception thrown by user-supplied functions loading persistent types 
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><code class="computeroutput">iid</code></span></p></td>
<td><p>The instance id </p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">oid</code></span></p></td>
<td><p>The id of the object this instance belongs to </p></td>
</tr>
</tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li>
<li>
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> T, <span class="bold"><strong>typename</strong></span> ResourceTag&gt; 
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2535837-bb"></a>save_instance_prepare(object_id oid, T <span class="bold"><strong>const</strong></span> &amp; inst, 
                             save_instance_commit_data &amp; data) ;</pre>Makes preparations to save an instance and stores the result in <code class="computeroutput">data</code>. <p>Template parameters: </p>
<div class="itemizedlist"><ul type="disc">
<li><p><code class="computeroutput">T</code> The type or a base class of the instance </p></li>
<li><p><code class="computeroutput">ResourceTag</code> The tag of the resource this instance is saved in</p></li>
</ul></div>
<p>
Throws: <code class="computeroutput">io_failure</code>, <code class="computeroutput">thread_resource_error</code>, Any exception thrown by user-supplied functions saving persistent types 
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><code class="computeroutput">data</code></span></p></td>
<td><p>A default-constructed save_instance_commit_data </p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">inst</code></span></p></td>
<td><p>The instance </p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">oid</code></span></p></td>
<td><p>The id of the object </p></td>
</tr>
</tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li>
<li>
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Archive&gt; 
  <span class="type">instance_id</span> <a name="id2535924-bb"></a>allocate_instance(Archive &amp; ar, std::size_t size) ;</pre>Allocates a instance id to store an instance of the specified size. <p>Template parameters: </p>
<div class="itemizedlist"><ul type="disc"><li><p><code class="computeroutput">Archive</code> A serialization archive that can only serialize primitives</p></li></ul></div>
<p>
Throws: <code class="computeroutput">io_failure</code>, <code class="computeroutput">thread_resource_error</code> 

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><code class="computeroutput">ar</code></span></p></td>
<td><p>An output archive in case this is the first attemt to allocate the instance. An input archive in case the application was aborted and the allocation ought to be repeated. Can be used to store information about allocations if they are internally not repeatable. </p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">size</code></span></p></td>
<td><p>The size of the instance, typically save_instance_commit_data::size() </p></td>
</tr>
</tbody>
</table></div></td>
</tr>
<tr>
<td><p><span class="term">Returns:</span></p></td>
<td><p>The id of the allocated instance </p></td>
</tr>
</tbody>
</table></div>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2535994-bb"></a>save_instance_commit(instance_id iid, 
                          save_instance_commit_data <span class="bold"><strong>const</strong></span> &amp; data) ;</pre>Saves an instance prepared for saving by <code class="computeroutput">save_instance_prepare</code>. <p>Throws: <code class="computeroutput">io_failure</code>, <code class="computeroutput">thread_resource_error</code> 
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><code class="computeroutput">data</code></span></p></td>
<td><p>An save_instance_commit_data filled by <code class="computeroutput">save_instance_prepare</code> </p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">iid</code></span></p></td>
<td><p>The instance id the instance should be stored at. Must be large enough to hold the instance. </p></td>
</tr>
</tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li>
<li>
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Archive&gt; <span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2536045-bb"></a>free_instance(Archive &amp; ar, instance_id iid) ;</pre>Deallocates a previously allocated instance. <p>Template parameters: </p>
<div class="itemizedlist"><ul type="disc"><li><p><code class="computeroutput">Archive</code> A serialization archive that can only serialize primitives</p></li></ul></div>
<p>
Throws: <code class="computeroutput">io_failure</code>, <code class="computeroutput">thread_resource_error</code> 
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><code class="computeroutput">ar</code></span></p></td>
<td><p>An output archive in case this is the first attemt to deallocate the instance. An input archive in case the application was aborted and the deallocation ought to be repeated. Can be used to store information about allocations if they are internally not repeatable. </p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">iid</code></span></p></td>
<td><p>The instance id </p></td>
</tr>
</tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2536109-bb"></a>load_object(object_id oid, transaction_id &amp; tid, instance_id &amp; iid, 
                 object_count &amp; strong, object_count &amp; weak) ;</pre>Loads an object. <p>Throws: <code class="computeroutput">io_failure</code>, <code class="computeroutput">thread_resource_error</code> 
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><code class="computeroutput">iid</code></span></p></td>
<td><p>A reference that is used to store the loaded instance id </p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">oid</code></span></p></td>
<td><p>The id of the object </p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">strong</code></span></p></td>
<td><p>A reference that is used to store the <code class="computeroutput">strong</code> reference count </p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">tid</code></span></p></td>
<td><p>A reference that is used to store the loaded transaction id </p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">weak</code></span></p></td>
<td><p>A reference that is used to store the <code class="computeroutput">weak</code> reference count </p></td>
</tr>
</tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2536188-bb"></a>save_object_state(object_id oid, transaction_id tid, instance_id iid) ;</pre>Saves the state of an object. <p>Throws: <code class="computeroutput">io_failure</code>, <code class="computeroutput">thread_resource_error</code> 
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><code class="computeroutput">iid</code></span></p></td>
<td><p>The new instance id of the object </p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">oid</code></span></p></td>
<td><p>The id of the object </p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">tid</code></span></p></td>
<td><p>The new transaction id of the object </p></td>
</tr>
</tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2536240-bb"></a>save_object_count(object_id oid, object_count strong, object_count weak) ;</pre>Saves the reference counts of an object. <p>Throws: <code class="computeroutput">io_failure</code>, <code class="computeroutput">thread_resource_error</code> 
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><code class="computeroutput">oid</code></span></p></td>
<td><p>The id of the object </p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">strong</code></span></p></td>
<td><p>The new <code class="computeroutput">strong</code> reference count of the object </p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">weak</code></span></p></td>
<td><p>The new <code class="computeroutput">weak</code> reference count of the object </p></td>
</tr>
</tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li>
<li>
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Archive&gt; <span class="type">object_id</span> <a name="id2536298-bb"></a>allocate_object(Archive &amp; ar) ;</pre>Allocates a new object. <p>Template parameters: </p>
<div class="itemizedlist"><ul type="disc"><li><p><code class="computeroutput">Archive</code> A serialization archive that can only serialize primitives</p></li></ul></div>
<p>
Throws: <code class="computeroutput">io_failure</code>, <code class="computeroutput">thread_resource_error</code> 

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><code class="computeroutput">ar</code></span></p></td>
<td><p>An output archive in case this is the first attemt to allocate the object. An input archive in case the application was aborted and the allocation ought to be repeated. Can be used to store information about allocations if they are internally not repeatable. </p></td>
</tr></tbody>
</table></div></td>
</tr>
<tr>
<td><p><span class="term">Returns:</span></p></td>
<td><p>The new object id </p></td>
</tr>
</tbody>
</table></div>
</li>
<li>
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Archive&gt; <span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2536356-bb"></a>free_object(Archive &amp; ar, object_id oid) ;</pre>Deallocates a previously allocated object. <p>Template parameters: </p>
<div class="itemizedlist"><ul type="disc"><li><p><code class="computeroutput">Archive</code> A serialization archive that can only serialize primitives</p></li></ul></div>
<p>
Throws: <code class="computeroutput">io_failure</code>, <code class="computeroutput">thread_resource_error</code> 
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><code class="computeroutput">ar</code></span></p></td>
<td><p>An output archive in case this is the first attemt to deallocate the object. An input archive in case the application was aborted and the deallocation ought to be repeated. Can be used to store information about allocations if they are internally not repeatable. </p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">oid</code></span></p></td>
<td><p>The object id </p></td>
</tr>
</tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li>
<li>
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Archive&gt; 
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2536420-bb"></a>save_commit_data(Archive &amp; ar, save_instance_commit_data <span class="bold"><strong>const</strong></span> &amp; data) <span class="bold"><strong>const</strong></span>;</pre>Stores the passed <code class="computeroutput">save_instance_commit_data</code> in a serialization archive. <p>Template parameters: </p>
<div class="itemizedlist"><ul type="disc"><li><p><code class="computeroutput">Archive</code> A serialization output archive that can only serialize primitives</p></li></ul></div>
<p>
Throws: <code class="computeroutput">io_failure</code>, <code class="computeroutput">thread_resource_error</code> 
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><code class="computeroutput">ar</code></span></p></td>
<td><p></p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">data</code></span></p></td>
<td><p></p></td>
</tr>
</tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li>
<li>
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Archive&gt; 
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2536482-bb"></a>recover_commit_data(Archive &amp; ar, save_instance_commit_data &amp; data) <span class="bold"><strong>const</strong></span>;</pre>Recovers a save_instance_commit_data from <code class="computeroutput">ar</code> and stores it in <code class="computeroutput">data</code>. <p>Template parameters: </p>
<div class="itemizedlist"><ul type="disc"><li><p><code class="computeroutput">Archive</code> A serialization input archive that can only serialize primitives</p></li></ul></div>
<p>
Throws: <code class="computeroutput">io_failure</code>, <code class="computeroutput">thread_resource_error</code> 
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><code class="computeroutput">ar</code></span></p></td>
<td><p></p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">data</code></span></p></td>
<td><p></p></td>
</tr>
</tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li>
<li>
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Archive&gt; <span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2536547-bb"></a>save_state(Archive &amp; ar) ;</pre>Saves the internal state of the storage engine. <p>Template parameters: </p>
<div class="itemizedlist"><ul type="disc"><li><p><code class="computeroutput">Archive</code> A serialization output archive that can only serialize primitives</p></li></ul></div>
<p>
Throws: <code class="computeroutput">io_failure</code> 
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><code class="computeroutput">ar</code></span></p></td>
<td><p></p></td>
</tr></tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li>
<li>
<pre class="literallayout"><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> Archive&gt; <span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2536592-bb"></a>recover_state(Archive &amp; ar) ;</pre>Recovers the previously saved internal state of the storage engine. <p>Template parameters: </p>
<div class="itemizedlist"><ul type="disc"><li><p><code class="computeroutput">Archive</code> A serialization input archive that can only serialize primitives</p></li></ul></div>
<p>
Throws: <code class="computeroutput">io_failure</code> 
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><code class="computeroutput">ar</code></span></p></td>
<td><p></p></td>
</tr></tbody>
</table></div></td>
</tr></tbody>
</table></div>
</li>
<li>
<pre class="literallayout"><span class="type">object_id</span> <a name="id2536638-bb"></a>root_object_id() ;</pre>
<p>Throws: <code class="computeroutput">io_failure</code>, <code class="computeroutput">thread_resource_error</code> 
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term">Returns:</span></p></td>
<td><p>The object id of the first object created, if any </p></td>
</tr></tbody>
</table></div>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2536662-bb"></a>flush() ;</pre>Flushes internal buffers, passing all saved data to the operating system. <p>Throws: <code class="computeroutput">io_failure</code>, <code class="computeroutput">thread_resource_error</code> </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2536684-bb"></a>sync() ;</pre>Synchronizes all flushed data with the physical storage device. <p>Does not flush internal buffers.</p>
<p>Throws: <code class="computeroutput">io_failure</code>, <code class="computeroutput">thread_resource_error</code> </p>
</li>
</ol></div>
</div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2009 Stefan Strasser<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="SharedObjectStorageService.html"><img src="../../../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../persistent/reference.html#header.boost.persistent.concept.StorageEngine_hpp"><img src="../../../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="StorageEngine/save_instance_commit_data.html"><img src="../../../../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
