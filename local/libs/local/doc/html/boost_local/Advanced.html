<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Advanced</title>
<link rel="stylesheet" href="../../../../../doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="../index.html" title="Boost.Local 0.1.1">
<link rel="up" href="../index.html" title="Boost.Local 0.1.1">
<link rel="prev" href="Tutorial.html" title="Tutorial">
<link rel="next" href="../reference.html" title="Reference">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../boost.png"></td>
<td align="center"><a href="../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="Tutorial.html"><img src="../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="../reference.html"><img src="../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="boost_local.Advanced"></a><a class="link" href="Advanced.html" title="Advanced">Advanced</a>
</h2></div></div></div>
<div class="toc"><dl>
<dt><span class="section"><a href="Advanced.html#boost_local.Advanced.commas_in_macro_parameters">Commas
      in Macro Parameters</a></span></dt>
<dt><span class="section"><a href="Advanced.html#boost_local.Advanced.recursive_local_functions">Recursive
      Local Functions</a></span></dt>
<dt><span class="section"><a href="Advanced.html#boost_local.Advanced.exception_specifications">Exception
      Specifications</a></span></dt>
<dt><span class="section"><a href="Advanced.html#boost_local.Advanced.optimizers___inline____auto___and__register_">Optimizers:
      <code class="computeroutput"><span class="keyword">inline</span></code>, <code class="computeroutput"><span class="keyword">auto</span></code>,
      and <code class="computeroutput"><span class="keyword">register</span></code></a></span></dt>
<dt><span class="section"><a href="Advanced.html#boost_local.Advanced.references_to_local_functions">References
      to Local Functions</a></span></dt>
<dt><span class="section"><a href="Advanced.html#boost_local.Advanced.renaming_local_functions">Renaming
      Local Functions</a></span></dt>
<dt><span class="section"><a href="Advanced.html#boost_local.Advanced.limitations__overloading__nesting__operators__etc">Limitations:
      Overloading, Nesting, Operators, Etc</a></span></dt>
</dl></div>
<p>
      This section illustrates advanced usages of this library. At the end of this
      section there is also a list of limitations of this library.
    </p>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_local.Advanced.commas_in_macro_parameters"></a><a class="link" href="Advanced.html#boost_local.Advanced.commas_in_macro_parameters" title="Commas in Macro Parameters">Commas
      in Macro Parameters</a>
</h3></div></div></div>
<p>
        The C++ preprocessor does not allow commas "<code class="computeroutput"><span class="special">,</span></code>"
        within macro parameters unless they are wrapped by the round parenthesis
        <code class="computeroutput"><span class="special">()</span></code>. The elements of the parenthesized
        signature are internally used as macro parameters while they are being processed
        by the parsing macros. Therefore, commas within parenthesized signature elements
        will generate (cryptic) preprocessor errors unless they are wrapped within
        extra round parenthesis <code class="computeroutput"><span class="special">()</span></code> as
        explained here.
      </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
          <span class="bold"><strong>Macro parameters with commas</strong></span> which are
          already wrapped by round parenthesis <code class="computeroutput"><span class="special">()</span></code>
          are fine (function calls, etc). However, macro parameters with commas that
          are not wrapped by round parenthesis need to be wrapped by an extra set
          of round parenthesis <code class="computeroutput"><span class="special">()</span></code> as
          described here. Therefore, also macro parameters with commas wrapped by
          angular parenthesis <code class="computeroutput"><span class="special">&lt;&gt;</span></code>
          (templates, etc) or square parenthesis <code class="computeroutput"><span class="special">[]</span></code>
          (multidimensional array access, etc) need to be wrapped by the extra round
          parenthesis <code class="computeroutput"><span class="special">()</span></code> as explained
          here (this is because the preprocessor only recognizes the round parenthesis
          and it does not recognize angular, square, or any other type of parenthesis).
        </p></td></tr>
</table></div>
<p>
        For example, let's consider the following parenthesized signature (see the
        complete example code later in this section):
      </p>
<pre class="programlisting"><span class="special">(</span><span class="keyword">void</span><span class="special">)</span> <span class="special">(</span><span class="identifier">print</span><span class="special">)(</span>
        <span class="special">(</span><span class="keyword">const</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="identifier">size_t</span><span class="special">&gt;&amp;)(</span><span class="identifier">m</span><span class="special">)</span>               <span class="comment">// (1) Error.
</span>        <span class="special">(</span><span class="keyword">const</span> <span class="identifier">size_t</span><span class="special">&amp;)(</span><span class="identifier">factor</span><span class="special">)(</span><span class="keyword">default</span><span class="special">)</span>
                <span class="special">(</span><span class="identifier">key_size</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">value</span><span class="special">)</span>          <span class="comment">// (2) Error.
</span>        <span class="special">(</span><span class="keyword">const</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&amp;)(</span><span class="identifier">separator</span><span class="special">)(</span><span class="keyword">default</span><span class="special">)(</span><span class="identifier">cat</span><span class="special">(</span><span class="string">":"</span><span class="special">,</span> <span class="string">" "</span><span class="special">))</span> <span class="comment">// (3) OK.
</span>        <span class="special">(::</span><span class="identifier">sign_t</span><span class="special">)(</span><span class="identifier">sign</span><span class="special">)(</span><span class="keyword">default</span><span class="special">)(-</span><span class="number">1</span><span class="special">)</span>                           <span class="comment">// (4) Error.
</span>    <span class="special">)</span>
</pre>
<p>
        <span class="bold"><strong>(1)</strong></span> The parenthesized signature element
        <code class="computeroutput"><span class="keyword">const</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="identifier">size_t</span><span class="special">&gt;&amp;</span></code> contains a comma "<code class="computeroutput"><span class="special">,</span></code>" after the first template parameter
        <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span></code>. This comma is not wrapped by any
        round parenthesis <code class="computeroutput"><span class="special">()</span></code> (the outer
        parenthesis <code class="computeroutput"><span class="special">()</span></code> that make this
        a parenthesized signature element do not count) thus it will cause a preprocessor
        error. The macro <code class="computeroutput"><a class="link" href="../BOOST_IDENTITY_TYPE.html" title="Macro BOOST_IDENTITY_TYPE">BOOST_IDENTITY_TYPE</a><span class="special">(</span></code><span class="emphasis"><em>parenthesized-type</em></span><code class="computeroutput"><span class="special">)</span></code> can be used to wrap a type within extra
        parenthesis <code class="computeroutput"><span class="special">()</span></code> so to overcome
        this issue:
      </p>
<pre class="programlisting"><span class="special">(</span><span class="keyword">void</span><span class="special">)</span> <span class="special">(</span><span class="identifier">print</span><span class="special">)(</span>
        <span class="bold"><strong>(</strong></span><code class="computeroutput"><a class="link" href="../BOOST_IDENTITY_TYPE.html" title="Macro BOOST_IDENTITY_TYPE">BOOST_IDENTITY_TYPE</a></code><span class="bold"><strong>((</strong></span><span class="keyword">const</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="identifier">size_t</span><span class="special">&gt;&amp;</span><span class="bold"><strong>)))</strong></span><span class="special">(</span><span class="identifier">m</span><span class="special">)</span> <span class="comment">// OK.
</span>        <span class="special">...</span>
    <span class="special">)</span>
</pre>
<p>
        This macro expands to an expression that evaluates (at compile-time) exactly
        to the specified type. Note that a total of three set of parenthesis <code class="computeroutput"><span class="special">()</span></code> are needed:
      </p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
            Parenthesis to wrap the parenthesized signature element.
          </li>
<li class="listitem">
            Parenthesis to call the <code class="computeroutput"><a class="link" href="../BOOST_IDENTITY_TYPE.html" title="Macro BOOST_IDENTITY_TYPE">BOOST_IDENTITY_TYPE</a></code>
            macro.
          </li>
<li class="listitem">
            Parenthesis to wrap the type expression (and therefore any commas "<code class="computeroutput"><span class="special">,</span></code>" that it contains) passed as parameter
            to the <code class="computeroutput"><a class="link" href="../BOOST_IDENTITY_TYPE.html" title="Macro BOOST_IDENTITY_TYPE">BOOST_IDENTITY_TYPE</a></code>
            macro.
          </li>
</ol></div>
<p>
        <span class="bold"><strong>(2)</strong></span> The parenthesized signature element
        <code class="computeroutput"><span class="identifier">key_size</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">value</span></code>
        contains a comma "<code class="computeroutput"><span class="special">,</span></code>"
        after the first template parameter <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span></code>.
        Again, this comma is not wrapped by any parenthesis <code class="computeroutput"><span class="special">()</span></code>
        so it will cause a preprocessor error. Because this is a value expression
        (and not a type expression), the macro <code class="computeroutput"><a class="link" href="../BOOST_IDENTITY_VALUE.html" title="Macro BOOST_IDENTITY_VALUE">BOOST_IDENTITY_VALUE</a><span class="special">(</span></code><span class="emphasis"><em>parenthesized-value</em></span><code class="computeroutput"><span class="special">)</span></code> is used to overcome this issue:
      </p>
<pre class="programlisting"><span class="special">(</span><span class="keyword">void</span><span class="special">)</span> <span class="special">(</span><span class="identifier">print</span><span class="special">)(</span>
        <span class="special">...</span>
        <span class="special">(</span><span class="keyword">const</span> <span class="identifier">size_t</span><span class="special">&amp;)(</span><span class="identifier">factor</span><span class="special">)(</span><span class="keyword">default</span><span class="special">)</span>
                <span class="bold"><strong>(</strong></span><code class="computeroutput"><a class="link" href="../BOOST_IDENTITY_VALUE.html" title="Macro BOOST_IDENTITY_VALUE">BOOST_IDENTITY_VALUE</a></code><span class="bold"><strong>((</strong></span><span class="identifier">key_size</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">value</span><span class="bold"><strong>)))</strong></span> <span class="comment">// OK.
</span>        <span class="special">...</span>
    <span class="special">)</span>
</pre>
<p>
        This macro expands to an expression that evaluates (at run-time) exactly
        to the specified value. Note again that a total of three set of parenthesis
        <code class="computeroutput"><span class="special">()</span></code> are needed similarly to
        <code class="computeroutput"><a class="link" href="../BOOST_IDENTITY_TYPE.html" title="Macro BOOST_IDENTITY_TYPE">BOOST_IDENTITY_TYPE</a></code>.
      </p>
<p>
        <span class="bold"><strong>(3)</strong></span> The parenthesized signature element
        <code class="computeroutput"><span class="identifier">cat</span><span class="special">(</span><span class="char">':'</span><span class="special">,</span> <span class="char">'
        '</span><span class="special">)</span></code> is instead fine because
        it contains a comma "<code class="computeroutput"><span class="special">,</span></code>"
        which is already wrapped by the parenthesis <code class="computeroutput"><span class="special">()</span></code>
        of the function call <code class="computeroutput"><span class="identifier">cat</span><span class="special">(...)</span></code>.
      </p>
<p>
        <span class="bold"><strong>(4)</strong></span> The parenthesized signature elements
        <code class="computeroutput"><span class="special">::</span><span class="identifier">sign_t</span></code>
        and <code class="computeroutput"><span class="special">-</span><span class="number">1</span></code>
        (the type and default value of the <code class="computeroutput"><span class="identifier">sign</span></code>
        parameter) start with the non-alphanumeric symbols "<code class="computeroutput"><span class="special">::</span></code>"
        and "<code class="computeroutput"><span class="special">-</span></code>" respectively
        thus they cannot be used by the parenthesized syntax. The macros <code class="computeroutput"><a class="link" href="../BOOST_IDENTITY_TYPE.html" title="Macro BOOST_IDENTITY_TYPE">BOOST_IDENTITY_TYPE</a></code> and <code class="computeroutput"><a class="link" href="../BOOST_IDENTITY_VALUE.html" title="Macro BOOST_IDENTITY_VALUE">BOOST_IDENTITY_VALUE</a></code> can also
        be used to overcome these issues:
      </p>
<pre class="programlisting"><span class="special">(</span><span class="keyword">void</span><span class="special">)</span> <span class="special">(</span><span class="identifier">print</span><span class="special">)(</span>
        <span class="special">...</span>
        <span class="special">(</span><code class="computeroutput"><a class="link" href="../BOOST_IDENTITY_TYPE.html" title="Macro BOOST_IDENTITY_TYPE">BOOST_IDENTITY_TYPE</a></code><span class="special">((::</span><span class="identifier">sign_t</span><span class="special">)))(</span><span class="identifier">sign</span><span class="special">)(</span><span class="keyword">default</span><span class="special">)</span>
                <span class="special">(</span><code class="computeroutput"><a class="link" href="../BOOST_IDENTITY_VALUE.html" title="Macro BOOST_IDENTITY_VALUE">BOOST_IDENTITY_VALUE</a></code><span class="special">((-</span><span class="number">1</span><span class="special">)))</span> <span class="comment">// OK.
</span>    <span class="special">)</span>
</pre>
<p>
        This way the parenthesized signature elements became <code class="computeroutput"><span class="special">(</span><a class="link" href="../BOOST_IDENTITY_TYPE.html" title="Macro BOOST_IDENTITY_TYPE">BOOST_IDENTITY_TYPE</a><span class="special">((::</span><span class="identifier">sign_t</span><span class="special">)))</span></code>
        and <code class="computeroutput"><span class="special">(</span><a class="link" href="../BOOST_IDENTITY_VALUE.html" title="Macro BOOST_IDENTITY_VALUE">BOOST_IDENTITY_VALUE</a><span class="special">((-</span><span class="number">1</span><span class="special">)))</span></code>
        which start with the alphanumeric symbols of the macro names and they can
        be used by the parenthesized syntax.
      </p>
<p>
        Often, there might be better ways to overcome this limitation that lead to
        code which is more readable than the one using these macros. For example,
        in this case the symbol "<code class="computeroutput"><span class="special">::</span></code>"
        could be dropped and <code class="computeroutput"><span class="special">-</span><span class="number">1</span></code>
        could be wrapped within <code class="computeroutput"><span class="keyword">int</span><span class="special">(...)</span></code> to obtain the following, more readable,
        and still valid parenthesized signature code:
      </p>
<pre class="programlisting"><span class="special">(</span><span class="keyword">void</span><span class="special">)</span> <span class="special">(</span><span class="identifier">print</span><span class="special">)(</span>
        <span class="special">...</span>
        <span class="special">(</span><span class="identifier">sign_t</span><span class="special">)(</span><span class="identifier">sign</span><span class="special">)(</span><span class="keyword">default</span><span class="special">)(</span><span class="keyword">int</span><span class="special">(-</span><span class="number">1</span><span class="special">))</span> <span class="comment">// OK.
</span>    <span class="special">)</span>
</pre>
<p>
        Consider the following complete example: <sup>[<a name="id876264" href="#ftn.id876264" class="footnote">15</a>]</sup>
      </p>
<p>
        
</p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">local</span><span class="special">/</span><span class="identifier">function</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">utility</span><span class="special">/</span><span class="identifier">identity</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">map</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">string</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">iostream</span><span class="special">&gt;</span>

<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">K</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">T</span><span class="special">&gt;</span> <span class="keyword">struct</span> <span class="identifier">key_size</span> <span class="special">{</span> <span class="keyword">static</span> <span class="keyword">const</span> <span class="identifier">size_t</span> <span class="identifier">value</span><span class="special">;</span> <span class="special">};</span>
<span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">K</span><span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">T</span><span class="special">&gt;</span> <span class="keyword">const</span> <span class="identifier">size_t</span> <span class="identifier">key_size</span><span class="special">&lt;</span><span class="identifier">K</span><span class="special">,</span> <span class="identifier">T</span><span class="special">&gt;::</span><span class="identifier">value</span> <span class="special">=</span> <span class="keyword">sizeof</span><span class="special">(</span><span class="identifier">K</span><span class="special">);</span>

<span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span> <span class="identifier">cat</span><span class="special">(</span><span class="keyword">const</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&amp;</span> <span class="identifier">a</span><span class="special">,</span> <span class="keyword">const</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&amp;</span> <span class="identifier">b</span><span class="special">)</span> <span class="special">{</span> <span class="keyword">return</span> <span class="identifier">a</span> <span class="special">+</span> <span class="identifier">b</span><span class="special">;</span> <span class="special">}</span>

<span class="keyword">typedef</span> <span class="keyword">int</span> <span class="keyword">const</span><span class="special">&amp;</span> <span class="identifier">sign_t</span><span class="special">;</span>

<span class="keyword">int</span> <span class="identifier">main</span><span class="special">()</span> <span class="special">{</span>
    <span class="keyword">void</span> <span class="identifier">BOOST_LOCAL_FUNCTION_PARAMS</span><span class="special">(</span>
            <span class="comment">// Identity macors handle commas.
</span>            <span class="special">(</span><span class="identifier">BOOST_IDENTITY_TYPE</span><span class="special">((</span><span class="keyword">const</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="identifier">size_t</span><span class="special">&gt;))&amp;</span> <span class="identifier">m</span><span class="special">)</span>
            <span class="special">(</span><span class="keyword">const</span> <span class="identifier">size_t</span><span class="special">&amp;</span> <span class="identifier">factor</span><span class="special">)(</span><span class="keyword">default</span> <span class="comment">// Or just use `(default (...))`.
</span>                <span class="identifier">BOOST_IDENTITY_VALUE</span><span class="special">((</span><span class="identifier">key_size</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">value</span><span class="special">)))</span>
            <span class="special">(</span><span class="keyword">const</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">&amp;</span> <span class="identifier">separator</span><span class="special">)(</span><span class="keyword">default</span> <span class="identifier">cat</span><span class="special">(</span><span class="string">":"</span><span class="special">,</span> <span class="string">" "</span><span class="special">))</span>
            <span class="comment">// Also, identity macors handle leading symbols.
</span>            <span class="special">(</span><span class="identifier">BOOST_IDENTITY_TYPE</span><span class="special">((::</span><span class="identifier">sign_t</span><span class="special">))</span> <span class="identifier">sign</span><span class="special">)(</span><span class="keyword">default</span> <span class="special">-</span><span class="number">1</span><span class="special">)</span> <span class="special">)</span> <span class="special">{</span>
        <span class="keyword">for</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="identifier">size_t</span><span class="special">&gt;::</span><span class="identifier">const_iterator</span> <span class="identifier">i</span> <span class="special">=</span> <span class="identifier">m</span><span class="special">.</span><span class="identifier">begin</span><span class="special">();</span>
                <span class="identifier">i</span> <span class="special">!=</span> <span class="identifier">m</span><span class="special">.</span><span class="identifier">end</span><span class="special">();</span> <span class="special">++</span><span class="identifier">i</span><span class="special">)</span> <span class="special">{</span>
            <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">i</span><span class="special">-&gt;</span><span class="identifier">first</span> <span class="special">&lt;&lt;</span> <span class="identifier">separator</span> <span class="special">&lt;&lt;</span>
                    <span class="identifier">sign</span> <span class="special">*</span> <span class="keyword">int</span><span class="special">(</span><span class="identifier">i</span><span class="special">-&gt;</span><span class="identifier">second</span><span class="special">)</span> <span class="special">*</span> <span class="keyword">int</span><span class="special">(</span><span class="identifier">factor</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
        <span class="special">}</span>
    <span class="special">}</span> <span class="identifier">BOOST_LOCAL_FUNCTION_NAME</span><span class="special">(</span><span class="identifier">print</span><span class="special">)</span>

    <span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span><span class="special">,</span> <span class="identifier">size_t</span><span class="special">&gt;</span> <span class="identifier">sizes</span><span class="special">;</span>
    <span class="identifier">sizes</span><span class="special">[</span><span class="string">"a"</span><span class="special">]</span> <span class="special">=</span> <span class="number">1</span><span class="special">;</span> <span class="identifier">sizes</span><span class="special">[</span><span class="string">"ab"</span><span class="special">]</span> <span class="special">=</span> <span class="number">2</span><span class="special">;</span> <span class="identifier">sizes</span><span class="special">[</span><span class="string">"abc"</span><span class="special">]</span> <span class="special">=</span> <span class="number">3</span><span class="special">;</span>
    <span class="identifier">print</span><span class="special">(</span><span class="identifier">sizes</span><span class="special">);</span>

    <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
      </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_local.Advanced.recursive_local_functions"></a><a class="link" href="Advanced.html#boost_local.Advanced.recursive_local_functions" title="Recursive Local Functions">Recursive
      Local Functions</a>
</h3></div></div></div>
<p>
        A local function can recursively call itself as usual with C++ functions.
      </p>
<p>
        For example, the following local function is used to recursively calculate
        and print the factorial of the specified numbers:
      </p>
<p>
        
</p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">local</span><span class="special">/</span><span class="identifier">function</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">iostream</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">sstream</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">algorithm</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">vector</span><span class="special">&gt;</span>

<span class="keyword">int</span> <span class="identifier">main</span> <span class="special">()</span> <span class="special">{</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">ostringstream</span> <span class="identifier">output</span><span class="special">;</span>

    <span class="keyword">int</span> <span class="identifier">BOOST_LOCAL_FUNCTION_PARAMS</span><span class="special">(</span> <span class="special">(</span><span class="keyword">int</span> <span class="identifier">n</span><span class="special">)</span> <span class="special">(</span><span class="keyword">bool</span> <span class="identifier">recursion</span><span class="special">)(</span><span class="keyword">default</span> <span class="keyword">false</span><span class="special">)</span>
            <span class="special">(</span><span class="identifier">bind</span><span class="special">&amp;</span> <span class="identifier">output</span><span class="special">)</span> <span class="special">)</span> <span class="special">{</span>
        <span class="keyword">int</span> <span class="identifier">result</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span>

        <span class="keyword">if</span> <span class="special">(</span><span class="identifier">n</span> <span class="special">&lt;</span> <span class="number">2</span> <span class="special">)</span> <span class="identifier">result</span> <span class="special">=</span> <span class="number">1</span><span class="special">;</span>
        <span class="keyword">else</span> <span class="identifier">result</span> <span class="special">=</span> <span class="identifier">n</span> <span class="special">*</span> <span class="identifier">factorial</span><span class="special">(</span><span class="identifier">n</span> <span class="special">-</span> <span class="number">1</span><span class="special">,</span> <span class="keyword">true</span><span class="special">);</span> <span class="comment">// Recursive call.
</span>
        <span class="keyword">if</span> <span class="special">(!</span><span class="identifier">recursion</span><span class="special">)</span> <span class="identifier">output</span> <span class="special">&lt;&lt;</span> <span class="identifier">result</span> <span class="special">&lt;&lt;</span> <span class="string">" "</span><span class="special">;</span>
        <span class="keyword">return</span> <span class="identifier">result</span><span class="special">;</span>
    <span class="special">}</span> <span class="identifier">BOOST_LOCAL_FUNCTION_NAME</span><span class="special">(</span><span class="identifier">factorial</span><span class="special">)</span>

    <span class="identifier">std</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="identifier">v</span><span class="special">(</span><span class="number">3</span><span class="special">);</span>
    <span class="identifier">v</span><span class="special">[</span><span class="number">0</span><span class="special">]</span> <span class="special">=</span> <span class="number">1</span><span class="special">;</span> <span class="identifier">v</span><span class="special">[</span><span class="number">1</span><span class="special">]</span> <span class="special">=</span> <span class="number">4</span><span class="special">;</span> <span class="identifier">v</span><span class="special">[</span><span class="number">2</span><span class="special">]</span> <span class="special">=</span> <span class="number">7</span><span class="special">;</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">for_each</span><span class="special">(</span><span class="identifier">v</span><span class="special">.</span><span class="identifier">begin</span><span class="special">(),</span> <span class="identifier">v</span><span class="special">.</span><span class="identifier">end</span><span class="special">(),</span> <span class="identifier">factorial</span><span class="special">);</span>

    <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">output</span><span class="special">.</span><span class="identifier">str</span><span class="special">()</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
    <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
      </p>
<p>
        The original local function name as specified in the parenthesized signature
        passed to <code class="computeroutput">BOOST_LOCAL_FUNCTION</code>
        must always be used for recursive calls even when the function is renamed
        using <code class="computeroutput">BOOST_LOCAL_FUNCTION_END_RENAME</code>
        (see renamed local functions later in this section).
      </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_local.Advanced.exception_specifications"></a><a class="link" href="Advanced.html#boost_local.Advanced.exception_specifications" title="Exception Specifications">Exception
      Specifications</a>
</h3></div></div></div>
<p>
        It is possible to program exception specifications for local functions, local
        blocks, and local exits.
      </p>
<p>
        Exception specifications are programmed just before the body (and outside
        the macros). For example:
      </p>
<p>
        
</p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">local</span><span class="special">/</span><span class="identifier">function</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">local</span><span class="special">/</span><span class="identifier">block</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">local</span><span class="special">/</span><span class="identifier">exit</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">stdexcept</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">algorithm</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">cassert</span><span class="special">&gt;</span>

<span class="keyword">int</span> <span class="identifier">main</span><span class="special">()</span> <span class="special">{</span>
    <span class="keyword">double</span> <span class="identifier">sum</span> <span class="special">=</span> <span class="number">0.0</span><span class="special">;</span>
    <span class="keyword">int</span> <span class="identifier">factor</span> <span class="special">=</span> <span class="number">10</span><span class="special">;</span>

    <span class="keyword">void</span> <span class="identifier">BOOST_LOCAL_FUNCTION_PARAMS</span><span class="special">(</span> <span class="special">(</span><span class="keyword">double</span> <span class="identifier">num</span><span class="special">)</span>
            <span class="special">(</span><span class="keyword">const</span> <span class="identifier">bind</span> <span class="identifier">factor</span><span class="special">)</span> <span class="special">(</span><span class="identifier">bind</span><span class="special">&amp;</span> <span class="identifier">sum</span><span class="special">)</span> <span class="special">)</span>
            <span class="keyword">throw</span> <span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">runtime_error</span><span class="special">,</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">logic_error</span><span class="special">)</span> <span class="special">{</span> <span class="comment">// Throw two except.
</span>        <span class="identifier">sum</span> <span class="special">+=</span> <span class="identifier">factor</span> <span class="special">*</span> <span class="identifier">num</span><span class="special">;</span>
    <span class="special">}</span> <span class="identifier">BOOST_LOCAL_FUNCTION_NAME</span><span class="special">(</span><span class="identifier">add</span><span class="special">)</span>
    <span class="identifier">add</span><span class="special">(</span><span class="number">100.0</span><span class="special">);</span>

    <span class="identifier">size_t</span> <span class="identifier">size</span> <span class="special">=</span> <span class="number">2</span><span class="special">;</span>
    <span class="keyword">double</span><span class="special">*</span> <span class="identifier">nums</span> <span class="special">=</span> <span class="keyword">new</span> <span class="keyword">double</span><span class="special">[</span><span class="identifier">size</span><span class="special">];</span>
    <span class="identifier">BOOST_LOCAL_EXIT</span><span class="special">(</span> <span class="special">(</span><span class="keyword">const</span> <span class="identifier">bind</span><span class="special">&amp;</span> <span class="identifier">size</span><span class="special">)</span> <span class="special">(</span><span class="identifier">bind</span> <span class="identifier">nums</span><span class="special">)</span> <span class="special">)</span> <span class="keyword">throw</span><span class="special">()</span> <span class="special">{</span> <span class="comment">// Throw none.
</span>        <span class="keyword">if</span> <span class="special">(</span><span class="identifier">size</span> <span class="special">&amp;&amp;</span> <span class="identifier">nums</span><span class="special">)</span> <span class="keyword">delete</span><span class="special">[]</span> <span class="identifier">nums</span><span class="special">;</span>
    <span class="special">}</span> <span class="identifier">BOOST_LOCAL_EXIT_END</span>

    <span class="identifier">nums</span><span class="special">[</span><span class="number">0</span><span class="special">]</span> <span class="special">=</span> <span class="number">90.5</span><span class="special">;</span> <span class="identifier">nums</span><span class="special">[</span><span class="number">1</span><span class="special">]</span> <span class="special">=</span> <span class="number">7.0</span><span class="special">;</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">for_each</span><span class="special">(</span><span class="identifier">nums</span><span class="special">,</span> <span class="identifier">nums</span> <span class="special">+</span> <span class="identifier">size</span><span class="special">,</span> <span class="identifier">add</span><span class="special">);</span>

    <span class="identifier">BOOST_LOCAL_BLOCK</span><span class="special">(</span> <span class="special">(</span><span class="keyword">const</span> <span class="identifier">bind</span><span class="special">&amp;</span> <span class="identifier">sum</span><span class="special">)</span> <span class="special">)</span> <span class="keyword">throw</span><span class="special">(</span><span class="identifier">std</span><span class="special">::</span><span class="identifier">exception</span><span class="special">)</span> <span class="special">{</span> <span class="comment">// Thow one.
</span>        <span class="identifier">assert</span><span class="special">(</span><span class="identifier">sum</span> <span class="special">==</span> <span class="number">1975.0</span><span class="special">);</span>
    <span class="special">}</span> <span class="identifier">BOOST_LOCAL_BLOCK_END</span>

    <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
      </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_local.Advanced.optimizers___inline____auto___and__register_"></a><a class="link" href="Advanced.html#boost_local.Advanced.optimizers___inline____auto___and__register_" title="Optimizers: inline, auto, and register">Optimizers:
      <code class="computeroutput"><span class="keyword">inline</span></code>, <code class="computeroutput"><span class="keyword">auto</span></code>,
      and <code class="computeroutput"><span class="keyword">register</span></code></a>
</h3></div></div></div>
<p>
        As specified in the <a class="link" href="Grammar.html" title="Appendix: Grammar">Grammar</a> section,
        the parenthesized signature also supports <code class="computeroutput"><span class="keyword">inline</span></code>d
        local functions, and the <code class="computeroutput"><span class="keyword">auto</span></code>
        and <code class="computeroutput"><span class="keyword">register</span></code> classifiers for
        local function parameters.
      </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../../../doc/src/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
          However, note that local functions will always add some overhead because
          of the functor object used to internally implement them. Compilers might
          not be able to optimize away the local function overhead even when <code class="computeroutput"><span class="keyword">inline</span></code>, <code class="computeroutput"><span class="keyword">auto</span></code>,
          and <code class="computeroutput"><span class="keyword">register</span></code> are used.
        </p></td></tr>
</table></div>
<p>
        For example:
      </p>
<p>
        
</p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">local</span><span class="special">/</span><span class="identifier">function</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">iostream</span><span class="special">&gt;</span>

<span class="keyword">int</span> <span class="identifier">main</span><span class="special">()</span> <span class="special">{</span>
    <span class="keyword">int</span> <span class="identifier">BOOST_LOCAL_FUNCTION_PARAMS</span><span class="special">(</span> <span class="special">(</span><span class="keyword">auto</span> <span class="keyword">int</span> <span class="identifier">x</span><span class="special">)</span> <span class="special">(</span><span class="keyword">register</span> <span class="keyword">int</span> <span class="identifier">y</span><span class="special">)</span> <span class="special">)</span> <span class="special">{</span>
        <span class="keyword">return</span> <span class="identifier">x</span> <span class="special">+</span> <span class="identifier">y</span><span class="special">;</span>
    <span class="special">}</span> <span class="identifier">BOOST_LOCAL_FUNCTION_NAME</span><span class="special">(</span><span class="identifier">add</span><span class="special">)</span>

    <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">add</span><span class="special">(</span><span class="number">3</span><span class="special">,</span> <span class="number">5</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>

    <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
      </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_local.Advanced.references_to_local_functions"></a><a class="link" href="Advanced.html#boost_local.Advanced.references_to_local_functions" title="References to Local Functions">References
      to Local Functions</a>
</h3></div></div></div>
<p>
        It is possible to obtain a reference to a local function so to assign it
        to a variable, to pass it as a function parameter, etc.
      </p>
<div class="important"><table border="0" summary="Important">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="../../../../../doc/src/images/important.png"></td>
<th align="left">Important</th>
</tr>
<tr><td align="left" valign="top"><p>
          Local functions are never copied by value. You can only obtain a reference
          to a local function therefore you need to make sure that the <span class="bold"><strong>local function survives the scope of its reference</strong></span>
          otherwise the reference will be invalid and its use will generate a run-time
          error (as usual with C++ references). <sup>[<a name="id880541" href="#ftn.id880541" class="footnote">16</a>]</sup>
        </p></td></tr>
</table></div>
<p>
        For this purpose, it is possible to assign a <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">function</span></code>
        functor to a local function (see also <a href="http://www.boost.org/doc/libs/release/doc/html/function.html" target="_top">Boost.Function</a>).
        However, it is in general preferable to use the <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">local</span><span class="special">::</span>function_ref</code>
        functor instead because its API also supports default parameters.
      </p>
<p>
        The <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">local</span><span class="special">::</span>function_ref</code> template
        takes two parameters (see the <a href="../reference.html" target="_top">Reference</a>
        section):
      </p>
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">F</span><span class="special">,</span> <span class="identifier">size_t</span> <span class="identifier">defaults</span> <span class="special">=</span> <span class="number">0</span><span class="special">&gt;</span>
<span class="keyword">class</span> <code class="computeroutput">function_ref</code> <span class="special">{</span> <span class="special">...</span> <span class="special">};</span>
</pre>
<p>
        Where:
      </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
            The template parameter <code class="computeroutput"><span class="identifier">F</span></code>
            specifies the function signature using the same syntax as <a href="http://www.boost.org/doc/libs/release/doc/html/function.html" target="_top">Boost.Function</a>'s
            preferred syntax. For example:
          </li></ul></div>
<pre class="programlisting"><code class="computeroutput">function_ref</code><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">()</span> <span class="special">&gt;</span>                   <span class="comment">// Returns `int` and takes no parameter.
</span><code class="computeroutput">function_ref</code><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">(</span><span class="keyword">double</span><span class="special">,</span> <span class="keyword">char</span><span class="special">)</span> <span class="special">&gt;</span>       <span class="comment">// Returns `int`and takes two parameters: a `double` followed by a `char`.
</span></pre>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
            The template parameter <code class="computeroutput"><span class="identifier">defaults</span></code>
            specifies the number of defaults parameters counting from the last parameter:
            <code class="computeroutput"><span class="number">0</span></code> if no parameter is optional,
            <code class="computeroutput"><span class="number">1</span></code> if the last parameter is
            optional, <code class="computeroutput"><span class="number">2</span></code> if the last two
            parameters are optional, etc. This template parameter must be between
            <code class="computeroutput"><span class="number">0</span></code> and the total number of
            parameters as specified by <code class="computeroutput"><span class="identifier">F</span></code>.
            This template parameter is optional and it is <code class="computeroutput"><span class="number">0</span></code>
            by default. For example:
          </li></ul></div>
<pre class="programlisting"><code class="computeroutput">function_ref</code><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">(</span><span class="keyword">double</span><span class="special">,</span> <span class="keyword">char</span><span class="special">)</span> <span class="special">&gt;</span>       <span class="comment">// No default: All parameters must be specified.
</span><code class="computeroutput">function_ref</code><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">(</span><span class="keyword">double</span><span class="special">,</span> <span class="keyword">char</span><span class="special">),</span> <span class="number">1</span> <span class="special">&gt;</span>    <span class="comment">// 1 default: The last `char` parameter is optional.
</span><code class="computeroutput">function_ref</code><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">(</span><span class="keyword">double</span><span class="special">,</span> <span class="keyword">char</span><span class="special">),</span> <span class="number">2</span> <span class="special">&gt;</span>    <span class="comment">// 2 defaults: All parameters are optional.
</span></pre>
<p>
        For example:
      </p>
<p>
        
</p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">local</span><span class="special">/</span><span class="identifier">function</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">function</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">iostream</span><span class="special">&gt;</span>

<span class="comment">// Using `function` allows to use the same functor for all calls (regardless of
</span><span class="comment">// which set of default parameters is specified).
</span><span class="keyword">void</span> <span class="identifier">doit</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">local</span><span class="special">::</span><span class="identifier">function</span><span class="special">&lt;</span> <span class="keyword">int</span> <span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="keyword">int</span><span class="special">),</span> <span class="number">2</span> <span class="special">&gt;</span> <span class="identifier">l</span><span class="special">)</span> <span class="special">{</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">l</span><span class="special">(</span><span class="number">1</span><span class="special">,</span> <span class="number">2</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">l</span><span class="special">(</span><span class="number">1</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
    <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">l</span><span class="special">()</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
<span class="special">}</span>

<span class="comment">// Using `function` requires different functors for calls with different set of
</span><span class="comment">// default parameters.
</span><span class="keyword">void</span> <span class="identifier">doit2</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">function</span><span class="special">&lt;</span> <span class="keyword">int</span> <span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="keyword">int</span><span class="special">)</span> <span class="special">&gt;</span> <span class="identifier">l</span><span class="special">)</span>
    <span class="special">{</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">l</span><span class="special">(</span><span class="number">1</span><span class="special">,</span> <span class="number">2</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span> <span class="special">}</span>
<span class="keyword">void</span> <span class="identifier">doit1</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">function</span><span class="special">&lt;</span> <span class="keyword">int</span> <span class="special">(</span><span class="keyword">int</span><span class="special">)</span> <span class="special">&gt;</span> <span class="identifier">l</span><span class="special">)</span> <span class="special">{</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">l</span><span class="special">(</span><span class="number">1</span><span class="special">)</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span> <span class="special">}</span>
<span class="keyword">void</span> <span class="identifier">doit0</span><span class="special">(</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">function</span><span class="special">&lt;</span> <span class="keyword">int</span> <span class="special">()</span> <span class="special">&gt;</span> <span class="identifier">l</span><span class="special">)</span> <span class="special">{</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">l</span><span class="special">()</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span> <span class="special">}</span>

<span class="keyword">int</span> <span class="identifier">main</span><span class="special">()</span> <span class="special">{</span>
    <span class="identifier">boost</span><span class="special">::</span><span class="identifier">function</span><span class="special">&lt;</span><span class="keyword">int</span> <span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="keyword">int</span><span class="special">)&gt;</span> <span class="identifier">l2</span><span class="special">;</span>

    <span class="special">{</span>
        <span class="keyword">int</span> <span class="identifier">i</span> <span class="special">=</span> <span class="number">2</span><span class="special">;</span>
    
        <span class="keyword">int</span> <span class="identifier">BOOST_LOCAL_FUNCTION_PARAMS</span><span class="special">(</span> <span class="special">(</span><span class="keyword">int</span> <span class="identifier">x</span><span class="special">)(</span><span class="keyword">default</span> <span class="number">1</span><span class="special">)</span> <span class="special">(</span><span class="keyword">int</span> <span class="identifier">y</span><span class="special">)(</span><span class="keyword">default</span> <span class="number">2</span><span class="special">)</span>
                <span class="special">(</span><span class="identifier">bind</span> <span class="identifier">i</span><span class="special">)</span> <span class="special">)</span> <span class="special">{</span>
            <span class="keyword">return</span> <span class="identifier">x</span> <span class="special">+</span> <span class="identifier">i</span> <span class="special">*</span> <span class="identifier">y</span><span class="special">;</span>
        <span class="special">}</span> <span class="identifier">BOOST_LOCAL_FUNCTION_NAME</span><span class="special">(</span><span class="identifier">linear</span><span class="special">)</span>

        <span class="comment">// Assign local functions variables.
</span>        <span class="identifier">boost</span><span class="special">::</span><span class="identifier">local</span><span class="special">::</span><span class="identifier">function</span><span class="special">&lt;</span> <span class="keyword">int</span> <span class="special">(</span><span class="keyword">int</span><span class="special">,</span> <span class="keyword">int</span><span class="special">),</span> <span class="number">2</span> <span class="special">&gt;</span> <span class="identifier">l</span> <span class="special">=</span> <span class="identifier">linear</span><span class="special">;</span>
        <span class="identifier">l</span><span class="special">(</span><span class="number">1</span><span class="special">,</span> <span class="number">2</span><span class="special">);</span> <span class="identifier">l</span><span class="special">(</span><span class="number">1</span><span class="special">);</span> <span class="identifier">l</span><span class="special">();</span> <span class="comment">// All calls because of default parameters.
</span>        <span class="identifier">l2</span> <span class="special">=</span> <span class="identifier">linear</span><span class="special">;</span>
        <span class="identifier">l2</span><span class="special">(</span><span class="number">1</span><span class="special">,</span> <span class="number">2</span><span class="special">);</span> <span class="comment">// Only one call operation (without default parameters).
</span>
        <span class="comment">// Similarly, pass local functions as a function parameter.
</span>        <span class="identifier">doit</span><span class="special">(</span><span class="identifier">linear</span><span class="special">);</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
        <span class="identifier">doit2</span><span class="special">(</span><span class="identifier">linear</span><span class="special">);</span>
        <span class="identifier">doit1</span><span class="special">(</span><span class="identifier">linear</span><span class="special">);</span>
        <span class="identifier">doit0</span><span class="special">(</span><span class="identifier">linear</span><span class="special">);</span>
    <span class="special">}</span>
        
    <span class="keyword">if</span> <span class="special">(</span><span class="keyword">false</span><span class="special">)</span> <span class="special">{</span>
        <span class="identifier">l2</span><span class="special">(</span><span class="number">1</span><span class="special">,</span> <span class="number">2</span><span class="special">);</span> <span class="comment">// This wouuld raise run-time error because invalid reference.
</span>    <span class="special">}</span>

    <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
      </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_local.Advanced.renaming_local_functions"></a><a class="link" href="Advanced.html#boost_local.Advanced.renaming_local_functions" title="Renaming Local Functions">Renaming
      Local Functions</a>
</h3></div></div></div>
<p>
        Local functions can be renamed using the <code class="computeroutput">BOOST_LOCAL_FUNCTION_END_RENAME</code>
        macro instead of <code class="computeroutput">BOOST_LOCAL_FUNCTION_END</code>:
      </p>
<pre class="programlisting"><code class="computeroutput">BOOST_LOCAL_FUNCTION_END_RENAME</code><span class="special">(</span><span class="emphasis"><em>new-local-function-name</em></span><span class="special">)</span>
</pre>
<p>
        Where the <span class="emphasis"><em>new-local-function-name</em></span> no longer has to match
        the local function name as originally specified in the parenthesized signature
        passed to <code class="computeroutput">BOOST_LOCAL_FUNCTION</code>.
        For example: <sup>[<a name="id883056" href="#ftn.id883056" class="footnote">17</a>]</sup>
      </p>
<pre class="programlisting"><span class="special">{</span>
    <code class="computeroutput">BOOST_LOCAL_FUNCTION</code><span class="special">(</span>
    <span class="special">(</span><span class="keyword">void</span><span class="special">)</span> <span class="special">(</span><span class="identifier">l</span><span class="special">)(</span> <span class="special">(</span><span class="keyword">int</span><span class="special">)(</span><span class="identifier">x</span><span class="special">)</span> <span class="special">)</span>
    <span class="special">)</span> <span class="special">{</span>
        <span class="special">...</span> <span class="comment">// Body uses original name `l`.
</span>    <span class="special">}</span> <code class="computeroutput">BOOST_LOCAL_FUNCTION_END_RENAME</code><span class="special">(</span><span class="identifier">m</span><span class="special">)</span> <span class="comment">// Renamed to `m`.
</span>    
    <span class="special">...</span> <span class="comment">// Enclosing scope uses new name `m`.
</span><span class="special">}</span>
</pre>
<p>
        Note that the local function is renamed only after the call to <code class="computeroutput">BOOST_LOCAL_FUNCTION_END_RENAME</code>.
        Therefore, within the local function body the original local function name
        as specified by <code class="computeroutput">BOOST_LOCAL_FUNCTION</code>
        must be used (e.g., to recursively call the local function). However, within
        the enclosing scope only the new local function name as specified by <code class="computeroutput">BOOST_LOCAL_FUNCTION_END_RENAME</code>
        is available.
      </p>
<p>
        A limitation is that renamed local functions cannot be directly passed as
        template parameters (e.g., they cannot be passed to STL algorithms like
        <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">for_each</span></code>). However, it is possible to workaround
        this limitation by obtaining a reference of the renamed local function and
        then passing the reference as template parameter. For example:
      </p>
<p>
        [renamed_print_cpp]
      </p>
<a name="boost_local.Advanced.renaming_local_functions.motivation"></a><h6>
<a name="id883353"></a>
        <a class="link" href="Advanced.html#boost_local.Advanced.renaming_local_functions.motivation">Motivation</a>
      </h6>
<p>
        The motivation for renaming a local function might not be obvious at first.
        In fact, in most cases programmers will not need to rename local functions.
      </p>
<p>
        Renaming local functions might be useful at least to program macros that
        expand using local functions and that do not want to pass the local function
        body as a macro parameter (so to retain the usual meaning of compiler error
        line numbers for the body code). Consider the following example that implements
        a simple version of the local exit macros using a renamed local function:
      </p>
<p>
        [renamed_exit_cpp]
      </p>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_local.Advanced.limitations__overloading__nesting__operators__etc"></a><a class="link" href="Advanced.html#boost_local.Advanced.limitations__overloading__nesting__operators__etc" title="Limitations: Overloading, Nesting, Operators, Etc">Limitations:
      Overloading, Nesting, Operators, Etc</a>
</h3></div></div></div>
<p>
        This is a list of limitations of this library's local functions compared
        to usual features of C++ functions.
      </p>
<a name="boost_local.Advanced.limitations__overloading__nesting__operators__etc.overloading"></a><h6>
<a name="id883437"></a>
        <a class="link" href="Advanced.html#boost_local.Advanced.limitations__overloading__nesting__operators__etc.overloading">Overloading</a>
      </h6>
<p>
        It is not possible to overload local functions. Declaring multiple local
        functions with the same name within the same enclosing scope generates a
        compile-time error (even if the different declarations specify different
        parameters). <sup>[<a name="id883457" href="#ftn.id883457" class="footnote">18</a>]</sup>
      </p>
<p>
        For example, the following code will <span class="bold"><strong>not</strong></span>
        compile:
      </p>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">f</span><span class="special">()</span> <span class="special">{</span>
    <code class="computeroutput">BOOST_LOCAL_FUNCTION</code><span class="special">(</span>
    <span class="special">(</span><span class="keyword">void</span><span class="special">)</span> <span class="special">(</span><span class="identifier">l</span><span class="special">)(</span> <span class="special">(</span><span class="keyword">const</span> <span class="keyword">int</span><span class="special">&amp;)(</span><span class="identifier">i</span><span class="special">)</span> <span class="special">)</span>
    <span class="special">)</span> <span class="special">{</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">i</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
    <span class="special">}</span> <code class="computeroutput">BOOST_LOCAL_FUNCTION_END</code><span class="special">(</span><span class="identifier">l</span><span class="special">)</span>

    <code class="computeroutput">BOOST_LOCAL_FUNCTION</code><span class="special">(</span>
    <span class="special">(</span><span class="keyword">void</span><span class="special">)</span> <span class="special">(</span><span class="identifier">l</span><span class="special">)(</span> <span class="special">(</span><span class="keyword">const</span> <span class="keyword">double</span><span class="special">&amp;)(</span><span class="identifier">d</span><span class="special">)</span> <span class="special">)</span>
    <span class="special">)</span> <span class="special">{</span>
        <span class="identifier">std</span><span class="special">::</span><span class="identifier">cout</span> <span class="special">&lt;&lt;</span> <span class="identifier">d</span> <span class="special">&lt;&lt;</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">endl</span><span class="special">;</span>
    <span class="special">}</span> <code class="computeroutput">BOOST_LOCAL_FUNCTION_END</code><span class="special">(</span><span class="identifier">l</span><span class="special">)</span> <span class="comment">// Error: Cannot overload.
</span>
    <span class="special">...</span>
<span class="special">}</span>
</pre>
<a name="boost_local.Advanced.limitations__overloading__nesting__operators__etc.nesting"></a><h6>
<a name="id883899"></a>
        <a class="link" href="Advanced.html#boost_local.Advanced.limitations__overloading__nesting__operators__etc.nesting">Nesting</a>
      </h6>
<p>
        It is not possible to nest local functions, local blocks, or local exits
        within each other. Nesting will generate a compile-time error. <sup>[<a name="id883921" href="#ftn.id883921" class="footnote">19</a>]</sup>
      </p>
<p>
        For example, the following code will <span class="bold"><strong>not</strong></span>
        compile:
      </p>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">f</span><span class="special">()</span> <span class="special">{</span>
    <code class="computeroutput">BOOST_LOCAL_FUNCTION</code><span class="special">(</span>
    <span class="special">(</span><span class="keyword">int</span><span class="special">)</span> <span class="special">(</span><span class="identifier">l</span><span class="special">)(</span> <span class="special">(</span><span class="keyword">int</span><span class="special">)(</span><span class="identifier">i</span><span class="special">)</span> <span class="special">)</span>
    <span class="special">)</span> <span class="special">{</span>
        <code class="computeroutput">BOOST_LOCAL_FUNCTION</code><span class="special">(</span> <span class="comment">// Error: Cannot nest.
</span>        <span class="special">(</span><span class="keyword">int</span><span class="special">)</span> <span class="special">(</span><span class="identifier">m</span><span class="special">)(</span> <span class="special">(</span><span class="keyword">int</span><span class="special">)(</span><span class="identifier">j</span><span class="special">)</span> <span class="special">)</span>
        <span class="special">)</span> <span class="special">{</span>
            <span class="keyword">return</span> <span class="identifier">j</span> <span class="special">*</span> <span class="number">10</span><span class="special">;</span>
        <span class="special">}</span> <code class="computeroutput">BOOST_LOCAL_FUNCTION_END</code><span class="special">(</span><span class="identifier">m</span><span class="special">)</span>

        <span class="keyword">return</span> <span class="identifier">m</span><span class="special">(</span><span class="identifier">i</span><span class="special">)</span> <span class="special">*</span> <span class="number">10</span><span class="special">;</span>
    <span class="special">}</span> <code class="computeroutput">BOOST_LOCAL_FUNCTION_END</code><span class="special">(</span><span class="identifier">l</span><span class="special">)</span>

    <span class="special">...</span>
<span class="special">}</span>
</pre>
<a name="boost_local.Advanced.limitations__overloading__nesting__operators__etc.operators"></a><h6>
<a name="id884322"></a>
        <a class="link" href="Advanced.html#boost_local.Advanced.limitations__overloading__nesting__operators__etc.operators">Operators</a>
      </h6>
<p>
        Local functions cannot be operators. Naming a local function <code class="computeroutput"><span class="keyword">operator</span><span class="special">...</span></code>
        will generate a compile-time error. <sup>[<a name="id884359" href="#ftn.id884359" class="footnote">20</a>]</sup>
      </p>
<p>
        For example, the following code will <span class="bold"><strong>not</strong></span>
        compile:
      </p>
<pre class="programlisting"><span class="keyword">void</span> <span class="identifier">f</span><span class="special">()</span> <span class="special">{</span>
    <span class="keyword">struct</span> <span class="identifier">point</span> <span class="special">{</span>
        <span class="keyword">double</span> <span class="identifier">x</span><span class="special">;</span>
        <span class="keyword">double</span> <span class="identifier">y</span><span class="special">;</span>
    <span class="special">};</span>

    <code class="computeroutput">BOOST_LOCAL_FUNCTION</code><span class="special">(</span> <span class="comment">// Error: Cannot be `operator==`.
</span>    <span class="special">(</span><span class="keyword">bool</span><span class="special">)</span> <span class="special">(</span><span class="keyword">operator</span><span class="special">==)(</span> <span class="special">(</span><span class="keyword">const</span> <span class="identifier">point</span><span class="special">&amp;)(</span><span class="identifier">p</span><span class="special">)</span> <span class="special">(</span><span class="keyword">const</span> <span class="identifier">point</span><span class="special">&amp;)(</span><span class="identifier">q</span><span class="special">)</span> <span class="special">)</span>
    <span class="special">)</span> <span class="special">{</span>
        <span class="keyword">return</span> <span class="identifier">p</span><span class="special">.</span><span class="identifier">x</span> <span class="special">==</span> <span class="identifier">q</span><span class="special">.</span><span class="identifier">x</span> <span class="special">&amp;&amp;</span> <span class="identifier">p</span><span class="special">.</span><span class="identifier">y</span> <span class="special">==</span> <span class="identifier">q</span><span class="special">.</span><span class="identifier">y</span><span class="special">;</span>
    <span class="special">)</span> <code class="computeroutput">BOOST_LOCAL_FUNCTION_END</code><span class="special">(</span><span class="keyword">operator</span><span class="special">==)</span>

    <span class="special">...</span>
<span class="special">}</span>
</pre>
<a name="boost_local.Advanced.limitations__overloading__nesting__operators__etc.etc"></a><h6>
<a name="id884753"></a>
        <a class="link" href="Advanced.html#boost_local.Advanced.limitations__overloading__nesting__operators__etc.etc">Etc</a>
      </h6>
<p>
        Some usual C++ function features like <code class="computeroutput"><span class="keyword">inline</span></code>
        and default parameters are supported for local functions while other features
        are not supported. The parenthesized syntax itself (see the <a class="link" href="Grammar.html" title="Appendix: Grammar">Grammar</a>
        section) could be extended to support <span class="emphasis"><em>all</em></span> C++ function
        features even with the addition of concepts and named parameters (see <a href="http://sourceforge.net/projects/contractpp" target="_top">Contract++</a>):
      </p>
<pre class="programlisting"><span class="emphasis"><em>parenthesized-signature:</em></span>
        <span class="emphasis"><em>[</em></span><span class="special">(</span><span class="keyword">export</span><span class="special">)</span><span class="emphasis"><em>]</em></span> <span class="emphasis"><em>[</em></span><span class="special">(</span><span class="keyword">template</span><span class="special">)(</span><span class="emphasis"><em>template-parameter-list</em></span><span class="special">)</span><span class="emphasis"><em>]</em></span> <span class="emphasis"><em>[</em></span><span class="special">(</span><span class="identifier">requires</span><span class="special">)(</span><span class="emphasis"><em>concept-list</em></span><span class="special">)</span><span class="emphasis"><em>]</em></span>
        <span class="emphasis"><em>[</em></span><span class="special">(</span><span class="keyword">explicit</span><span class="special">)</span><span class="emphasis"><em>]</em></span>
        <span class="emphasis"><em>[</em></span><span class="special">(</span><span class="keyword">inline</span><span class="special">)</span><span class="emphasis"><em>]</em></span> <span class="emphasis"><em>[</em></span><span class="special">(</span><span class="keyword">extern</span><span class="special">)</span><span class="emphasis"><em>]</em></span>
        <span class="emphasis"><em>[</em></span><span class="special">(</span><span class="keyword">static</span><span class="special">)</span><span class="emphasis"><em>]</em></span> <span class="emphasis"><em>[</em></span><span class="special">(</span><span class="keyword">virtual</span><span class="special">)</span><span class="emphasis"><em>]</em></span>
        <span class="special">(</span><span class="emphasis"><em>result-type</em></span><span class="special">)</span> <span class="special">(</span><span class="emphasis"><em>function-name</em></span><span class="special">)(</span><span class="emphasis"><em>parameter-list</em></span><span class="special">)</span>
        <span class="emphasis"><em>[</em></span><span class="special">(</span><span class="keyword">const</span><span class="special">)</span><span class="emphasis"><em>]</em></span> <span class="emphasis"><em>[</em></span><span class="special">(</span><span class="keyword">volatile</span><span class="special">)</span><span class="emphasis"><em>]</em></span>
</pre>
<p>
        However, not all these features apply to local functions:
      </p>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                <p>
                  C++ Function Feature
                </p>
              </th>
<th>
                <p>
                  Local Function Support
                </p>
              </th>
<th>
                <p>
                  Rationale
                </p>
              </th>
</tr></thead>
<tbody>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="special">(</span><span class="keyword">export</span><span class="special">)</span></code>
                </p>
              </td>
<td>
                <p>
                  No
                </p>
              </td>
<td>
                <p>
                  This is not supported because local functions cannot be templates
                  (plus most C++ compilers do not implement <code class="computeroutput"><span class="keyword">export</span></code>).
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="special">(</span><span class="keyword">template</span><span class="special">)(</span></code><span class="emphasis"><em>template-parameter-list</em></span><code class="computeroutput"><span class="special">)</span></code>
                </p>
              </td>
<td>
                <p>
                  No
                </p>
              </td>
<td>
                <p>
                  This is not supported because local functions are implemented using
                  local classes and C++ local classes cannot be templates.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="special">(</span><span class="identifier">requires</span><span class="special">)(</span></code><span class="emphasis"><em>concept-list</em></span><code class="computeroutput"><span class="special">)</span></code>
                </p>
              </td>
<td>
                <p>
                  No
                </p>
              </td>
<td>
                <p>
                  This library could internally use <a href="http://www.boost.org/doc/libs/release/libs/concept_check/doc/index.html" target="_top">Boost.ConceptCheck</a>
                  to check the concepts specified by using the parenthesized syntax.
                  However, concept checking is not supported because local functions
                  cannot be templates.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="special">(</span><span class="keyword">explicit</span><span class="special">)</span></code>
                </p>
              </td>
<td>
                <p>
                  No
                </p>
              </td>
<td>
                <p>
                  This is not supported because local functions are not constructors.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="special">(</span><span class="keyword">inline</span><span class="special">)</span></code>
                </p>
              </td>
<td>
                <p>
                  Yes
                </p>
              </td>
<td>
                <p>
                  This is supported (see the <a class="link" href="Advanced.html" title="Advanced">Advanced</a>
                  section).
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="special">(</span><span class="keyword">extern</span><span class="special">)</span></code>
                </p>
              </td>
<td>
                <p>
                  No
                </p>
              </td>
<td>
                <p>
                  This is not supported because local functions are always defined
                  locally within the enclosing scope and together with their declarations.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="special">(</span><span class="keyword">static</span><span class="special">)</span></code>
                </p>
              </td>
<td>
                <p>
                  No
                </p>
              </td>
<td>
                <p>
                  This is not supported because local functions are not member functions.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="special">(</span><span class="keyword">virtual</span><span class="special">)</span></code>
                </p>
              </td>
<td>
                <p>
                  No
                </p>
              </td>
<td>
                <p>
                  This is not supported because local functions are not member functions.
                </p>
                <p>
                  In theory, it would be possible for a local functor class to inherit
                  from another local functor class. The parenthesized syntax could
                  be extended to specify the eventual base local functor class within
                  the parenthesized signature (e.g., using <code class="computeroutput"><span class="special">...</span>
                  <span class="special">(</span><span class="identifier">extends</span><span class="special">)(</span></code><span class="emphasis"><em>base</em></span><code class="computeroutput"><span class="special">)</span></code>). However, this "inheritance"
                  feature is not implemented because it seems of <a href="http://lists.boost.org/Archives/boost/2010/09/170895.php" target="_top">no
                  use</a> given that local functions can be bound to one another
                  thus they can simply call each other directly without recurring
                  to dynamic binding or base function call.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="special">(</span></code><span class="emphasis"><em>result-type</em></span><code class="computeroutput"><span class="special">)</span></code>
                </p>
              </td>
<td>
                <p>
                  Yes
                </p>
              </td>
<td>
                <p>
                  This is supported (see the <a class="link" href="Tutorial.html" title="Tutorial">Tutorial</a>
                  section).
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="special">(</span></code><span class="emphasis"><em>function-name</em></span><code class="computeroutput"><span class="special">)</span></code>
                </p>
              </td>
<td>
                <p>
                  Yes
                </p>
              </td>
<td>
                <p>
                  This is supported but it cannot be overloaded and it cannot be
                  an operator (see the <a class="link" href="Tutorial.html" title="Tutorial">Tutorial</a>
                  and <a class="link" href="Advanced.html" title="Advanced">Advanced</a> sections).
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="special">(</span></code><span class="emphasis"><em>parameter-list</em></span><code class="computeroutput"><span class="special">)</span></code>
                </p>
              </td>
<td>
                <p>
                  Yes
                </p>
              </td>
<td>
                <p>
                  This is supported and it also supports the <code class="computeroutput"><span class="keyword">auto</span></code>
                  and <code class="computeroutput"><span class="keyword">register</span></code> parameter
                  classifiers, default parameters, and binding of variables in scope
                  (see the <a class="link" href="Tutorial.html" title="Tutorial">Tutorial</a> and
                  <a class="link" href="Advanced.html" title="Advanced">Advanced</a> sections).
                </p>
                <p>
                  In addition, the parenthesized syntax could support named parameters
                  introducing the "keywords" <code class="computeroutput"><span class="special">(</span><span class="identifier">in</span><span class="special">)</span></code>,
                  <code class="computeroutput"><span class="special">(</span><span class="identifier">out</span><span class="special">)</span></code>, <code class="computeroutput"><span class="special">(</span><span class="identifier">inout</span><span class="special">)</span></code>,
                  and then using <a href="http://www.boost.org/doc/libs/release/libs/parameter/doc/index.html" target="_top">Boost.Paramater</a>
                  to internally implement named parameters. However, local functions
                  cannot be templates so they cannot be used with <a href="http://www.boost.org/doc/libs/release/libs/parameter/doc/index.html" target="_top">Boost.Paramater</a>
                  thus named parameters are not supported for local functions.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  Trailing <code class="computeroutput"><span class="special">(</span><span class="keyword">const</span><span class="special">)</span></code>
                </p>
              </td>
<td>
                <p>
                  No
                </p>
              </td>
<td>
                <p>
                  This is not supported because local functions are not member functions.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  Trailing <code class="computeroutput"><span class="special">(</span><span class="keyword">volatile</span><span class="special">)</span></code>
                </p>
              </td>
<td>
                <p>
                  No
                </p>
              </td>
<td>
                <p>
                  This is not supported because local functions are not member functions.
                </p>
              </td>
</tr>
</tbody>
</table></div>
</div>
<div class="footnotes">
<br><hr width="100" align="left">
<div class="footnote"><p><sup>[<a id="ftn.id876264" href="#id876264" class="para">15</a>] </sup>
          We recognize that the use of the <span class="emphasis"><em>identity macros</em></span> adds
          extra parenthesis to the already significant number of parenthesis required
          by the parenthesized syntax. However, parenthesized signatures usually
          do not contain unwrapped commas "<code class="computeroutput"><span class="special">,</span></code>"
          (unless template metaprogramming is being used).
        </p></div>
<div class="footnote"><p><sup>[<a id="ftn.id880541" href="#id880541" class="para">16</a>] </sup>
            The suffix <code class="computeroutput"><span class="identifier">ref</span></code> of <code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">local</span><span class="special">::</span>function_ref</code> is meant
            to help programmers remember that they are dealing with references to
            (and not copies of) local functions.
          </p></div>
<div class="footnote"><p><sup>[<a id="ftn.id883056" href="#id883056" class="para">17</a>] </sup>
          <span class="bold"><strong>Rationale.</strong></span> Local functions are often named
          <code class="computeroutput"><span class="identifier">l</span></code> in the casual examples
          of this documentation because the name of the author starts with the letter
          "<code class="computeroutput"><span class="identifier">l</span></code>". <span class="inlinemediaobject"><img src="../../images/smiley.png" alt="smiley"></span>
        </p></div>
<div class="footnote"><p><sup>[<a id="ftn.id883457" href="#id883457" class="para">18</a>] </sup>
          <span class="bold"><strong>Rationale.</strong></span> This is because a local function
          is a functor object declared as a local variable within the enclosing scope.
          Therefore, declaring two local functions with the same name within the
          same enclosing scope declares two local variables with the same name within
          the same scope and that is not allowed in C++.
        </p></div>
<div class="footnote"><p><sup>[<a id="ftn.id883921" href="#id883921" class="para">19</a>] </sup>
          <span class="bold"><strong>Rationale.</strong></span> This is because within a nested
          code block only global or static variables can be accessed while <a href="http://www.boost.org/doc/libs/release/libs/scope_exit/doc/html/index.html" target="_top">Boost.ScopeExit</a>
          variable <a href="http://lists.boost.org/Archives/boost/2006/11/113658.php" target="_top">binding
          mechanism</a> requires to access local variables that hold the bound
          variables.
        </p></div>
<div class="footnote"><p><sup>[<a id="ftn.id884359" href="#id884359" class="para">20</a>] </sup>
          <span class="bold"><strong>Rationale.</strong></span> This is the because a local
          function name must be a valid local variable name (the local variable to
          hold the local functor object) and operators cannot be used as local variable
          names.
        </p></div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2009 -2011 Lorenzo Caminiti<p>
        Use, modification, and distribution is subject to the Boost Software License,
        Version 1.0 (see accompanying file LICENSE_1_0.txt or a copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>).
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="Tutorial.html"><img src="../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="../reference.html"><img src="../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
