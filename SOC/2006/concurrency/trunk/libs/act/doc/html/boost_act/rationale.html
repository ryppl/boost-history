<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Rationale</title><link rel="stylesheet" href="../../../doc/style/html/main.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.72.0" /><link rel="start" href="../index.html" title="Boost.Act" /><link rel="up" href="../index.html" title="Boost.Act" /><link rel="prev" href="interlocked/interlocked_support/extending_support.html" title="Extending Support" /><script type="text/javascript" src="../../../doc/javascript/main.js"></script>
      <script type="text/javascript" > <!--
         boostscript.init( new Array(
            boostscript.nested_links,
            boostscript.style_switcher,
            boostscript.common
         ),
         '../../../doc/javascript'
         );
      //--></script>

      <script type="text/javascript" > <!--
          boostscript.call( boostscript.style_switcher, 'include_alternate_stylesheets',
             '../../../doc/style/html/syntax.xml',
             '../../../doc/style/html'
          );
      //--></script>
<link rel="alternate stylesheet" type="text/css" title="Quickbook source" href="../../../doc/style/html/conversion/boostbook_to_quickbook.css" />
      <script type="text/javascript" > <!--
          boostscript.call( boostscript.style_switcher, 'load_user_stylesheet' );
      //--></script>
</head>
  <body>
    <div id="heading">
      <div id="heading-placard"></div>
      <div class="heading-navigation-box">
        <div class="nested-links-select-box" id="chapters_select_box">
      <script type="text/javascript" > <!--
         boostscript.call( boostscript.nested_links, 'select_box',
            'chapters_select_box',
            '../../../doc/chapters.xml',
            '../../../libs');
      //--></script>
</div>
        <div class="nested-links-select-box" id="sections_select_box">
      <script type="text/javascript" > <!--
         boostscript.call( boostscript.nested_links, 'select_box',
            'sections_select_box',
            '../sections.xml',
            '.././');
      //--></script>
</div>
      </div>
      <div class="search-box">
        <form id="cref" action="http://google.com/cse">
          <div class="search-box-label"></div>
          <div>
            <input type="hidden" name="cref" value="http://tinyurl.com/33np8c" />
            <input class="search-box" type="text" name="q" id="q" size="40" maxlength="255" alt="Search Text" />
          </div>
        </form>
      </div>
    </div>
    <div class="spirit-nav">
      <div class="spirit-nav-icon">
        <a accesskey="p" href="interlocked/interlocked_support/extending_support.html">
          <div class="prev-icon"></div>
        </a>
      </div>
      <div class="spirit-nav-icon">
        <a accesskey="u" href="../index.html">
          <div class="up-icon"></div>
        </a>
      </div>
      <div class="spirit-nav-icon">
        <a accesskey="h" href="../index.html">
          <div class="home-icon"></div>
        </a>
      </div>
    </div>
    <div id="body">
      <div id="body-inner">
        <div id="content">
          <div class="section">
            <div class="titlepage">
              <div>
                <div>
                  <h2 class="title"><a id="boost_act.rationale"></a><a href="rationale.html" title="Rationale">Rationale</a></h2>
                </div>
              </div>
            </div>
            <p>
      Boost.Act is a fairly large library and makes some controversial design decisions.
      This section is provided to briefly describe the rationale behind some of these
      decisions.
    </p>
            <a id="boost_act.rationale.interlocked_operation_names"></a>
            <h4><a id="id471129"></a>
      <a href="rationale.html#boost_act.rationale.interlocked_operation_names">Interlocked
      Operation Names</a>
    </h4>
            <p>
      Those familiar with lock-free programming may have noticed that the traditional
      "swap" and "compare-and-swap" operations are named <code class="computeroutput"><span class="identifier">assign</span></code> and <code class="computeroutput"><span class="identifier">assign_if_was</span></code>
      in <code class="literal">Boost.Act</code> respectively. This was done for several reasons.
      Firstly, the term "swap" already has a meaning in standard C++, and
      that is to swap the values of two objects in memory. The "swap" operation
      when refering to lock-free programming means to set the value of a variable
      and yield the old value. Note that this is very different from an atomic std::swap.
      Rather than keep this conflict in terms, it was decided that the term "assign"
      was a more accurate name, despite the fact that it is generally refered to
      as "swap," since the operation is actually just an atomic assignment
      which returns the old value rather than a reference to the modified object.
    </p>
            <p>
      Similarly, the "swap" in "compare-and-swap" is not the
      traditional C++ "swap" and is again more of an assignment operation
      which just yields the old value. What's more is, the name "compare-and-swap"
      does not give a very clear order of arguments, and indeed, different implementations
      often choose varying orders of those arguments. <code class="computeroutput"><span class="identifier">assign_if_was</span></code>,
      on the other hand, has an argument order which can be determined much less
      ambiguously from its name and the operation that is implied is much more clear
      from the name.
    </p>
            <p>
      There are still some down-sides to the name choice, and that is that <code class="computeroutput"><span class="identifier">assign</span></code> and <code class="computeroutput"><span class="identifier">assign_if_was</span></code>,
      along with the other <code class="literal">Interlocked Operations</code>, return the
      old value of the object being modified, whereas in C++ a reference to the object
      is generally returned (from which you may obtain the new value). Because of
      this, in future releases the names may be changed to have the traditional "fetch<span class="underline">and</span>" prefix, or possibly the return type will
      just be changed to an object with an "old_value()" member function,
      such that the function name itself is not verbous, and you only have to be
      explicit when you require the return value.
    </p>
          </div>
        </div>
        <div class="clear"></div>
      </div>
    </div>
    <div class="spirit-nav">
      <div class="spirit-nav-icon">
        <a accesskey="p" href="interlocked/interlocked_support/extending_support.html">
          <div class="prev-icon"></div>
        </a>
      </div>
      <div class="spirit-nav-icon">
        <a accesskey="u" href="../index.html">
          <div class="up-icon"></div>
        </a>
      </div>
      <div class="spirit-nav-icon">
        <a accesskey="h" href="../index.html">
          <div class="home-icon"></div>
        </a>
      </div>
    </div>
    <div id="footer">
      <div id="footer-left">
        <div id="copyright">
          <p>Copyright Â© 2006 , 2007 Matthew Calabrese</p>
        </div>
        <div id="license">
          <p>Distributed under the
                  <a href="/LICENSE_1_0.txt" class="internal">Boost Software License, Version 1.0</a>.
               </p>
        </div>
      </div>
      <div id="footer-right">
        <div id="banners">
          <p id="banner-xhtml">
            <a href="http://validator.w3.org/check?uri=referer" class="external">XHTML 1.0</a>
          </p>
          <p id="banner-css">
            <a href="http://jigsaw.w3.org/css-validator/check/referer" class="external">CSS</a>
          </p>
          <p id="banner-sourceforge">
            <a href="http://sourceforge.net" class="external">SourceForge</a>
          </p>
        </div>
      </div>
      <div class="clear"></div>
    </div>
  </body>
</html>
