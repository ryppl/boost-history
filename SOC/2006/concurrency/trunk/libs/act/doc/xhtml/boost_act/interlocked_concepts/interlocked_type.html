<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head xmlns="http://www.w3.org/1999/xhtml">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Interlocked Type</title>
    <link xmlns="" rel="stylesheet" href="../../boostbook.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.72.0" />
    <link rel="start" href="../../index.html" title="Boost.Act" />
    <link rel="up" href="../interlocked_concepts.html" title="Interlocked Concepts" />
    <link rel="prev" href="../interlocked_concepts.html" title="Interlocked Concepts" />
    <link rel="next" href="interlocked_arithmetic_type.html" title="Interlocked Arithmetic Type" />
  </head>
  <body>
    <div id="heading">
      <div id="heading-placard"></div>
      <div class="heading_navigation_box"></div>
      <div class="heading_search_box"></div>
    </div>
    <div class="spirit-nav">
      <a accesskey="p" href="../interlocked_concepts.html">
        <img src="../../../../doc/html/images/prev.png" alt="Prev" />
      </a>
      <a accesskey="u" href="../interlocked_concepts.html">
        <img src="../../../../doc/html/images/up.png" alt="Up" />
      </a>
      <a accesskey="h" href="../../index.html">
        <img src="../../../../doc/html/images/home.png" alt="Home" />
      </a>
      <a accesskey="n" href="interlocked_arithmetic_type.html">
        <img src="../../../../doc/html/images/next.png" alt="Next" />
      </a>
    </div>
    <div id="body">
      <div id="body-inner">
        <div id="content">
          <div xmlns="http://www.w3.org/1999/xhtml" class="section" lang="en" xml:lang="en">
            <div class="titlepage">
              <div>
                <div>
                  <h3 class="title"><a id="boost_act.interlocked_concepts.interlocked_type"></a><a href="interlocked_type.html" title="Interlocked Type">Interlocked
      Type</a></h3>
                </div>
              </div>
            </div>
            <p>
        An <code class="literal">Interlocked Type</code> is a type whose instances support
        thread-safe interlocked operations and which are often used in the implementation
        of lock-free code. On systems which support interlocked operations, all non-member
        and pointer types and some arithmetic types may be compliant <code class="literal">Interlocked
        Types</code> as well as some library-defined or user-defined types given
        that they support the required operations. For details on how to select and
        take advantage of such types, see the <span class="underline">_interlocked</span>_.
      </p>
            <p>
        In order to be considered a valid <code class="literal">Interlocked Type</code>, given
        the variable definitions below, the following expressions must be well-formed
        and have the indicated effects.
      </p>
            <div class="variablelist">
              <p class="title">
                <b>Interlocked Type Descriptive Variable Definitions</b>
              </p>
              <dl>
                <dt>
                  <span class="term">
                    <code class="computeroutput">
                      <span class="identifier">I</span>
                    </code>
                  </span>
                </dt>
                <dd>
          An <code class="literal">Interlocked Type</code>.
        </dd>
                <dt>
                  <span class="term">
                    <code class="computeroutput">
                      <span class="identifier">IV</span>
                    </code>
                  </span>
                </dt>
                <dd><code class="computeroutput"><span class="identifier">I</span> <span class="keyword">volatile</span></code>.
        </dd>
                <dt>
                  <span class="term">
                    <code class="computeroutput">
                      <span class="identifier">C1</span>
                    </code>
                  </span>
                </dt>
                <dd>
          A type which is convertible to <code class="computeroutput"><span class="identifier">IV</span></code>.
        </dd>
                <dt>
                  <span class="term">
                    <code class="computeroutput">
                      <span class="identifier">C2</span>
                    </code>
                  </span>
                </dt>
                <dd>
          A type which is convertible to <code class="computeroutput"><span class="identifier">IV</span></code>.
        </dd>
                <dt>
                  <span class="term">
                    <code class="computeroutput">
                      <span class="identifier">iv</span>
                    </code>
                  </span>
                </dt>
                <dd>
          Value of type <code class="computeroutput"><span class="identifier">I</span> <span class="keyword">volatile</span><span class="special">&amp;</span></code>.
        </dd>
                <dt>
                  <span class="term">
                    <code class="computeroutput">
                      <span class="identifier">c1</span>
                    </code>
                  </span>
                </dt>
                <dd>
          Value of type <code class="computeroutput"><span class="identifier">C1</span> <span class="keyword">const</span><span class="special">&amp;</span></code>.
        </dd>
                <dt>
                  <span class="term">
                    <code class="computeroutput">
                      <span class="identifier">c2</span>
                    </code>
                  </span>
                </dt>
                <dd>
          Value of type <code class="computeroutput"><span class="identifier">C2</span> <span class="keyword">const</span><span class="special">&amp;</span></code>.
        </dd>
              </dl>
            </div>
            <a id="boost_act.interlocked_concepts.interlocked_type.expression_requirements"></a>
            <h5><a id="id492901"></a>
        <a href="interlocked_type.html#boost_act.interlocked_concepts.interlocked_type.expression_requirements">Expression
        Requirements</a>
      </h5>
            <div xmlns="" class="note">
              <div class="admonition-graphic">
                <img alt="[Note]" src="../../../../doc/html/images/note.png" />
              </div>
              <div class="admonition-body">
                <div class="admonition-title">Note</div>
                <div class="admonition-content">
                  <p xmlns="http://www.w3.org/1999/xhtml">
          </p>
                  <p>
            In the following requirements, certain operations are listed as having
            <span class="emphasis"><em>acquire</em></span> memory semantics, <span class="emphasis"><em>release</em></span>
            memory semantics, or a <span class="emphasis"><em>full memory barrier</em></span>. Operations
            with <span class="emphasis"><em>acquire</em></span> memory semantics imply that the memory
            operation being performed by the current thread will be visible before
            any other memory operations are attempted. Operations with <span class="emphasis"><em>release</em></span>
            memory semantics imply that the memory operation being performed by the
            current thread will be visible after all other memory operations have
            been completed. Operations with a <span class="emphasis"><em>full memory barrier</em></span>
            imply that the memory operation being performed by the current thread
            enforces a strict ordering with both <span class="emphasis"><em>acqure</em></span> memory
            semantics and <span class="emphasis"><em>release</em></span> memory semantics. These specifications
            are merely a minimum requirement and therefore on certain systems, such
            operations which require <span class="emphasis"><em>acquire</em></span> memory semantics
            or <span class="emphasis"><em>release</em></span> memory semantics may be implemented with
            a <span class="emphasis"><em>full memory barrier</em></span>. For brevity, functions and
            templates are listed without qualification although they actually exist
            in in the namespace <code class="computeroutput"><span class="special">::</span><span class="identifier">boost</span><span class="special">::</span><span class="identifier">act</span><span class="special">::</span><span class="identifier">interlocked</span></code>.
          </p>
                  <p xmlns="http://www.w3.org/1999/xhtml">
        </p>
                </div>
              </div>
            </div>
            <div class="table">
              <a id="id493026"></a>
              <p class="title">
                <b>Table 4. Interlocked Type Requirements</b>
              </p>
              <div class="table-contents">
                <table xmlns="" class="table" summary="Interlocked Type Requirements">
                  <colgroup>
                    <col xmlns="http://www.w3.org/1999/xhtml"></col>
                    <col xmlns="http://www.w3.org/1999/xhtml"></col>
                    <col xmlns="http://www.w3.org/1999/xhtml"></col>
                  </colgroup>
                  <thead xmlns="http://www.w3.org/1999/xhtml">
                    <tr>
                      <th>
            <p>
              Expression
            </p>
            </th>
                      <th>
            <p>
              Return Type
            </p>
            </th>
                      <th>
            <p>
              Pre/Post-Condition
            </p>
            </th>
                    </tr>
                  </thead>
                  <tbody xmlns="http://www.w3.org/1999/xhtml">
                    <tr>
                      <td>
            <p>
              <code class="computeroutput"><span class="identifier">I</span><span class="special">()</span></code>
            </p>
            </td>
                      <td>
            <p>
            </p>
            </td>
                      <td>
            <p>
              Constructs an instance of <code class="computeroutput"><span class="identifier">I</span></code>
              with an unspecified initial value.
            </p>
            </td>
                    </tr>
                    <tr>
                      <td>
            <p>
              <code class="computeroutput"><span class="identifier">I</span> <span class="identifier">i</span>
              <span class="special">=</span> <span class="identifier">c1</span></code>
            </p>
            </td>
                      <td>
            <p>
            </p>
            </td>
                      <td>
            <p>
              Constructs an instance of <code class="computeroutput"><span class="identifier">I</span></code>
              with <code class="computeroutput"><span class="identifier">c1</span></code> as an initial
              value.
            </p>
            </td>
                    </tr>
                    <tr>
                      <td>
            <p>
              <code class="computeroutput"><span class="identifier">iv</span> <span class="special">=</span>
              <span class="identifier">c1</span></code>
            </p>
            </td>
                      <td>
            <p>
              <code class="computeroutput"><span class="identifier">I</span><span class="special">&amp;</span></code>
            </p>
            </td>
                      <td>
            <p>
              Stores the value of <code class="computeroutput"><span class="identifier">c1</span></code>
              to object <code class="computeroutput"><span class="identifier">i</span></code>. Returns
              a reference to <code class="computeroutput"><span class="identifier">iv</span></code>.
              <span class="emphasis"><em>Note: This is not an interlocked operation and does not imply
              a memory barrier of any kind. --end note</em></span>
            </p>
            </td>
                    </tr>
                    <tr>
                      <td>
            <p>
              <code class="computeroutput"><span class="identifier">assign</span><span class="special">(</span>
              <span class="identifier">iv</span><span class="special">,</span>
              <span class="identifier">c1</span> <span class="special">)</span></code>
            </p>
            </td>
                      <td>
            <p>
              <code class="computeroutput"><span class="identifier">assign_result</span><span class="special">&lt;</span><span class="identifier">IV</span><span class="special">&gt;::</span><span class="identifier">type</span></code>
            </p>
            </td>
                      <td>
            <p>
              Stores the value of <code class="computeroutput"><span class="identifier">c1</span></code>
              to object <code class="computeroutput"><span class="identifier">iv</span></code> with a
              <span class="emphasis"><em>full memory barrier</em></span>. Returns the value of <code class="computeroutput"><span class="identifier">iv</span></code> prior to the operation being performed.
            </p>
            </td>
                    </tr>
                    <tr>
                      <td>
            <p>
              <code class="computeroutput"><span class="identifier">assign_acquire</span><span class="special">(</span>
              <span class="identifier">iv</span><span class="special">,</span>
              <span class="identifier">c1</span> <span class="special">)</span></code>
            </p>
            </td>
                      <td>
            <p>
              <code class="computeroutput"><span class="identifier">assign_result</span><span class="special">&lt;</span><span class="identifier">IV</span><span class="special">&gt;::</span><span class="identifier">type</span></code>
            </p>
            </td>
                      <td>
            <p>
              Stores the value of <code class="computeroutput"><span class="identifier">c1</span></code>
              to object <code class="computeroutput"><span class="identifier">iv</span></code> with
              <span class="emphasis"><em>acquire</em></span> memory semantics. Returns the value of
              <code class="computeroutput"><span class="identifier">iv</span></code> prior to the operation
              being performed.
            </p>
            </td>
                    </tr>
                    <tr>
                      <td>
            <p>
              <code class="computeroutput"><span class="identifier">assign_if_was</span><span class="special">(</span>
              <span class="identifier">iv</span><span class="special">,</span>
              <span class="identifier">c1</span><span class="special">,</span>
              <span class="identifier">c2</span> <span class="special">)</span></code>
            </p>
            </td>
                      <td>
            <p>
              <code class="computeroutput"><span class="identifier">assign_if_was_result</span><span class="special">&lt;</span><span class="identifier">IV</span><span class="special">&gt;::</span><span class="identifier">type</span></code>
            </p>
            </td>
                      <td>
            <p>
              Stores the value of <code class="computeroutput"><span class="identifier">c1</span></code>
              to object <code class="computeroutput"><span class="identifier">iv</span></code> iff <code class="computeroutput"><span class="identifier">iv</span> <span class="special">==</span> <span class="identifier">c2</span></code> prior to the operation with a
              <span class="emphasis"><em>full memory barrier</em></span>. Returns the value of <code class="computeroutput"><span class="identifier">iv</span></code> prior to the operation being performed.
              <span class="emphasis"><em>Note: This is the same as the more commonly known "compare
              and swap" operation with a full memory barrier. --end note</em></span>
            </p>
            </td>
                    </tr>
                    <tr>
                      <td>
            <p>
              <code class="computeroutput"><span class="identifier">assign_if_was_acquire</span><span class="special">(</span> <span class="identifier">iv</span><span class="special">,</span> <span class="identifier">c1</span><span class="special">,</span> <span class="identifier">c2</span> <span class="special">)</span></code>
            </p>
            </td>
                      <td>
            <p>
              <code class="computeroutput"><span class="identifier">assign_if_was_result</span><span class="special">&lt;</span><span class="identifier">IV</span><span class="special">&gt;::</span><span class="identifier">type</span></code>
            </p>
            </td>
                      <td>
            <p>
              Stores the value of <code class="computeroutput"><span class="identifier">c1</span></code>
              to object <code class="computeroutput"><span class="identifier">iv</span></code> iff <code class="computeroutput"><span class="identifier">iv</span> <span class="special">==</span> <span class="identifier">c2</span></code> prior to the operation with <span class="emphasis"><em>aquire</em></span>
              memory semantics. Returns the value of <code class="computeroutput"><span class="identifier">iv</span></code>
              prior to the operation being performed. <span class="emphasis"><em>Note: This is the
              same as the more commonly known "compare and swap" operation
              with acquire memory semantics. --end note</em></span>
            </p>
            </td>
                    </tr>
                    <tr>
                      <td>
            <p>
              <code class="computeroutput"><span class="identifier">assign_if_was_release</span><span class="special">(</span> <span class="identifier">iv</span><span class="special">,</span> <span class="identifier">c1</span><span class="special">,</span> <span class="identifier">c2</span> <span class="special">)</span></code>
            </p>
            </td>
                      <td>
            <p>
              <code class="computeroutput"><span class="identifier">assign_if_was_result</span><span class="special">&lt;</span><span class="identifier">IV</span><span class="special">&gt;::</span><span class="identifier">type</span></code>
            </p>
            </td>
                      <td>
            <p>
              Stores the value of <code class="computeroutput"><span class="identifier">c1</span></code>
              to object <code class="computeroutput"><span class="identifier">iv</span></code> iff <code class="computeroutput"><span class="identifier">iv</span> <span class="special">==</span> <span class="identifier">c2</span></code> prior to the operation with <span class="emphasis"><em>release</em></span>
              memory semantics. Returns the value of <code class="computeroutput"><span class="identifier">iv</span></code>
              prior to the operation being performed. <span class="emphasis"><em>Note: This is the
              same as the more commonly known "compare and swap" operation
              with release memory semantics. --end note</em></span>
            </p>
            </td>
                    </tr>
                    <tr>
                      <td>
            <p>
              <code class="computeroutput"><span class="identifier">load</span><span class="special">(</span>
              <span class="identifier">iv</span> <span class="special">)</span></code>
            </p>
            </td>
                      <td>
            <p>
              <code class="computeroutput"><span class="identifier">I</span></code>
            </p>
            </td>
                      <td>
            <p>
              Returns the value of <code class="computeroutput"><span class="identifier">iv</span></code>.
              <span class="emphasis"><em>Note: This template is used for retrieving the value of an
              object with the guarantee that the value obtained will be the most
              recent value after any modifications done by other threads. The value
              is also guaranteed to not be only partially updated by another thread.
              --end note</em></span>
            </p>
            </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <br class="table-break" />
          </div>
        </div>
        <div class="clear"></div>
      </div>
    </div>
    <div class="spirit-nav">
      <a accesskey="p" href="../interlocked_concepts.html">
        <img src="../../../../doc/html/images/prev.png" alt="Prev" />
      </a>
      <a accesskey="u" href="../interlocked_concepts.html">
        <img src="../../../../doc/html/images/up.png" alt="Up" />
      </a>
      <a accesskey="h" href="../../index.html">
        <img src="../../../../doc/html/images/home.png" alt="Home" />
      </a>
      <a accesskey="n" href="interlocked_arithmetic_type.html">
        <img src="../../../../doc/html/images/next.png" alt="Next" />
      </a>
    </div>
    <div xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" id="footer">
      <div id="footer-left">
        <div id="copyright">
          <p>Copyright © 2006 , 2007 Matthew Calabrese</p>
        </div>
        <div id="license">
          <p>Distributed under the
                  <a href="/LICENSE_1_0.txt" class="internal">Boost Software License, Version 1.0</a>.
               </p>
        </div>
      </div>
      <div id="footer-right">
        <div id="banners">
          <p id="banner-xhtml">
            <a href="http://validator.w3.org/check?uri=referer" class="external">XHTML 1.0</a>
          </p>
          <p id="banner-css">
            <a href="http://jigsaw.w3.org/css-validator/check/referer" class="external">CSS</a>
          </p>
          <p id="banner-sourceforge">
            <a href="http://sourceforge.net" class="external">SourceForge</a>
          </p>
        </div>
      </div>
      <div class="clear"></div>
    </div>
  </body>
</html>
