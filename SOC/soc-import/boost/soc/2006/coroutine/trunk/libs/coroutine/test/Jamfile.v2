# (C) Copyright 2006: Eric Niebler
# Distributed under the Boost Software License, Version 1.0
# (See accompanying file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt

# bring in rules for testing
import testing ;
import os ;

if [ os.name ] = WINDOWS
{
        TARGET_SPECIFIC_DEFINE =
          "_WIN32_WINNT=0x0400"
          ;
}

project
    : requirements
      	<library>/boost/test//boost_unit_test_framework
      	<library>../build//boost_coroutine
      	<link>static
	<define>"_WIN32_WINNT=0x0400" #$(TARGET_SPECIFIC_DEFINE)
      	<include>../../..
      	<threading>multi
    ;

test-suite "coroutine"
    :
      [ run test_any.cpp ]
      [ run test_create.cpp ]
      [ run test_invoke.cpp ]
      [ run test_meta.cpp ]
      [ run test_optional.cpp ]
      [ run test_yield.cpp ]
      [ run test_yield_to.cpp ]
      [ run test_yield_to2.cpp ]
      [ run test_call.cpp ]
      [ run test_move.cpp ]
      [ run test_non_default_constructible.cpp ]
   ;

