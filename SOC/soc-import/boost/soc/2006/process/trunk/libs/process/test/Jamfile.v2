#
# Boost.Process
# Build script for tests.
#
# Copyright (c) 2006 Julio M. Merino Vidal.
#
# Use, modification, and distribution is subject to the Boost Software
# License, Version 1.0.  (See accompanying file LICENSE_1_0.txt or copy
# at http://www.boost.org/LICENSE_1_0.txt.)
#

using testing ;

project :
    : requirements
      # XXX These paths are incorrect.
      <include>../../../../boost
      <include>../../..

      # XXX Workaround to fix build problems under Windows.
      <define>BOOST_ALL_NO_LIB
      <define>BOOST_FILESYSTEM_STATIC_LINK
      <link>static
      <runtime-link>static
    ;

exe helpers
    : helpers.cpp
    : <library>../../../../boost//filesystem
    ;

test-suite process :
    [ compile include_attributes_test.cpp : : ]
    [ compile include_basic_attributes_test.cpp : : ]
    [ compile include_basic_child_test.cpp : : ]
    [ compile include_basic_process_test.cpp : : ]
    [ compile include_child_test.cpp : : ]
    [ compile include_command_line_test.cpp : : ]
    [ compile include_detail_pipe_test.cpp : : ]
    [ compile include_detail_systembuf_test.cpp : : ]
    [ compile include_exceptions_test.cpp : : ]
    [ compile include_forward_decls_test.cpp : : ]
    [ compile include_launcher_test.cpp : : ]
    [ compile include_pistream_test.cpp : : ]
    [ compile include_postream_test.cpp : : ]
    [ compile include_standard_launcher_test.cpp : : ]
    [ compile include_status_test.cpp : : ]
    [ compile include_top_test.cpp : : ]
    [ compile include_types_test.cpp : : ]

    [ run command_line_test.cpp
        :
        :
        : <library>../../../../boost//unit_test_framework
        ]

    [ run attributes_test.cpp
        :
        :
        : <library>../../../../boost//unit_test_framework
        ]

    [ run systembuf_test.cpp
        :
        :
        : <library>../../../../boost//unit_test_framework
        ]

    [ run pipe_test.cpp
        :
        :
        : <library>../../../../boost//unit_test_framework
        ]

    [ run pistream_test.cpp
        :
        :
        : <library>../../../../boost//unit_test_framework
        ]

    [ run postream_test.cpp
        :
        :
        : <library>../../../../boost//unit_test_framework
        ]

    [ run child_test.cpp
        : helpers
        : 
        : <library>../../../../boost//unit_test_framework
          <library>../../../../boost//filesystem
        ]

    [ run standard_launcher_test.cpp
        : helpers
        : 
        : <library>../../../../boost//unit_test_framework
        ]

    [ run status_test.cpp
        : helpers
        : 
        : <library>../../../../boost//unit_test_framework
        ]

    ;
