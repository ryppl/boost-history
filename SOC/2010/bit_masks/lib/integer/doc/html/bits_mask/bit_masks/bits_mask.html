<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>bits_mask</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
<link rel="home" href="../../index.html" title="Boost.Integer Bits Masks Extension">
<link rel="up" href="../../boost_integer_bits_masks_extension/bit_masks.html" title="Bit Masks">
<link rel="prev" href="../../low_bits_mask/bit_masks/low_bits_mask.html" title="low_bits_mask">
<link rel="next" href="../../bit_width/bit_masks/bit_width.html" title="bit_width">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../../low_bits_mask/bit_masks/low_bits_mask.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../../boost_integer_bits_masks_extension/bit_masks.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="../../bit_width/bit_masks/bit_width.html"><img src="../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="bits_mask.bit_masks.bits_mask"></a><a class="link" href="bits_mask.html" title="bits_mask"> bits_mask</a>
</h3></div></div></div>
<a name="bits_mask.bit_masks.bits_mask.description"></a><h4>
<a name="id2996438"></a>
        <a class="link" href="bits_mask.html#bits_mask.bit_masks.bits_mask.description">Description</a>
      </h4>
<p>
        The <code class="computeroutput"><span class="identifier">bits_mask</span></code> template provides
        an extention to the <code class="computeroutput"><span class="identifier">low_bits_mask</span></code>
        template, by incorporating an <code class="computeroutput"><span class="identifier">Offset</span></code>
        with the template. The <code class="computeroutput"><span class="identifier">offest</span></code>
        is always relative to the right most bit, or bit 0. For a basic view of how
        <code class="computeroutput"><span class="identifier">bits_mask</span></code> works consider
        the following examples:
      </p>
<p>
        
</p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">bits_mask</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span> <span class="number">10</span><span class="special">,</span> <span class="number">3</span><span class="special">&gt;</span> <span class="identifier">mask</span><span class="special">;</span>
<span class="comment">// mask::value has the following binary value
</span><span class="comment">// 0000 0000  0000 0000  0001 1100  0000 0000
</span></pre>
<p>
        For simplicity there is a defualt parameter for <code class="computeroutput"><span class="identifier">Width</span></code>
        giving it a value of <code class="computeroutput"><span class="number">1</span></code>. This
        makes writing of normally left or right shift masks simple and staticly checkable.
        For example,
      </p>
<p>
        
</p>
<pre class="programlisting"><span class="comment">// If one would need to create a mask for checking the 11th bit within an
</span><span class="comment">// integer it can be done simple with the following mask
</span><span class="keyword">typedef</span> <span class="identifier">bits_mask</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span><span class="number">11</span><span class="special">&gt;</span> <span class="identifier">mask</span><span class="special">;</span>
<span class="comment">// this creates a mask at the 11th bit within an integer.
</span></pre>
<p>
      </p>
<a name="bits_mask.bit_masks.bits_mask.header_file_information"></a><h4>
<a name="id2996664"></a>
        <a class="link" href="bits_mask.html#bits_mask.bit_masks.bits_mask.header_file_information">Header
        File Information</a>
      </h4>
<p>
        
</p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">integer</span><span class="special">/</span><span class="identifier">bits_mask</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
</pre>
<p>
      </p>
<a name="bits_mask.bit_masks.bits_mask.template_signature"></a><h4>
<a name="id2996735"></a>
        <a class="link" href="bits_mask.html#bits_mask.bit_masks.bits_mask.template_signature">Template
        Signature</a>
      </h4>
<p>
        <code class="computeroutput"><span class="identifier">bits_mask</span></code> has the following
        template signature: 
</p>
<pre class="programlisting"><span class="keyword">namespace</span> <span class="identifier">boost</span> <span class="special">{</span>
<span class="keyword">template</span> <span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">T</span><span class="special">,</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="identifier">Offset</span><span class="special">,</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="identifier">Width</span> <span class="special">=</span> <span class="number">1u</span> <span class="special">&gt;</span> <span class="keyword">struct</span> <span class="identifier">bits_mask</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
      </p>
<a name="bits_mask.bit_masks.bits_mask.bit_mask_hierarchy"></a><h4>
<a name="id2996881"></a>
        <a class="link" href="bits_mask.html#bits_mask.bit_masks.bits_mask.bit_mask_hierarchy">Bit Mask
        Hierarchy</a>
      </h4>
<p>
        <code class="computeroutput"><span class="identifier">bits_mask</span></code> inherits from
        <code class="computeroutput"><span class="identifier">integral_mask</span></code>.
      </p>
<a name="bits_mask.bit_masks.bits_mask.template_parameters"></a><h4>
<a name="id2996921"></a>
        <a class="link" href="bits_mask.html#bits_mask.bit_masks.bits_mask.template_parameters">Template
        Parameters</a>
      </h4>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                <p>
                  Parameter
                </p>
              </th>
<th>
                <p>
                  Description
                </p>
              </th>
</tr></thead>
<tbody>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">T</span></code>
                </p>
              </td>
<td>
                <p>
                  Is an integral type which the mask is to be created over.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">Offset</span></code>
                </p>
              </td>
<td>
                <p>
                  This is the number of bits from the least significant bit to the
                  first bit being used to compose the mask. Another way to think
                  of this is the amount that the mask has been shifted to the left
                  (using the left shift operator).
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">Width</span></code>
                </p>
              </td>
<td>
                <p>
                  This is the width of the mask in bits. <code class="computeroutput"><span class="identifier">Width</span></code>
                  has a default value of <code class="computeroutput"><span class="number">1u</span></code>
                  so that <code class="computeroutput"><span class="identifier">bits_mask</span></code>
                  can be easily used to create boolean flags by providing only an
                  <code class="computeroutput"><span class="identifier">Offset</span></code> to the bit.
                </p>
              </td>
</tr>
</tbody>
</table></div>
<a name="bits_mask.bit_masks.bits_mask.preconditions"></a><h4>
<a name="id2997094"></a>
        <a class="link" href="bits_mask.html#bits_mask.bit_masks.bits_mask.preconditions">Preconditions</a>
      </h4>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                <p>
                  Precondition
                </p>
              </th>
<th>
                <p>
                  Description
                </p>
              </th>
<th>
                <p>
                  Enforcement
                </p>
              </th>
</tr></thead>
<tbody>
<tr>
<td>
                <p>
                </p>
              </td>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">T</span></code> must be an integral
                  type.
                </p>
              </td>
<td>
                <p>
                  This is only a documented precondition. It is not enforced.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="special">(</span><span class="identifier">Offset</span>
                  <span class="special">+</span> <span class="identifier">Width</span><span class="special">)</span> <span class="special">&lt;=</span>
                  <span class="special">(</span> <span class="identifier">bit_width</span><span class="special">&lt;</span><span class="identifier">T</span><span class="special">&gt;::</span><span class="identifier">value</span>
                  <span class="special">)</span></code>
                </p>
              </td>
<td>
                <p>
                  The <code class="computeroutput"><span class="identifier">Width</span> <span class="special">+</span>
                  <span class="identifier">Offset</span></code> must be less then
                  or equal to the number of bits within the integral type <code class="computeroutput"><span class="identifier">T</span></code>
                </p>
              </td>
<td>
                <p>
                  Enforced by static assert.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  Valid range for mask width is &gt; 0.
                </p>
              </td>
<td>
                <p>
                  The <code class="computeroutput"><span class="identifier">Width</span></code> of a
                  mask must not be zero. Because <code class="computeroutput"><span class="identifier">Width</span></code>
                  is of <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">size_t</span></code> it can not be negative.
                </p>
              </td>
<td>
                <p>
                  Enforced by domain of template parameter and by static assert.
                </p>
              </td>
</tr>
</tbody>
</table></div>
<a name="bits_mask.bit_masks.bits_mask.interface"></a><h4>
<a name="id2997370"></a>
        <a class="link" href="bits_mask.html#bits_mask.bit_masks.bits_mask.interface">Interface</a>
      </h4>
<p>
        <code class="computeroutput"><span class="identifier">bits_mask</span></code> Compile time interface.
        Assume that <code class="computeroutput"><span class="identifier">N</span></code> is of type
        <code class="computeroutput"><span class="identifier">bits_mask</span><span class="special">&lt;</span><span class="keyword">unsigned</span> <span class="keyword">int</span><span class="special">,</span><span class="number">4</span><span class="special">,</span><span class="number">1</span><span class="special">&gt;</span></code> the type
        supplied here is only for example.
      </p>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                <p>
                  Operation
                </p>
              </th>
<th>
                <p>
                  Description
                </p>
              </th>
</tr></thead>
<tbody>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">N</span><span class="special">::</span><span class="identifier">value</span></code>
                </p>
              </td>
<td>
                <p>
                  Returns the <code class="computeroutput"><span class="identifier">value</span></code>
                  associated with <code class="computeroutput"><span class="identifier">N</span></code>.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">N</span><span class="special">::</span><span class="identifier">value_type</span></code>
                </p>
              </td>
<td>
                <p>
                  Returns <code class="computeroutput"><span class="identifier">T</span></code> which
                  is the type associated with <code class="computeroutput"><span class="identifier">value</span></code>
                  inside <code class="computeroutput"><span class="identifier">N</span></code>.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">N</span><span class="special">::</span><span class="identifier">type</span></code>
                </p>
              </td>
<td>
                <p>
                  Returns the current types type.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">N</span><span class="special">::</span><span class="identifier">width</span></code>
                </p>
              </td>
<td>
                <p>
                  Returns the integral value associated with the <code class="computeroutput"><span class="identifier">width</span></code>
                  template parameter.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="identifier">N</span><span class="special">::</span><span class="identifier">offset</span></code>
                </p>
              </td>
<td>
                <p>
                  Returns the integral value associated with the <code class="computeroutput"><span class="identifier">Offset</span></code>
                  template parameter.
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  <code class="computeroutput"><span class="keyword">operator</span> <span class="identifier">T</span><span class="special">()</span></code>
                </p>
              </td>
<td>
                <p>
                  Run time support function. All this function does is return the
                  value associated with the type.
                </p>
              </td>
</tr>
</tbody>
</table></div>
<a name="bits_mask.bit_masks.bits_mask.examples"></a><h4>
<a name="id2997762"></a>
        <a class="link" href="bits_mask.html#bits_mask.bit_masks.bits_mask.examples">Examples</a>
      </h4>
<p>
        Examples and use cases related to the <code class="computeroutput"><span class="identifier">bits_mask</span></code>
        template.
      </p>
<p>
        Example:
      </p>
<p>
        Single bit mask using the default parameter for width. 
</p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">bits_mask</span><span class="special">&lt;</span> <span class="keyword">int</span><span class="special">,</span> <span class="number">0</span> <span class="special">&gt;</span> <span class="identifier">mask</span><span class="special">;</span>
<span class="comment">// mask in this case has the following value
</span><span class="comment">// 0000 0000  0000 0000  0000 0000  0000 0001
</span>
<span class="keyword">int</span> <span class="identifier">some_bit_value</span> <span class="special">=</span> <span class="number">0xdeadbeef</span><span class="special">;</span>

<span class="comment">// now testing to see if the zero bit is set in some_bit_value
</span><span class="keyword">if</span><span class="special">(</span><span class="identifier">some_bit_value</span> <span class="special">&amp;</span> <span class="identifier">mask</span><span class="special">()</span> <span class="special">)</span> <span class="special">{</span>
    <span class="special">...</span>
    <span class="keyword">true</span> <span class="keyword">case</span>
    <span class="special">...</span>
<span class="special">}</span> <span class="keyword">else</span> <span class="special">{</span>
    <span class="special">...</span>
    <span class="keyword">false</span> <span class="keyword">case</span>
    <span class="special">...</span>
<span class="special">}</span>
</pre>
<p>
      </p>
<p>
        Here is another case where the <code class="computeroutput"><span class="identifier">bits_mask</span></code>
        template is used used similar to a bit field. The goal in this case would
        be to extract a single value from within an integral storage type, which
        may be storing one or more values.
      </p>
<p>
        
</p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">bits_mask</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">,</span><span class="number">10</span><span class="special">,</span><span class="number">3</span><span class="special">&gt;</span> <span class="identifier">mask</span><span class="special">;</span>
<span class="comment">// binary value of mask
</span><span class="comment">// 0000 0000  0000 0000  0001 1111  1111 1000
</span>
<span class="comment">// this will then be used to retrieve a value within an integer.
</span><span class="keyword">int</span> <span class="identifier">some_bit_value</span> <span class="special">=</span> <span class="number">0xdeadbeef</span><span class="special">;</span>
<span class="comment">// binary value of some_bit_value
</span><span class="comment">// 1101 1110  1010 1011  1011 1110  1110 1111
</span>
<span class="comment">// now to extract the value from within some_bit_value
</span><span class="keyword">int</span> <span class="identifier">new_int_value</span> <span class="special">=</span> <span class="special">(</span> <span class="identifier">some_bit_value</span> <span class="special">&amp;</span> <span class="identifier">mask</span><span class="special">()</span> <span class="special">)</span> <span class="special">&gt;&gt;</span> <span class="identifier">mask</span><span class="special">::</span><span class="identifier">offset</span><span class="special">;</span>

<span class="comment">// basic operations taking place.
</span><span class="comment">// 1101 1110  1010 1011  1011 1110  1110 1111 &lt;- some_bit_value
</span><span class="comment">// 0000 0000  0000 0000  0001 1111  1111 1000 &lt;- mask::value
</span>
<span class="comment">// preforming bitwise and operator.
</span>
<span class="comment">// 0000 0000  0000 0000  0001 1110  1110 1000 &lt;- result of bitwise and operator
</span><span class="comment">// preform right shift operation.
</span><span class="comment">// 0000 0000  0000 0000  0000 0011  1101 1101 &lt;- value of new_int_value. 
</span></pre>
<p>
      </p>
<p>
        The implicit cast operator allows for simplicity, clarity of code. In the
        above example <code class="computeroutput"><span class="identifier">mask</span><span class="special">()</span></code>
        could be replaced with <code class="computeroutput"><span class="identifier">mask</span><span class="special">::</span><span class="identifier">value</span></code>
        to achieve the same result. The same applies to all other bitwise operators.
      </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2010 Brian Bartman<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../../low_bits_mask/bit_masks/low_bits_mask.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../../boost_integer_bits_masks_extension/bit_masks.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="../../bit_width/bit_masks/bit_width.html"><img src="../../images/next.png" alt="Next"></a>
</div>
</body>
</html>
