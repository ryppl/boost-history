<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Description</title>
<link rel="stylesheet" href="../../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
<link rel="home" href="../../../index.html" title="Boost.Integer Bits Masks Extension">
<link rel="up" href="../overview.html" title="overview">
<link rel="prev" href="../overview.html" title="overview">
<link rel="next" href="motivation.html" title="Motivation">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../overview.html"><img src="../../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../overview.html"><img src="../../../images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../images/home.png" alt="Home"></a><a accesskey="n" href="motivation.html"><img src="../../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="boost_integer_bits_masks_extension.bitfield_tuple.overview.description"></a><a class="link" href="description.html" title="Description">Description</a>
</h4></div></div></div>
<p>
          A <code class="computeroutput"><span class="identifier">bitfield_tuple</span></code> is a type
          that provides access to bitfields stored within integral or integral like
          types. The interface of this type is similar to that of a tuple, with slight
          variations on the template parameters and <code class="computeroutput"><span class="identifier">get</span></code>
          function, while still providing similar functionality to the boost.tuple.
          A piratical example for using a <code class="computeroutput"><span class="identifier">bitfield_tuple</span></code>
          could be for storing colors. 
</p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">integer</span><span class="special">/</span><span class="identifier">bitfield_tuple</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="identifier">boost</span><span class="special">;</span>
<span class="keyword">struct</span> <span class="identifier">red</span><span class="special">;</span>
<span class="keyword">struct</span> <span class="identifier">green</span><span class="special">;</span>
<span class="keyword">struct</span> <span class="identifier">blue</span><span class="special">;</span>


<span class="keyword">typedef</span> <span class="identifier">bitfield_tuple</span><span class="special">&lt;</span>
    <span class="identifier">storage</span><span class="special">&lt;</span><span class="keyword">unsigned</span> <span class="keyword">short</span><span class="special">&gt;,</span>
    <span class="identifier">member</span><span class="special">&lt;</span><span class="keyword">unsigned</span> <span class="keyword">char</span><span class="special">,</span> <span class="identifier">red</span><span class="special">,</span><span class="number">5</span><span class="special">&gt;,</span>
    <span class="identifier">member</span><span class="special">&lt;</span><span class="keyword">unsigned</span> <span class="keyword">char</span><span class="special">,</span> <span class="identifier">green</span><span class="special">,</span> <span class="number">6</span><span class="special">&gt;,</span>
    <span class="identifier">member</span><span class="special">&lt;</span><span class="keyword">unsigned</span> <span class="keyword">char</span><span class="special">,</span> <span class="identifier">blue</span><span class="special">,</span> <span class="number">5</span><span class="special">&gt;</span>
<span class="special">&gt;</span>                       <span class="identifier">rgb565_t</span> <span class="special">;</span>
</pre>
<p>
          To use the storage of bitfield_tuple for retrieving and storing data, all
          that needs to be done is to call <code class="computeroutput"><span class="identifier">get</span></code>,
          just like a Boost.Tuple. Each of the named parameters do something slightly
          different, in the above example <code class="computeroutput"><span class="identifier">storage</span><span class="special">&lt;</span><span class="keyword">unsigned</span> <span class="keyword">short</span><span class="special">&gt;</span></code>
          is used to specify that the type to be used for storing the bitfields within
          is going to be an unsigned short. The <code class="computeroutput"><span class="identifier">member</span><span class="special">&lt;</span><span class="keyword">unsigned</span> <span class="keyword">int</span><span class="special">,</span> <span class="identifier">red</span><span class="special">,</span> <span class="number">5</span><span class="special">&gt;</span></code>
          member is used to specify a bitfield within the <code class="computeroutput"><span class="identifier">bitfield_tuple</span></code>.
          Here is how <code class="computeroutput"><span class="identifier">member</span></code> works,
          and relates directly back to regular recognizable C++.
        </p>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                  <p>
                    <code class="computeroutput"><span class="identifier">bitfield_tuple</span></code>
                  </p>
                </th>
<th>
                  <p>
                    <code class="computeroutput"><span class="identifier">classic</span> <span class="identifier">Struct</span>
                    <span class="identifier">Example</span></code>
                  </p>
                </th>
</tr></thead>
<tbody><tr>
<td>
                  <p>
                    
</p>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">integer</span><span class="special">/</span><span class="identifier">bitfield_tuple</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>

<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="identifier">boost</span><span class="special">;</span>

<span class="keyword">struct</span> <span class="identifier">red</span><span class="special">;</span>
<span class="keyword">struct</span> <span class="identifier">green</span><span class="special">;</span>
<span class="keyword">struct</span> <span class="identifier">blue</span><span class="special">;</span>

<span class="keyword">typedef</span> <span class="identifier">bitfield_tuple</span><span class="special">&lt;</span>
    <span class="special">...</span>
    <span class="identifier">member</span><span class="special">&lt;</span><span class="keyword">unsigned</span> <span class="keyword">char</span><span class="special">,</span> <span class="identifier">red</span><span class="special">,</span><span class="number">5</span><span class="special">&gt;,</span>
    <span class="special">...</span>
<span class="special">&gt;</span> <span class="identifier">rgb656_t</span>
</pre>
<p>
                  </p>
                </td>
<td>
                  <p>
                    
</p>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"><span class="keyword">struct</span> <span class="identifier">rgb656_t</span> <span class="special">{</span>
    <span class="special">...</span>
    <span class="keyword">unsigned</span> <span class="keyword">char</span> <span class="identifier">red</span><span class="special">:</span><span class="number">5</span><span class="special">;</span>
    <span class="special">...</span>
<span class="special">};</span>
</pre>
<p>
                  </p>
                </td>
</tr></tbody>
</table></div>
<p>
          Observing the above example <code class="computeroutput"><span class="identifier">member</span><span class="special">&lt;</span><span class="keyword">unsigned</span> <span class="keyword">char</span><span class="special">,</span> <span class="identifier">red</span><span class="special">,</span><span class="number">5</span><span class="special">&gt;,</span></code>
          and <code class="computeroutput"><span class="keyword">unsigned</span> <span class="keyword">char</span>
          <span class="identifier">red</span><span class="special">:</span><span class="number">5</span><span class="special">;</span></code> are specified
          in almost the exact same way. First parameter in <code class="computeroutput"><span class="identifier">member</span></code>
          relates directly to the <code class="computeroutput"><span class="keyword">unsigned</span>
          <span class="keyword">char</span></code> type used in the bitfield
          <code class="computeroutput"><span class="identifier">red</span></code> in the struct above.
          The second parameter of member <code class="computeroutput"><span class="identifier">red</span></code>
          which is in the above using a bitfield is a type, and the the struct rgb656_t
          it's the name of the variable. The second parameter for member is also
          a name for the bitfield it corresponds to and can be used with the get
          function to retrieve the bitfield its being associated with. The third
          parameter is the width of the bitfield in bits just as it is specified
          using <code class="computeroutput"><span class="special">:</span><span class="number">5</span></code>
          in the above example. Accessing of bitfields can be done either by index
          or by name. If one chooses to retrieve a bitfield by index, the index value
          is based on the other member which are specified before it. The following
          is an example of how to use both an index accessor and the name accessor,
          the two examples do the exact same thing.
        </p>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                  <p>
                    Access By Name
                  </p>
                </th>
<th>
                  <p>
                    Access By Index
                  </p>
                </th>
</tr></thead>
<tbody><tr>
<td>
                  <p>
                    
</p>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"><span class="keyword">int</span> <span class="identifier">main</span><span class="special">()</span> <span class="special">{</span>
    <span class="identifier">rgb565_t</span> <span class="identifier">rgb565</span><span class="special">;</span>

    <span class="identifier">rgb565</span><span class="special">.</span><span class="identifier">get</span><span class="special">&lt;</span><span class="identifier">red</span><span class="special">&gt;()</span> <span class="special">=</span> <span class="number">31</span><span class="special">;</span>
    <span class="identifier">rgb565</span><span class="special">.</span><span class="identifier">get</span><span class="special">&lt;</span><span class="identifier">green</span><span class="special">&gt;()</span> <span class="special">=</span> <span class="number">15</span><span class="special">;</span>
    <span class="identifier">rgb565</span><span class="special">.</span><span class="identifier">get</span><span class="special">&lt;</span><span class="identifier">blue</span><span class="special">&gt;()</span> <span class="special">=</span> <span class="number">12</span><span class="special">;</span>

    <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
                  </p>
                </td>
<td>
                  <p>
                    
</p>
<pre xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="table-programlisting"><span class="keyword">int</span> <span class="identifier">main</span><span class="special">()</span> <span class="special">{</span>
    <span class="identifier">rgb565_t</span> <span class="identifier">rgb565</span><span class="special">;</span>

    <span class="identifier">rgb565</span><span class="special">.</span><span class="identifier">get</span><span class="special">&lt;</span><span class="number">0</span><span class="special">&gt;()</span> <span class="special">=</span> <span class="number">31</span><span class="special">;</span>
    <span class="identifier">rgb565</span><span class="special">.</span><span class="identifier">get</span><span class="special">&lt;</span><span class="number">1</span><span class="special">&gt;()</span> <span class="special">=</span> <span class="number">15</span><span class="special">;</span>
    <span class="identifier">rgb565</span><span class="special">.</span><span class="identifier">get</span><span class="special">&lt;</span><span class="number">2</span><span class="special">&gt;()</span> <span class="special">=</span> <span class="number">12</span><span class="special">;</span>

    <span class="keyword">return</span> <span class="number">0</span><span class="special">;</span>
<span class="special">}</span>
</pre>
<p>
                  </p>
                </td>
</tr></tbody>
</table></div>
<p>
          The <code class="computeroutput"><span class="identifier">bitfield_tuple</span></code> get
          functions return proxies to the bitfield they represent. Using a proxy
          provides a way for the user to access the bitfields directly without the
          hassle of doing the masking themselves.
        </p>
<p>
          There are many more complex examples to follow through out this documentation,
          but for the sake of brevity they are not listed within this section and
          are instead listed in the example section. Here is a brief description
          of the different things one can accomplish with the bitfield_tuple:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
            Bit stuffing pointers.
          </li>
<li class="listitem">
            Bit stuffing into integral types.
          </li>
<li class="listitem">
            Custom encoding and decoding of the storage of bits within an integral
            or integral like type.
          </li>
<li class="listitem">
            Using non-POD types for storage.
          </li>
</ul></div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2010 Brian Bartman<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../overview.html"><img src="../../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../overview.html"><img src="../../../images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../images/home.png" alt="Home"></a><a accesskey="n" href="motivation.html"><img src="../../../images/next.png" alt="Next"></a>
</div>
</body>
</html>
