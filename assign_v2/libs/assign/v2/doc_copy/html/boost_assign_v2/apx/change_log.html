<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Change log</title>
<link rel="stylesheet" href="../../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
<link rel="home" href="../../index.html" title="Chapter&#160;1.&#160;Boost.Assign 2.0">
<link rel="up" href="../apx.html" title="Appendix">
<link rel="prev" href="../apx.html" title="Appendix">
<link rel="next" href="help.html" title="Help">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../boost.png"></td>
<td align="center"><a href="../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../apx.html"><img src="../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../apx.html"><img src="../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="help.html"><img src="../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_assign_v2.apx.change_log"></a><a class="link" href="change_log.html" title="Change log">Change log</a>
</h3></div></div></div>
<div class="toc"><dl><dt><span class="section"><a href="change_log.html#boost_assign_v2.apx.change_log.v2">[Proposal for] Upgrading
        from Boost v1.4x : Boost.Assign 2.0</a></span></dt></dl></div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="boost_assign_v2.apx.change_log.v2"></a><a class="link" href="change_log.html#boost_assign_v2.apx.change_log.v2" title="[Proposal for] Upgrading from Boost v1.4x : Boost.Assign 2.0">[Proposal for] Upgrading
        from Boost v1.4x : Boost.Assign 2.0</a>
</h4></div></div></div>
<a name="boost_assign_v2.apx.change_log.v2.organization"></a><h6>
<a name="id36346961"></a>
          <a class="link" href="change_log.html#boost_assign_v2.apx.change_log.v2.organization">Organization</a>
        </h6>
<p>
          To form an impression about the upgrade, please read section <a class="link" href="../qs.html" title="Quickstart">Quick
          start</a>. To compare (non-exhaustively) the two versions, see section
          <a class="link" href="../../">Runtime efficiency</a>.
          Note that the two verions' interface don't clash, even though they serve
          a very similar purpose.
        </p>
<a name="boost_assign_v2.apx.change_log.v2.ref_framework"></a><h6>
<a name="id36347000"></a>
          <a class="link" href="change_log.html#boost_assign_v2.apx.change_log.v2.ref_framework">Ref-framework</a>
        </h6>
<p>
          A revision to the generating function <code class="computeroutput"><span class="identifier">ref_list_of</span><span class="special">&lt;&gt;()</span></code> and the addition of a tool for
          <a class="link" href="../util/chain.html" title="_chain">chaining</a> were the subject
          of a <a href="http://lists.boost.org/Archives/boost/2010/06/168028.php" target="_top">mini-review</a>,
          and carry through to <a href="../.././index.html" target="_top">Boost.Assign 2.0</a>.
        </p>
<a name="change_log_chain"></a><p>
          The first of these proposed changes was to eliminate the size template
          parameter of <code class="computeroutput"><span class="identifier">ref_list_of</span><span class="special">&lt;&gt;()</span></code>, as it is redundant with the
          number of arguments. It also fitted the returned container with <a href="http://www.boost.org/doc/libs/release/doc/html/array.html" target="_top">boost::array&lt;&gt;</a>'s
          richer functionality. Finally, a type of function, termed <span class="emphasis"><em>csv</em></span>,
          was introduced, as a more elegant alternative (but not a replacement) to
          multiple calls to a functor. The second feature, chaining, served as an
          alternative to a container-of-references' member function <code class="computeroutput"><span class="identifier">range</span><span class="special">()</span></code>.
        </p>
<p>
          Since the <a href="http://lists.boost.org/Archives/boost/2010/06/168028.php" target="_top">mini-review</a>,
          the proposal has been further improved. For instance, the dual interface,
          <code class="computeroutput"><span class="identifier">ref_list_of</span><span class="special">()</span></code>
          and <code class="computeroutput"><span class="identifier">cref_list_of</span><span class="special">()</span></code>
          is replaced by a single function, <a class="link" href="../ref/array.html" title="array"><code class="computeroutput"><span class="identifier">ref</span><span class="special">::</span><span class="identifier">array</span><span class="special">()</span></code></a>,
          that resolves lvalue/const-ness automatically, and likewise for chaining.
          Also, the latter now preserves the lvalue-ness of the chained ranges' elements.
          See the relevant <a class="link" href="../util/chain.html" title="_chain">section</a>.
        </p>
<a name="boost_assign_v2.apx.change_log.v2.miscellanea"></a><h6>
<a name="id36347174"></a>
          <a class="link" href="change_log.html#boost_assign_v2.apx.change_log.v2.miscellanea">Miscellanea</a>
        </h6>
<p>
          During the same <a href="http://lists.boost.org/Archives/boost/2010/06/168028.php" target="_top">mini-review</a>,
          it became apparent that the existing and proposed features lacked homogeneity
          in their interface, and that the relevance of the proposed one was insufficiently
          outlined in the documentation. Conversely, some newly introduced features,
          such as the already mentioned <span class="emphasis"><em>csv</em></span> functions, had received
          enough interest to warrant their generalization throughout the rest of
          the library. <a href="../.././index.html" target="_top">Boost.Assign 2.0</a> adresses
          these requests with a completly revised interface.
        </p>
<p>
          Another consensus was the request for exploiting <a href="http://www2.research.att.com/~bs/C++0xFAQ.html" target="_top">C++0x</a>'s
          features. In <a href="../.././index.html" target="_top">Boost.Assign 2.0</a>, functions
          are variadic and preserve the lvalue/const-ness of their arguments. Under
          <a href="http://en.wikipedia.org/wiki/C%2B%2B03" target="_top">C++03</a>, these
          aspects are controlled by <a class="link" href="../arity.html" title="Configuring arity">overridable
          constants</a> (macros).
        </p>
<p>
          Some confusion was voiced as to whether a nullary call to some container
          generator, <code class="computeroutput">f<span class="special">()</span></code>, is supposed
          to return a container that is empty or one that contains a default constructed
          value. The latter is the actual convention in <a href="../../../../../../../libs/assign/doc/index.html" target="_top">Boost.Assign
          1.0</a> and carries through to <a href="../.././index.html" target="_top">Boost.Assign
          2.0</a>, but a keyword, <a class="link" href="../nil.html" title="_nil">_nil </a>,
          is to be used to request an empty container.
        </p>
<a name="boost_assign_v2.apx.change_log.v2.put_framework"></a><h6>
<a name="id36347277"></a>
          <a class="link" href="change_log.html#boost_assign_v2.apx.change_log.v2.put_framework">Put-framework</a>
        </h6>
<p>
          The inception of this framework began after the <a href="http://lists.boost.org/Archives/boost/2010/06/168028.php" target="_top">mini-review</a>.
        </p>
<p>
          A central feature of the interface is <a class="link" href="../put.html#boost_assign_v2.put.pipe" title="operator|()"><code class="computeroutput"><span class="keyword">operator</span><span class="special">|()</span></code></a>,
          which emulates <a href="http://svn.boost.org/svn/boost/trunk/libs/range/doc/html/range/reference/adaptors.html" target="_top">range-adaptors</a>.
          The key to efficiency is to hold arguments on the right hand side of <code class="computeroutput"><span class="keyword">operator</span><span class="special">|</span></code>
          as references, a spillover from the work done in the <a class="link" href="../ref.html" title="Ref">ref-framework</a>.
          The other major addition is <a class="link" href="../put/modulo.html" title="operator%()"><code class="computeroutput"><span class="keyword">operator</span><span class="special">%</span></code></a>,
          for selectively overriding the default implementation.
        </p>
<p>
          In terms of code-reuse, while <code class="computeroutput"><span class="identifier">list_of</span><span class="special">()</span></code> and the <span class="emphasis"><em>list inserters</em></span>
          (e.g. <code class="computeroutput"><span class="identifier">push_back</span><span class="special">()</span></code>)
          are, under <a href="../../../../../../../libs/assign/doc/index.html" target="_top">Boost.Assign
          1.0</a>, independently implemented, their counterparts, under <a href="../.././index.html" target="_top">Boost.Assign 2.0</a>, <a class="link" href="../put/deque.html" title="Deque"><code class="computeroutput"><span class="identifier">deque</span><span class="special">()</span></code></a><sup>[<a name="id36347427" href="#ftn.id36347427" class="footnote">4</a>]</sup> and <a class="link" href="../put.html" title="Put"><code class="computeroutput">_put</code></a>,
          respectively, derive from a common <a href="http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern" target="_top">crtp</a>
          <code class="computeroutput"><span class="keyword">class</span></code>. Thanks to this integrated
          approach, containers such as <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">map</span><span class="special">&lt;&gt;</span></code> or <a href="http://www.boost.org/doc/libs/release/libs/ptr_container/doc/ptr_container.html" target="_top">pointer
          containers</a> fit into the framework without the need for (major)
          adjustments. The library is open to customization, a task that is facilitated
          by macros. See <a class="link" href="../put/modulo.html#boost_assign_v2.put.modulo.modifier.std.custom" title="Customization">here</a>
          and <a class="link" href="../put/modulo.html#boost_assign_v2.put.modulo.modifier.ext.custom" title="Customization">here</a>.
        </p>
<p>
          Finally member function <code class="computeroutput"><span class="identifier">range</span><span class="special">&lt;&gt;()</span></code>, in <a href="../../../../../../../libs/assign/doc/index.html" target="_top">Boost.Assign
          1.0</a>, is replaced, in <a href="../.././index.html" target="_top">Boost.Assign 2.0</a>,
          by in conjunction with <code class="computeroutput"><span class="keyword">operator</span><span class="special">|()</span></code> <a class="link" href="../put.html#boost_assign_v2.put.pipe.range" title="put_range"><code class="computeroutput"><span class="identifier">put_range</span><span class="special">()</span></code></a>.
        </p>
<a name="boost_assign_v2.apx.change_log.v2.utility"></a><h6>
<a name="id36347641"></a>
          <a class="link" href="change_log.html#boost_assign_v2.apx.change_log.v2.utility">Utility</a>
        </h6>
<p>
          This <a class="link" href="../util.html" title="Utility">section</a> of <a href="../.././index.html" target="_top">Boost.Assign
          2.0</a> extends the library's core with functionality that surrounds
          containers or ranges. Whereas this used to be embedded in the objects returned
          by in <a href="../../../../../../../libs/assign/doc/index.html" target="_top">Boost.Assign
          1.0</a>, it is in in <a href="../.././index.html" target="_top">Boost.Assign 2.0</a>
          supplied by free-functions, which perhaps improves modularity and ease
          of maintenance.
        </p>
<p>
          Relational operators, for example, are simply relagated to <a href="http://svn.boost.org/svn/boost/trunk/libs/range/doc/html/range/reference/utilities/iterator_range.html" target="_top"><code class="computeroutput"><span class="identifier">boost</span><span class="special">::</span><span class="identifier">iterator_range</span><span class="special">&lt;&gt;</span></code></a>
          via a convenience function <a class="link" href="../util/sub_range.html" title="sub_range"><code class="computeroutput"><span class="identifier">sub_range</span><span class="special">()</span></code></a>.
        </p>
<p>
          Member functions <code class="computeroutput"><span class="identifier">to_array</span><span class="special">()</span></code>, <code class="computeroutput"><span class="identifier">to_adapter</span><span class="special">()</span></code>, and <code class="computeroutput"><span class="identifier">to_container</span><span class="special">()</span></code>, and the implicit conversion operator,
          in <a href="../../../../../../../libs/assign/doc/index.html" target="_top">Boost.Assign
          1.0</a>, are captured, in <a href="../.././index.html" target="_top">Boost.Assign 2.0</a>,
          by the free-function <a class="link" href="../util.html#boost_assign_v2.util.convert" title="converter"><code class="computeroutput"><span class="identifier">converter</span><span class="special">()</span></code></a>.
        </p>
</div>
<div class="footnotes">
<br><hr width="100" align="left">
<div class="footnote"><p><sup>[<a name="ftn.id36347427" href="#id36347427" class="para">4</a>] </sup>
            The analog <a href="../../../../../../../libs/assign/doc/index.html" target="_top">Boost.Assign
            1.0</a>'s <code class="computeroutput"><span class="identifier">list_of</span><span class="special">()</span></code> is, in <a href="../.././index.html" target="_top">Boost.Assign
            2.0</a>, renamed <code class="computeroutput"><span class="identifier">deque</span><span class="special">()</span></code>. This is because <code class="computeroutput"><span class="identifier">list_of</span></code>
            evokes a particular data-structure (forward traversal) that is different
            from the actual underlying one, <code class="computeroutput"><span class="identifier">std</span><span class="special">::</span><span class="identifier">deque</span><span class="special">&lt;&gt;</span></code> (random access).
          </p></div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2003 -2004 Thorsten Ottosen, 2010 Erwann Rogard<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../apx.html"><img src="../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../apx.html"><img src="../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="help.html"><img src="../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
