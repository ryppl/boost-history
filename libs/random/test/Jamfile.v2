# (C) Copyright 2006: Eric Niebler
# Distributed under the Boost Software License, Version 1.0.
# (See accompanying file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

# bring in rules for testing
import testing ;
import sprng ;

# sprng.init ; 

project
    : requirements
      <library>../build//boost_random
      <link>static
      <include>../../..
    ;

test-suite "random_parallel"
    :
      [ run lcg64_test.cpp ]
      [ run parameter_test.cpp ]
      [ run buffered_generator_test.cpp ]
      [ run buffered_uniform_01_test.cpp ]
      [ run random_test.cpp ]
      [ run buffered_generator_timings.cpp ]
    ;

# [ run mpi_test.cpp 
#      <lib>../build/boost_random
#      : : : : mpi_test ]



if ! [ sprng.initialized ]
{
    ECHO "warning: SPRNG not initialized in user-config.jam" ;
    ECHO "warning: Trying location given by SPRNG_ROOT variable." ;
    using sprng ;
}

if [ sprng.initialized ] {
project
    : requirements
      <library>../build//sprng
      <link>static
      <include>../../..
    ;
    
  if [ sprng.havegmp ] 
  {
      test-suite random_sprng
        : [ run sprng_test.cpp ]
          [ run pmlcg_test.cpp ]
          [ run sprng_parameter_test.cpp ]
        ;
  }
  else
  {
      test-suite random_sprng
        : [ run sprng_test.cpp ]
          [ run sprng_parameter_test.cpp ]
        ;
  }
}
else
{
  ECHO "warning: SPRNG initialization failed. Skipping SPRNG tests." ;
}
