<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Boost: Swap Documentation</title>
   </head>
  <body>
    <!-- Page header -->
    <img src="../../boost.png" alt="C++ Boost" align="middle" width="277" height="86"/>
    <h1>Swap</h1>
    
    <p>
      <tt>template&lt;class T&gt; void swap(T&amp; <em>left</em>, T&amp; <em>right</em>);</tt>
    </p>
     
    <!-- Intoduction -->
    <p>
      The template function <tt>boost::swap</tt> allows the values of two variables to be swapped, using argument dependent lookup to select a specialized swap function if available. If no specialized swap function is available, <tt>std::swap</tt> is used.
    </p>
    
    <!-- Rationale -->
    <h2>Rationale</h2>
    <p>
      The generic <tt>std::swap</tt> function requires that the elements to be swapped are assignable and copy constructible. It is usually implemented using one copy construction and two assignments. This is often both unnecessarily restrictive and unnecessarily slow. In addition, specialized swap functions are often able to provide the no-throw exception guarantee where the generic swap implementation provides only the basic guarantee.</p>
    <p>
      The alternative to using argument dependent lookup in this situation is to provide a template specialization of std::swap for every type that requires a specialized swap. Although this is legal C++, no boost libraries use this method, whereas many boost libraries provide specialized swap functions in their own namespaces.
    </p>
    <p>
      <tt>boost::swap</tt> also supports swapping built-in arrays. Note that <tt>std::swap</tt> doesn't yet do so, but a request to add an overload of <tt>std::swap</tt> for built-in arrays has been well received by the Library Working Group of the C++ Standards Committee: <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-active.html#809">LWG issue 809. std::swap should be overloaded for array types</a>
      <tt>boost::swap</tt> is no-throw for arrays whose element type has a no-throw swap. However, if the swap function of the element type provides the strong guarantee, then <tt>boost::swap</tt> only provides the basic guarantee, for arrays of size > 1.
    </p>
    
    <!-- Requirements -->
    <h2>Requirements</h2>
    <p>Either:</p>
    <ul>      
      <li>T must be assignable.</li>
      <li>T must be copy constructible.</li>
    </ul>
    <p>Or:</p>
    <ul>
      <li>A function with the signature <tt>swap(T&,T&)</tt> is available via argument dependent lookup</li>
    </ul>
    <p>Or:</p>
    <ul>
      <li>A template specialization of std::swap exists for T</li>
    </ul>
    <p>Or:</p>
    <ul>
      <li>T is a built-in array of swappable elements</li>
    </ul>

    
    <!-- Portability -->
    <h2>Portability</h2>
    <p>
      Several older compilers do not support argument dependent lookup - on these compilers <tt>boost::swap</tt> will call <tt>std::swap</tt>, ignoring any specialized swap functions that could be found as a result of argument dependent lookup.
    </p>
    
    <!-- Credits -->
    <h2>Credits</h2>
    <ul>
      <li>
        <em>Steven Wanatabe</em> - for the idea to use a barrier namespaces, enabling the function to have the name '<tt>swap</tt>' without introducing ambiguity or infinite recursion.
      </li>
      <li>
        <em>Niels Dekker</em> - for adding support for built-in arrays
      </li>
      <li>
        <em><a href="mailto:Joseph.Gauterin@googlemail.com">Joseph Gauterin</a></em> - for the initial idea, final implementation, tests, and documentation.
      </li>
    </ul>

    <!-- Copyright info -->    
    <hr/>
    <p>Revised: 3 July 2008</p>
    <p>
      Copyright 2007, 2008 Joseph Gauterin. Use, modification, and distribution are subject to the Boost Software License, Version 1.0.
      (See accompanying file <a href="../../LICENSE_1_0.txt">LICENSE_1_0.txt</a> or a copy at &lt;<a href="http://www.boost.org/LICENSE_1_0.txt">http://www.boost.org/LICENSE_1_0.txt</a>&gt;.)
    </p>
    
  </body>
</html>
