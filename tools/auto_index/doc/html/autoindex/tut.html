<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Getting Started and Tutorial</title>
<link rel="stylesheet" href="../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.74.0">
<link rel="home" href="../index.html" title="AutoIndex">
<link rel="up" href="../index.html" title="AutoIndex">
<link rel="prev" href="overview.html" title="Overview">
<link rel="next" href="script_ref.html" title="Script File Reference">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="overview.html"><img src="../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="script_ref.html"><img src="../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="autoindex.tut"></a><a class="link" href="tut.html" title="Getting Started and Tutorial"> Getting Started and Tutorial</a>
</h2></div></div></div>
<a name="autoindex.tut.step_1__build_the_tool"></a><h5>
<a name="id972429"></a>
      <a class="link" href="tut.html#autoindex.tut.step_1__build_the_tool">Step 1: Build the tool</a>
    </h5>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../doc/html/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
        This step is strictly optional, but can speed up build times.
      </p></td></tr>
</table></div>
<p>
      cd into <code class="computeroutput"><span class="identifier">tools</span><span class="special">/</span><span class="identifier">auto_index</span><span class="special">/</span><span class="identifier">build</span></code> and invoke bjam as:
    </p>
<pre class="programlisting"><span class="identifier">bjam</span> <span class="identifier">release</span>
</pre>
<p>
      Optionally pass the name of the compiler toolset you want to use to bjam as
      well:
    </p>
<pre class="programlisting"><span class="identifier">bjam</span> <span class="identifier">release</span> <span class="identifier">gcc</span>
</pre>
<p>
      Now open up your user-config.jam file and at the end add the line:
    </p>
<pre class="programlisting">using auto-index : <span class="emphasis"><em>full-path-of-executable</em></span> ; 
</pre>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../doc/html/images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top">
<p>
        This declaration must go towards the end of user-config.jam, or in any case
        after the Boostbook initialisation.
      </p>
<p>
        Also note that Windows users must use forward slashes in the paths in user-config.jam
      </p>
</td></tr>
</table></div>
<p>
      Finally copy <code class="computeroutput"><span class="identifier">tools</span><span class="special">/</span><span class="identifier">auto_index</span><span class="special">/</span><span class="keyword">auto</span><span class="special">-</span><span class="identifier">index</span><span class="special">.</span><span class="identifier">jam</span></code> into
      the same directory as the rest of the Boost.Build tools (under <code class="computeroutput"><span class="identifier">tools</span><span class="special">/</span><span class="identifier">build</span><span class="special">/</span><span class="identifier">v2</span><span class="special">/</span><span class="identifier">tools</span></code> in your main Boost tree): this is a
      temporary requirement that will go away if the tool is accepted into Boost.
    </p>
<a name="autoindex.tut.step_2__configure_boost_build"></a><h5>
<a name="id972601"></a>
      <a class="link" href="tut.html#autoindex.tut.step_2__configure_boost_build">Step 2: Configure
      Boost.Build</a>
    </h5>
<p>
      Assuming you have a Jamfile for building your documentation that looks something
      like:
    </p>
<pre class="programlisting">boostbook standalone
    :
        type_traits
    :
        # build requirements go here:
    ;
</pre>
<p>
      Then add the line:
    </p>
<pre class="programlisting">using auto-index ; </pre>
<p>
      to the start of the Jamfile, and then add whatever auto-index options you want
      to the build requirements section, for example:
    </p>
<pre class="programlisting">boostbook standalone
    :
        type_traits
    :
        # build requirements go here:
        
        # this one turns on indexing:
        &lt;auto-index&gt;on
        # choose indexing method for pdf's:
        &lt;format&gt;pdf:&lt;auto-index-internal&gt;off
        # choose indexing method for html:
        &lt;format&gt;html:&lt;auto-index-internal&gt;on
        # set the name of the script file to use:
        &lt;auto-index-script&gt;index.idx
    ;
</pre>
<p>
      The available options are:
    </p>
<div class="variablelist">
<p class="title"><b></b></p>
<dl>
<dt><span class="term">&lt;auto-index&gt;off/on</span></dt>
<dd><p>
          Turns indexing of the document on, defaults to "off", so be sure
          to set this if you want AutoIndex invoked!
        </p></dd>
<dt><span class="term">&lt;auto-index-internal&gt;off/on</span></dt>
<dd><p>
          Chooses whether AutoIndex creates the index itself (feature on), or whether
          it simply inserts the necessary DocBook markup so that the DocBook XSL
          stylesheets can create the index.
        </p></dd>
<dt><span class="term">&lt;auto-index-script&gt;filename</span></dt>
<dd><p>
          Specifies the name of the script to load.
        </p></dd>
<dt><span class="term">&lt;auto-index-no-duplicates&gt;off/on</span></dt>
<dd><p>
          When "on" AutoIndex will only index a term once in any given
          section, otherwise (the default) multiple index entries per term may be
          created if the term occurs more than once in the section.
        </p></dd>
<dt><span class="term">&lt;auto-index-verbose&gt;off/on</span></dt>
<dd><p>
          Defaults to "off". When turned on the AutoIndex prints progress
          information - generally useful only for debugging purposes.
        </p></dd>
<dt><span class="term">&lt;auto-index-prefix&gt;filename</span></dt>
<dd><p>
          Specifies a directory to apply as a prefix to all relative file paths in
          the script file.
        </p></dd>
<dt><span class="term">auto-index-type=element-name</span></dt>
<dd><p>
          Specifies the name of the XML element to enclose internally generated indexes
          in: defaults to "section", but could equally be "appendix"
          or "chapter" or some other block level element that has a formal
          title.
        </p></dd>
</dl>
</div>
<a name="autoindex.tut.step_3__add_indexes_to_your_documentation"></a><h5>
<a name="id972742"></a>
      <a class="link" href="tut.html#autoindex.tut.step_3__add_indexes_to_your_documentation">Step
      3: Add indexes to your documentation</a>
    </h5>
<p>
      To add a single index to a BoostBook/Docbook document, then add <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">index</span><span class="special">/&gt;</span></code> at the location where you want the index
      to appear. The index will be rendered as a separate section when the documentation
      is built.
    </p>
<p>
      To add multiple indexes, then give each one a title and set it's <code class="computeroutput"><span class="identifier">type</span></code> attribute to specify which terms will
      be included, for example to place the <span class="emphasis"><em>function</em></span>, <span class="emphasis"><em>class</em></span>,
      <span class="emphasis"><em>macro</em></span> or <span class="emphasis"><em>typedef</em></span> names indexed by
      <span class="emphasis"><em>auto_index</em></span> in separate indexes along with a main "include
      everything" index as well, one could add:
    </p>
<pre class="programlisting">&lt;index type="class_name"&gt;
&lt;title&gt;Class Index&lt;/title&gt;
&lt;/index&gt;

&lt;index type="typedef_name"&gt;
&lt;title&gt;Typedef Index&lt;/title&gt;
&lt;/index&gt;

&lt;index type="function_name"&gt;
&lt;title&gt;Function Index&lt;/title&gt;
&lt;/index&gt;

&lt;index type="macro_name"&gt;
&lt;title&gt;Macro Index&lt;/title&gt;
&lt;<span class="emphasis"><em>index&gt;

&lt;index</em></span>&gt;
</pre>
<p>
      In quickbook, you add the same markup but enclose it in an escape:
    </p>
<pre class="programlisting"><span class="char">''</span><span class="char">'&lt;index/&gt;'</span><span class="char">''</span>
</pre>
<p>
      If you are using auto-index's internal index generation (usually recomended
      for HTML output) then you can also decide what kind of XML wrapper the generated
      index is placed in. By default this is a <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">section</span><span class="special">&gt;...&lt;/</span><span class="identifier">section</span><span class="special">&gt;</span></code>
      XML block (this replaces the original <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">index</span><span class="special">&gt;...&lt;/</span><span class="identifier">index</span><span class="special">&gt;</span></code>
      block). However, depending upon the structure of the document and whether or
      not you want the index on a separate page - or else on the front page after
      the TOC - you may want to place the index inside a different type of XML block.
      For example if your document uses <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">chapter</span><span class="special">&gt;</span></code>
      top level content rather than <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">section</span><span class="special">&gt;</span></code>'s
      then it may be preferable to place the index in a <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">chapter</span><span class="special">&gt;</span></code>
      or <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">appendix</span><span class="special">&gt;</span></code> block. You can also place the index inside
      an <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">index</span><span class="special">&gt;</span></code> block if you prefer, in which case the
      index does not appear in on a page of it's own, but after the TOC in the HTML
      output.
    </p>
<p>
      You control the type of XML block used by setting the <code class="computeroutput"><span class="special">&lt;</span><span class="keyword">auto</span><span class="special">-</span><span class="identifier">index</span><span class="special">-</span><span class="identifier">type</span><span class="special">&gt;</span><span class="identifier">element</span><span class="special">-</span><span class="identifier">name</span></code> attribute in the Jamfile, or via the
      <code class="computeroutput"><span class="identifier">index</span><span class="special">-</span><span class="identifier">type</span><span class="special">=</span><span class="identifier">element</span><span class="special">-</span><span class="identifier">name</span></code> command
      line option to auto-index itself. For example, to place the index in an appendix
      your Jamfile might look like:
    </p>
<pre class="programlisting">using quickbook ;
using auto-index ;

xml type_traits : type_traits.qbk ;
boostbook standalone
    :
        type_traits
    :
        # indexing is on:
        &lt;auto-index&gt;on                          
        # PDF's rely on the XSL stylesheets to generate the index:
        &lt;format&gt;pdf:&lt;auto-index-internal&gt;off    
        # HTML output uses auto-index to generate the index:
        &lt;format&gt;html:&lt;auto-index-internal&gt;on
        # Name of script file to use:
        &lt;auto-index-script&gt;index.idx
        # Set the XML wrapper for HML Indexes to "appendix":
        &lt;format&gt;html:&lt;auto-index-type&gt;appendix
</pre>
<a name="autoindex.tut.step_4__create_the_script_file"></a><h5>
<a name="id980810"></a>
      <a class="link" href="tut.html#autoindex.tut.step_4__create_the_script_file">Step 4: Create
      the script file</a>
    </h5>
<p>
      AutoIndex works by reading a script file that tells it what to index, at it's
      simplest it will scan one or more headers for terms that should be indexed
      in the documentation. So for example to scan "myheader.hpp" the script
      file would just contain:
    </p>
<pre class="programlisting"><span class="special">!</span><span class="identifier">scan</span> <span class="identifier">myheader</span><span class="special">.</span><span class="identifier">hpp</span>
</pre>
<p>
      Or we can recursively scan through directories looking for all the files to
      scan whose name matches a particular regular expression:
    </p>
<pre class="programlisting">!scan-path "..<span class="emphasis"><em>..</em></span>../../boost/math" ".*.hpp" true </pre>
<p>
      Note how each argument is whitespace separated and can be optionally enclosed
      in "double quotes". The final <span class="emphasis"><em>true</em></span> argument
      indicates that subdirectories in <code class="computeroutput"><span class="special">../../../../</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">math</span></code>
      should be searched in addition to that directory.
    </p>
<p>
      Often the <span class="emphasis"><em>scan</em></span> or <span class="emphasis"><em>scan-path</em></span> rules
      will bring in too many terms to search for, so we need to be able to exclude
      terms as well:
    </p>
<pre class="programlisting"><span class="special">!</span><span class="identifier">exclude</span> <span class="identifier">type</span>
</pre>
<p>
      Which excludes the term "type" from being indexed.
    </p>
<p>
      We can also add terms manually:
    </p>
<pre class="programlisting"><span class="identifier">foobar</span>
</pre>
<p>
      will index occurances of "foobar" and:
    </p>
<pre class="programlisting"><span class="identifier">foobar</span> <span class="special">\&lt;\</span><span class="identifier">w</span><span class="special">*(</span><span class="identifier">foo</span><span class="special">|</span><span class="identifier">bar</span><span class="special">)\</span><span class="identifier">w</span><span class="special">*\&gt;</span>
</pre>
<p>
      will index any whole word containing either "foo" or "bar"
      within it, this is useful when you want to index a lot of similar or related
      words under one entry, for example:
    </p>
<pre class="programlisting"><span class="identifier">reflex</span>
</pre>
<p>
      Will only index occurances of "reflex" as a whole word, but:
    </p>
<pre class="programlisting"><span class="identifier">reflex</span> <span class="special">\&lt;</span><span class="identifier">reflex</span><span class="special">\</span><span class="identifier">w</span><span class="special">*\&gt;</span>
</pre>
<p>
      will index occurances of "reflex", reflexing" and "reflexed"
      all under the same entry <span class="emphasis"><em>reflex</em></span>.
    </p>
<p>
      This inclusion rule can also restict the term to certain sections, and add
      an index category that the term should belong to (so it only appears in certain
      indexes).
    </p>
<p>
      Finally the script can add rewrite rules, that rename section names that are
      automatically used as index entries. For example we might want to remove leading
      "A" or "The" prefixes from section titles when AutoIndex
      uses them as an index entry:
    </p>
<pre class="programlisting"><span class="special">!</span><span class="identifier">rewrite</span><span class="special">-</span><span class="identifier">name</span> <span class="string">"(?i)(?:A|The)\s+(.*)"</span> <span class="string">"\1"</span>
</pre>
<a name="autoindex.tut.step_5__add_manual_index_entries___optional"></a><h5>
<a name="id981068"></a>
      <a class="link" href="tut.html#autoindex.tut.step_5__add_manual_index_entries___optional">Step
      5: Add Manual Index Entries - Optional</a>
    </h5>
<p>
      If you add manual <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">indexentry</span><span class="special">&gt;</span></code> markup to your docbook XML then these will
      be passed through unchanged. Please note however, that if you are using auto-index's
      internal index generation then it only recognises <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">primary</span><span class="special">&gt;</span></code>
      and <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">secondary</span><span class="special">&gt;</span></code> elements within the <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">indexterm</span><span class="special">&gt;</span></code>.
      <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">tertiary</span><span class="special">&gt;</span></code>, <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">see</span><span class="special">&gt;</span></code> and
      <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">seealso</span><span class="special">&gt;</span></code> elements are not currently recognised and
      auto-index will emit a warning if these are used. Likewise none of the attributes
      which can be applied to these elements are used when auto-index generates the
      index itself, with the exception of the "type" attribute.
    </p>
<a name="autoindex.tut.step_6__build_the_your_docs"></a><h5>
<a name="id981188"></a>
      <a class="link" href="tut.html#autoindex.tut.step_6__build_the_your_docs">Step 6: Build the
      Your Docs</a>
    </h5>
<p>
      Make sure that auto-index.jam is in your BOOST_BUILD_PATH, by either setting
      the environment variable BOOST_BUILD_PATH to point to the directory containing
      it, or by copying the file into <code class="computeroutput"><span class="identifier">boost</span><span class="special">-</span><span class="identifier">root</span><span class="special">/</span><span class="identifier">tools</span><span class="special">/</span><span class="identifier">build</span><span class="special">/</span><span class="identifier">v2</span><span class="special">/</span><span class="identifier">tools</span></code>. Then you build the docs with either:
    </p>
<pre class="programlisting"><span class="identifier">bjam</span> <span class="identifier">release</span>
</pre>
<p>
      To build the html docs or:
    </p>
<pre class="programlisting"><span class="identifier">bjam</span> <span class="identifier">pdf</span> <span class="identifier">release</span>
</pre>
<p>
      To build the pdf.
    </p>
<p>
      During the build process you should see AutoIndex emit a message such as:
    </p>
<pre class="programlisting">Indexing 990 terms... </pre>
<p>
      If you don't see that, or if it's indexing 0 terms then something is wrong!
    </p>
<a name="autoindex.tut.step_7__iterate"></a><h5>
<a name="id981298"></a>
      <a class="link" href="tut.html#autoindex.tut.step_7__iterate">Step 7: Iterate</a>
    </h5>
<p>
      Creating a good index is an iterative process, often the first step is just
      to add a header scanning rule to the script file and then generate the documentation
      and see:
    </p>
<div class="itemizedlist"><ul type="disc">
<li>
        What's missing.
      </li>
<li>
        What's been included that shouldn't be.
      </li>
<li>
        What's been included under a poor name.
      </li>
</ul></div>
<p>
      Further rules can then be added to the script to handle these cases and the
      next iteration examined, and so on.
    </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2008 John Maddock<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="overview.html"><img src="../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../index.html"><img src="../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="script_ref.html"><img src="../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
