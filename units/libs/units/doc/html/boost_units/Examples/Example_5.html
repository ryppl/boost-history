<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Example 5</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.71.1">
<link rel="start" href="../../index.html" title="Chapter 1. Boost.Units 0.7.1">
<link rel="up" href="../Examples.html" title="Examples">
<link rel="prev" href="Example_4.html" title="Example 4">
<link rel="next" href="Example_6.html" title="Example 6">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%">
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../boost.png"></td>
<td align="center"><a href="../../../../index.htm">Home</a></td>
<td align="center"><a href="../../libraries.html">Libraries</a></td>
<td align="center"><a href="../../../../people/people.htm">People</a></td>
<td align="center"><a href="../../../../more/faq.htm">FAQ</a></td>
<td align="center"><a href="../../../../more/index.htm">More</a></td>
</table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="Example_4.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../Examples.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="Example_6.html"><img src="../../images/next.png" alt="Next"></a>
</div>
<div class="section" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="boost_units.Examples.Example_5"></a><a href="Example_5.html" title="Example 5"> Example 5</a></h3></div></div></div>
<p>
        (<a href="../../../examples/unit_example_5.cpp" target="_top">unit_example_5.cpp</a>)
      </p>
<p>
        This example demonstrates <span class="underline"><code class="computeroutput"><a href="../../boost/units/quantity_cast.html" title="Function template quantity_cast">quantity_cast</a></code></span>
        and the various allowed conversions between SI and CGS units. Defining some
        quantities
      </p>
<p>
        </p>
<p>
          
</p>
<pre class="programlisting">
<span class="identifier">quantity</span><span class="special">&lt;</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">length</span><span class="special">&gt;</span>        <span class="identifier">L1</span> <span class="special">=</span> <span class="identifier">quantity</span><span class="special">&lt;</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">length</span><span class="special">,</span><span class="keyword">int</span><span class="special">&gt;(</span><span class="keyword">int</span><span class="special">(</span><span class="number">2.5</span><span class="special">)*</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">meter</span><span class="special">);</span>
<span class="identifier">quantity</span><span class="special">&lt;</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">length</span><span class="special">,</span><span class="keyword">int</span><span class="special">&gt;</span>    <span class="identifier">L2</span> <span class="special">=</span> <span class="identifier">quantity</span><span class="special">&lt;</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">length</span><span class="special">,</span><span class="keyword">double</span><span class="special">&gt;(</span><span class="number">2.5</span><span class="special">*</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">meter</span><span class="special">);</span>
</pre>
<p>
        </p>
<p>
        </p>
<p>
          </p>
<div class="calloutlist"><table border="0" summary="Callout list"></table></div>
<p>
        </p>
<p>
      </p>
<p>
        illustrates implicit conversion of quantities of different value types where
        implicit conversion of the value types themselves is allowed. <span class="underline"><code class="computeroutput"><a href="../../boost/units/quantity_cast.html" title="Function template quantity_cast">quantity_cast</a></code></span>
        allows explicit conversions for three cases:
      </p>
<div class="itemizedlist"><ul type="disc"><li>
          construction of a quantity from a raw value :
        </li></ul></div>
<p>
        </p>
<p>
          
</p>
<pre class="programlisting">
<span class="identifier">quantity</span><span class="special">&lt;</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">length</span><span class="special">,</span><span class="keyword">int</span><span class="special">&gt;</span>    <span class="identifier">L3</span> <span class="special">=</span> <span class="identifier">quantity_cast</span><span class="special">&lt;</span> <span class="identifier">quantity</span><span class="special">&lt;</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">length</span><span class="special">,</span><span class="keyword">int</span><span class="special">&gt;</span> <span class="special">&gt;(</span><span class="number">2.5</span><span class="special">);</span>
</pre>
<p>
        </p>
<p>
        </p>
<p>
          </p>
<div class="calloutlist"><table border="0" summary="Callout list"></table></div>
<p>
        </p>
<p>
      </p>
<div class="itemizedlist"><ul type="disc"><li>
          explicit casting of a <span class="underline"><code class="computeroutput"><a href="../../boost/units/quantity.html" title="Class template quantity">quantity</a></code></span>
          to a different <code class="computeroutput"><span class="identifier">value_type</span></code>
          :
        </li></ul></div>
<p>
        </p>
<p>
          
</p>
<pre class="programlisting">
<span class="identifier">quantity</span><span class="special">&lt;</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">length</span><span class="special">,</span><span class="keyword">int</span><span class="special">&gt;</span>    <span class="identifier">L4</span> <span class="special">=</span> <span class="identifier">quantity_cast</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;(</span><span class="identifier">L1</span><span class="special">);</span>
</pre>
<p>
        </p>
<p>
        </p>
<p>
          </p>
<div class="calloutlist"><table border="0" summary="Callout list"></table></div>
<p>
        </p>
<p>
      </p>
<div class="itemizedlist"><ul type="disc"><li>
          and explicit casting of a <span class="underline"><code class="computeroutput"><a href="../../boost/units/quantity.html" title="Class template quantity">quantity</a></code></span>
          to a different unit :
        </li></ul></div>
<p>
        </p>
<p>
          
</p>
<pre class="programlisting">
<span class="identifier">quantity</span><span class="special">&lt;</span><span class="identifier">CGS</span><span class="special">::</span><span class="identifier">length</span><span class="special">&gt;</span>       <span class="identifier">L5</span> <span class="special">=</span> <span class="identifier">quantity_cast</span><span class="special">&lt;</span><span class="identifier">CGS</span><span class="special">::</span><span class="identifier">length</span><span class="special">&gt;(</span><span class="identifier">L1</span><span class="special">);</span>
</pre>
<p>
        </p>
<p>
        </p>
<p>
          </p>
<div class="calloutlist"><table border="0" summary="Callout list"></table></div>
<p>
        </p>
<p>
      </p>
<p>
        giving the following output :
      </p>
<p>
        </p>
<p>
          
</p>
<pre class="programlisting">
<span class="identifier">L1</span> <span class="special">=</span> <span class="number">2</span> <span class="identifier">m</span>
<span class="identifier">L2</span> <span class="special">=</span> <span class="number">2</span> <span class="identifier">m</span>
<span class="identifier">L3</span> <span class="special">=</span> <span class="number">2</span> <span class="identifier">m</span>
<span class="identifier">L4</span> <span class="special">=</span> <span class="number">2</span> <span class="identifier">m</span>
<span class="identifier">L5</span> <span class="special">=</span> <span class="number">200</span> <span class="identifier">cm</span>
</pre>
<p>
        </p>
<p>
        </p>
<p>
          </p>
<div class="calloutlist"><table border="0" summary="Callout list"></table></div>
<p>
        </p>
<p>
      </p>
<p>
        Explicit unit system conversion is allowed in the <span class="underline"><code class="computeroutput"><a href="../../boost/units/quantity.html" title="Class template quantity">quantity</a></code></span> constructor
        :
      </p>
<p>
        </p>
<p>
          
</p>
<pre class="programlisting">
<span class="identifier">quantity</span><span class="special">&lt;</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">volume</span><span class="special">&gt;</span>    <span class="identifier">vs</span><span class="special">(</span><span class="number">1.0</span><span class="special">*</span><span class="identifier">pow</span><span class="special">&lt;</span><span class="number">3</span><span class="special">&gt;(</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">meter</span><span class="special">));</span>      
<span class="identifier">quantity</span><span class="special">&lt;</span><span class="identifier">CGS</span><span class="special">::</span><span class="identifier">volume</span><span class="special">&gt;</span>   <span class="identifier">vc</span><span class="special">(</span><span class="identifier">vs</span><span class="special">);</span>
<span class="identifier">quantity</span><span class="special">&lt;</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">volume</span><span class="special">&gt;</span>    <span class="identifier">vs2</span><span class="special">(</span><span class="identifier">vc</span><span class="special">);</span>
                    
<span class="identifier">quantity</span><span class="special">&lt;</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">energy</span><span class="special">&gt;</span>    <span class="identifier">es</span><span class="special">(</span><span class="number">1.0</span><span class="special">*</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">joule</span><span class="special">);</span>      
<span class="identifier">quantity</span><span class="special">&lt;</span><span class="identifier">CGS</span><span class="special">::</span><span class="identifier">energy</span><span class="special">&gt;</span>   <span class="identifier">ec</span><span class="special">(</span><span class="identifier">es</span><span class="special">);</span>
<span class="identifier">quantity</span><span class="special">&lt;</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">energy</span><span class="special">&gt;</span>    <span class="identifier">es2</span><span class="special">(</span><span class="identifier">ec</span><span class="special">);</span>
                    
<span class="identifier">quantity</span><span class="special">&lt;</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">velocity</span><span class="special">&gt;</span>  <span class="identifier">v1</span> <span class="special">=</span> <span class="number">2.0</span><span class="special">*</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">meters</span><span class="special">/</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">second</span><span class="special">,</span>     
                        <span class="identifier">v2</span><span class="special">(</span><span class="identifier">quantity</span><span class="special">&lt;</span><span class="identifier">CGS</span><span class="special">::</span><span class="identifier">velocity</span><span class="special">&gt;(</span><span class="number">2.0</span><span class="special">*</span><span class="identifier">CGS</span><span class="special">::</span><span class="identifier">centimeters</span><span class="special">/</span><span class="identifier">CGS</span><span class="special">::</span><span class="identifier">second</span><span class="special">));</span>
</pre>
<p>
        </p>
<p>
        </p>
<p>
          </p>
<div class="calloutlist"><table border="0" summary="Callout list"></table></div>
<p>
        </p>
<p>
      </p>
<p>
        which produces the following output:
      </p>
<p>
        </p>
<p>
          
</p>
<pre class="programlisting">
<span class="identifier">volume</span> <span class="special">(</span><span class="identifier">m</span><span class="special">^</span><span class="number">3</span><span class="special">)</span>  <span class="special">=</span> <span class="number">1</span> <span class="identifier">m</span><span class="special">^</span><span class="number">3</span>
<span class="identifier">volume</span> <span class="special">(</span><span class="identifier">cm</span><span class="special">^</span><span class="number">3</span><span class="special">)</span> <span class="special">=</span> <span class="number">1e+06</span> <span class="identifier">cm</span><span class="special">^</span><span class="number">3</span>
<span class="identifier">volume</span> <span class="special">(</span><span class="identifier">m</span><span class="special">^</span><span class="number">3</span><span class="special">)</span>  <span class="special">=</span> <span class="number">1</span> <span class="identifier">m</span><span class="special">^</span><span class="number">3</span>

<span class="identifier">energy</span> <span class="special">(</span><span class="identifier">joules</span><span class="special">)</span> <span class="special">=</span> <span class="number">1</span> <span class="identifier">m</span><span class="special">^</span><span class="number">2</span> <span class="identifier">kg</span> <span class="identifier">s</span><span class="special">^(-</span><span class="number">2</span><span class="special">)</span>
<span class="identifier">energy</span> <span class="special">(</span><span class="identifier">ergs</span><span class="special">)</span>   <span class="special">=</span> <span class="number">1e+07</span> <span class="identifier">cm</span><span class="special">^</span><span class="number">2</span> <span class="identifier">g</span> <span class="identifier">s</span><span class="special">^(-</span><span class="number">2</span><span class="special">)</span>
<span class="identifier">energy</span> <span class="special">(</span><span class="identifier">joules</span><span class="special">)</span> <span class="special">=</span> <span class="number">1</span> <span class="identifier">m</span><span class="special">^</span><span class="number">2</span> <span class="identifier">kg</span> <span class="identifier">s</span><span class="special">^(-</span><span class="number">2</span><span class="special">)</span>

<span class="identifier">velocity</span> <span class="special">(</span><span class="number">2</span> <span class="identifier">m</span><span class="special">/</span><span class="identifier">s</span><span class="special">)</span>  <span class="special">=</span> <span class="number">2</span> <span class="identifier">m</span> <span class="identifier">s</span><span class="special">^(-</span><span class="number">1</span><span class="special">)</span>
<span class="identifier">velocity</span> <span class="special">(</span><span class="number">2</span> <span class="identifier">cm</span><span class="special">/</span><span class="identifier">s</span><span class="special">)</span> <span class="special">=</span> <span class="number">0.02</span> <span class="identifier">m</span> <span class="identifier">s</span><span class="special">^(-</span><span class="number">1</span><span class="special">)</span>
</pre>
<p>
        </p>
<p>
        </p>
<p>
          </p>
<div class="calloutlist"><table border="0" summary="Callout list"></table></div>
<p>
        </p>
<p>
      </p>
<p>
        While the library default is to enable only those unit conversions for which
        the conversion of every fundamental dimension present in a quantity is specifically
        enabled as implicit, it is possible to supersede this behavior and enable
        all implicit conversions by defining the preprocessor constant <span class="underline"><code class="computeroutput">BOOST_UNITS_ENABLE_IMPLICIT_UNIT_CONVERSIONS</code></span>.
        This allows us to do things like the following:
      </p>
<p>
        </p>
<p>
          
</p>
<pre class="programlisting">
<span class="identifier">quantity</span><span class="special">&lt;</span><span class="identifier">SI</span><span class="special">::</span><span class="identifier">length</span><span class="special">,</span><span class="keyword">int</span><span class="special">&gt;</span>    <span class="identifier">L4</span> <span class="special">=</span> <span class="identifier">quantity_cast</span><span class="special">&lt;</span><span class="keyword">int</span><span class="special">&gt;(</span><span class="identifier">L1</span><span class="special">);</span>
</pre>
<p>
        </p>
<p>
        </p>
<p>
          </p>
<div class="calloutlist"><table border="0" summary="Callout list"></table></div>
<p>
        </p>
<p>
      </p>
<p>
        which produces the following output:
      </p>
<p>
        </p>
<p>
          
</p>
<pre class="programlisting">
<span class="identifier">implicit</span> <span class="identifier">conversions</span> <span class="identifier">enabled</span>
<span class="identifier">volume</span> <span class="special">(</span><span class="identifier">m</span><span class="special">^</span><span class="number">3</span><span class="special">)</span>  <span class="special">=</span> <span class="number">1</span> <span class="identifier">m</span><span class="special">^</span><span class="number">3</span>
<span class="identifier">volume</span> <span class="special">(</span><span class="identifier">cm</span><span class="special">^</span><span class="number">3</span><span class="special">)</span> <span class="special">=</span> <span class="number">1e+06</span> <span class="identifier">cm</span><span class="special">^</span><span class="number">3</span>

<span class="identifier">energy</span> <span class="special">(</span><span class="identifier">joules</span><span class="special">)</span> <span class="special">=</span> <span class="number">1</span> <span class="identifier">m</span><span class="special">^</span><span class="number">2</span> <span class="identifier">kg</span> <span class="identifier">s</span><span class="special">^(-</span><span class="number">2</span><span class="special">)</span>
<span class="identifier">energy</span> <span class="special">(</span><span class="identifier">ergs</span><span class="special">)</span>   <span class="special">=</span> <span class="number">1e+07</span> <span class="identifier">cm</span><span class="special">^</span><span class="number">2</span> <span class="identifier">g</span> <span class="identifier">s</span><span class="special">^(-</span><span class="number">2</span><span class="special">)</span>

<span class="identifier">velocity</span> <span class="special">(</span><span class="number">2</span> <span class="identifier">m</span><span class="special">/</span><span class="identifier">s</span><span class="special">)</span>  <span class="special">=</span> <span class="number">2</span> <span class="identifier">m</span> <span class="identifier">s</span><span class="special">^(-</span><span class="number">1</span><span class="special">)</span>
<span class="identifier">velocity</span> <span class="special">(</span><span class="number">2</span> <span class="identifier">cm</span><span class="special">/</span><span class="identifier">s</span><span class="special">)</span> <span class="special">=</span> <span class="number">0.02</span> <span class="identifier">m</span> <span class="identifier">s</span><span class="special">^(-</span><span class="number">1</span><span class="special">)</span>
</pre>
<p>
        </p>
<p>
        </p>
<p>
          </p>
<div class="calloutlist"><table border="0" summary="Callout list"></table></div>
<p>
        </p>
<p>
      </p>
<p>
        Of course, blindly enabling implicit conversions entails some risk of unnecessary
        conversions being done in the background, with the potential for loss of
        precision and other related concerns. These issues should be seriously considered,
        and, if possible, implicit conversions limited to cases where it is expressly
        allowed such as in the conversion between two identical units in different
        unit systems (e.g. seconds in SI and CGS systems).
      </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><small>Copyright © 2003 -2007 Matthias Christian Schabel, 2007 Steven Watanabe</small></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="Example_4.html"><img src="../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../Examples.html"><img src="../../images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../images/home.png" alt="Home"></a><a accesskey="n" href="Example_6.html"><img src="../../images/next.png" alt="Next"></a>
</div>
</body>
</html>
